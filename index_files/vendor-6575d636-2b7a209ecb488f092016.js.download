try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6989b64f-67db-413f-ab52-e8cea0ad5019",e._sentryDebugIdIdentifier="sentry-dbid-6989b64f-67db-413f-ab52-e8cea0ad5019")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"033c9e7"},(self.webpackChunk_loomhq_web_client=self.webpackChunk_loomhq_web_client||[]).push([[5184],{599:(e,t,r)=>{"use strict";function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{A:()=>n})},917:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(34713);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,n.A)(i.key),i)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},1107:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(97687);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,n.A)(i.key),i)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},1644:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71932);function i(e,t){if(t&&("object"==(0,n.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}},2278:(e,t,r)=>{"use strict";r.d(t,{lU:()=>y,lh:()=>g});var n=r(47157),i=r(5443),o=r(57832),s=r(84772),a=r(93339),c=["children"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=function(e){var t=e.routeSubscriber,r=p({initialUrl:e.initialUrl}),n=function(e){var t,n,i,o=null===(t=e.next)||void 0===t?void 0:t.toString();o===r.current&&r.searchParams===(null===(n=e.next)||void 0===n?void 0:n.searchParams)||(r={previous:r.current,current:o,searchParams:null===(i=e.next)||void 0===i?void 0:i.searchParams})};return{subscribe:function(e){return t(function(t){n(t),e()})},getSnapshot:function(){return r}}},h=function(e){var t=e.subscribe,r=e.getSnapshot,n=(0,s.useSyncExternalStore)(t,r,r);return(0,a.g)(n)},f={previous:void 0,current:void 0,searchParams:void 0},p=function(e){var t=e.initialUrl;return l(l({},f),{},{current:t?t?.toString():void 0,searchParams:t?.searchParams})},m=(0,o.createContext)(f),y=function(e){var t=e.children,r=(0,n.A)(e,c),i=(0,o.useRef)();i.current||(i.current=d(r));var s=h(i.current);return o.createElement(m.Provider,{value:s},t)},g=function(){return(0,o.useContext)(m)}},3803:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.d(t,{A:()=>n})},5443:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(34713);function i(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},9066:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}r.d(t,{A:()=>n})},12441:(e,t,r)=>{"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}r.d(t,{A:()=>i})},15393:(e,t,r)=>{var n=r(45826).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,s=o.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(e,t,r,n){Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{d({},"")}catch{d=function(e,t,r){return e[t]=r}}function h(e,r,n,i){var o,s,a=Object.create((r&&r.prototype instanceof m?r:m).prototype);return d(a,"_invoke",(o=new S(i||[]),s=1,function(r,i){if(3===s)throw Error("Generator is already running");if(4===s){if("throw"===r)throw i;return{value:t,done:!0}}for(o.method=r,o.arg=i;;){var a=o.delegate;if(a){var c=function e(r,n){var i=n.method,o=r.i[i];if(o===t)return n.delegate=null,"throw"===i&&r.i.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),p;var s=f(o,r.i,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,p;var a=s.arg;return a?a.done?(n[r.r]=a.value,n.next=r.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,p)}(a,o);if(c){if(c===p)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(1===s)throw s=4,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=3;var u=f(e,n,o);if("normal"===u.type){if(s=o.done?4:2,u.arg===p)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(s=4,o.method="throw",o.arg=u.arg)}}),!0),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var p={};function m(){}function y(){}function g(){}var v={};d(v,c,function(){return this});var b=Object.getPrototypeOf,E=b&&b(b(P([])));E&&E!==o&&s.call(E,c)&&(v=E);var O=g.prototype=m.prototype=Object.create(v);function w(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){var r;d(this,"_invoke",function(i,o){function a(){return new t(function(r,a){!function r(i,o,a,c){var u=f(e[i],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==n(d)&&s.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(d).then(function(e){l.value=e,a(l)},function(e){return r("throw",e,a,c)})}c(u.arg)}(i,o,r,a)})}return r=r?r.then(a,a):a()},!0)}function I(e){this.tryEntries.push(e)}function _(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function S(e){this.tryEntries=[[-1]],e.forEach(I,this),this.reset(!0)}function P(e){if(null!=e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(s.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw TypeError(n(e)+" is not iterable")}return y.prototype=g,d(O,"constructor",g),d(g,"constructor",y),d(g,l,y.displayName="GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},r.awrap=function(e){return{__await:e}},w(A.prototype),d(A.prototype,u,function(){return this}),r.AsyncIterator=A,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var s=new A(h(e,t,n,i),o);return r.isGeneratorFunction(t)?s:s.next().then(function(e){return e.done?e.value:s.next()})},w(O),d(O,l,"Generator"),d(O,c,function(){return this}),d(O,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},r.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){s.type="throw",s.arg=e,r.next=t}for(var i=r.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o[4],a=this.prev,c=o[1],u=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=a){if(a<c)return this.method="next",this.arg=t,n(c),!0;if(a<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var i=n;break}}i&&("break"===e||"continue"===e)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i[2],p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var i=n.arg;_(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:P(e),r:r,n},"next"===this.method&&(this.arg=t),p}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},15596:(e,t,r)=>{"use strict";r.d(t,{a:()=>M});var n=r(5443),i=r(57832),o=r(86882),s=r(93240),a=r(57400),c=function(){var e=new Map;return[function(t){return e.set(t,t),function(){e.delete(t)}},function(t){e.forEach(function(e){return e(t)})}]},u=r(2278),l=(0,i.createContext)({update:function(){}}),d=function(){var e=(0,i.useRef)();e.current||(e.current=c());var t=(0,a.A)(e.current,2),r=t[0],n=t[1];return[(0,i.useMemo)(function(){return{initialUrl:new URL(window.location.href),routeSubscriber:r}},[r]),(0,i.useMemo)(function(){return{update:n}},[n])]},h=function(e){var t=e.children,r=d(),n=(0,a.A)(r,2),o=n[0],s=n[1];return i.createElement(l.Provider,{value:s},i.createElement(u.lU,o,t))},f=r(72772),p=function(e){return Array.from(new Set(e).values())};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var g={currentlyMounted:[],hasMounted:[]},v=(0,i.createContext)({placements:g}),b=(0,i.createContext)({placementMount:function(){},placementUnmount:function(){}}),E=function(e){var t=e.children,r=(0,i.useState)(g),n=(0,a.A)(r,2),o=n[0],s=n[1],c=(0,i.useCallback)(function(e){var t=e.placementId;return s(function(e){return e.currentlyMounted.includes(t)?e:y(y({},e),{},{currentlyMounted:p([].concat((0,f.A)(e.currentlyMounted),[t])),hasMounted:p([].concat((0,f.A)(e.hasMounted),[t]))})})},[]),u=(0,i.useCallback)(function(e){var t=e.placementId;return s(function(e){return e.currentlyMounted.includes(t)?y(y({},e),{},{currentlyMounted:e.currentlyMounted.filter(function(e){return e!==t})}):e})},[]),l=(0,i.useMemo)(function(){return{placementMount:c,placementUnmount:u}},[c,u]),d=(0,i.useMemo)(function(){return{placements:o}},[o]);return i.createElement(b.Provider,{value:l},i.createElement(v.Provider,{value:d},t))},O=r(73030),w={activeTriggerState:{activeTriggerId:void 0}},A=i.createContext(w),I=i.createContext({setTriggerState:function(){O.error("No Post Office Trigger Context found. Did you remember to add a Post Office Provider?")}}),_=function(e){var t=e.children,r=(0,i.useState)(w.activeTriggerState),n=(0,a.A)(r,2),o=n[0],s=n[1],c=(0,i.useCallback)(function(e){var t=e.isActive,r=e.triggerId;s(function(e){return e.activeTriggerId!==r||e.activeTriggerId===r&&!1===t?t?{activeTriggerId:r}:{activeTriggerId:void 0}:e})},[]),u=(0,i.useMemo)(function(){return{activeTriggerState:o}},[o]),l=(0,i.useMemo)(function(){return{setTriggerState:c}},[c]);return i.createElement(A.Provider,{value:u},i.createElement(I.Provider,{value:l},t))},S=r(93339),P=function(){var e=new Map;return[function(t){return e.set(t,t),function(){e.delete(t)}},function(t){e.forEach(function(e){return e(t)})}]},T=function(){var e=P(),t=(0,a.A)(e,2),r=t[0],n=t[1],i=P(),o=(0,a.A)(i,2),s=o[0],c=o[1],u=P(),l=(0,a.A)(u,2),d=l[0],h=l[1],f=P(),p=(0,a.A)(f,2),m=p[0],y=p[1],g=P(),v=(0,a.A)(g,2);return{onMessageSnooze:r,snoozeMessageFromPlacement:n,onMessageDismiss:s,dismissMessageFromPlacement:c,onMessageRead:d,markReadFromPlacement:h,onMessageViewed:m,markViewedFromPlacement:y,onMessageClicked:v[0],markClickedFromPlacement:v[1]}},D=(0,i.createContext)(T()).Provider;function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var k=function(e,t){var r,i,o,s,a,c,u,l,d,h,f,p,m=t.env,y=t.overrides;return{currentEnv:m,envConfigs:j(j({},e.envConfigs),{},(0,n.A)({},m,{remoteModule:{origin:null!==(r=null==y||null===(i=y.remoteModule)||void 0===i?void 0:i.origin)&&void 0!==r?r:e.envConfigs[m].remoteModule.origin,pathname:null!==(o=null==y||null===(s=y.remoteModule)||void 0===s?void 0:s.pathname)&&void 0!==o?o:e.envConfigs[m].remoteModule.pathname,searchParams:null!==(a=null==y||null===(c=y.remoteModule)||void 0===c?void 0:c.searchParams)&&void 0!==a?a:e.envConfigs[m].remoteModule.searchParams},api:{origin:null!==(u=null==y||null===(l=y.api)||void 0===l?void 0:l.origin)&&void 0!==u?u:e.envConfigs[m].api.origin,pathname:null!==(d=null==y||null===(h=y.api)||void 0===h?void 0:h.pathname)&&void 0!==d?d:e.envConfigs[m].api.pathname,searchParams:null!==(f=null==y||null===(p=y.api)||void 0===p?void 0:p.searchParams)&&void 0!==f?f:e.envConfigs[m].api.searchParams}}))}};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var M=function(e){var t=e.environment,r=e.context,n=e.children,a=(0,S.g)(k(s.vL,t)),c=(0,S.g)(N(o.wh,r.current)),u=(0,i.useMemo)(function(){return T()},[]);return i.createElement(s.bJ,{value:a},i.createElement(o.K4,{value:c},i.createElement(E,null,i.createElement(D,{value:u},i.createElement(h,null,i.createElement(_,null,n))))))},N=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce(function(e,t){for(var r in t)typeof t[r]>"u"&&delete t[r];return x(x({},e),t)},x({},e))}},16536:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,o=c(e),s=o[0],a=o[1],u=new i((s+a)*3/4-a),l=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(e,t,n){for(var i,o=[],s=t;s<n;s+=3)o.push(r[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],n=[],i="u">typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},16795:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(78706);function i(){return(i="u">typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=(0,n.A)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}},19566:(e,t,r)=>{var n=r(37163)();e.exports=n;try{regeneratorRuntime=n}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},20703:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{A:()=>n})},22723:(e,t,r)=>{"use strict";t.oI=void 0;var n=r(81604);Object.defineProperty(t,"oI",{enumerable:!0,get:function(){return n.bind}}),r(34678)},23476:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},28973:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(97687);function i(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},34678:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.bindAll=void 0;var i=r(81604);function o(e){if(!(typeof e>"u"))return"boolean"==typeof e?{capture:e}:e}t.bindAll=function(e,t,r){var s=t.map(function(t){var s=null==r?t:n(n({},t),{options:n(n({},o(r)),o(t.options))});return(0,i.bind)(e,s)});return function(){s.forEach(function(e){return e()})}}},34713:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(71932);function i(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=(0,n.A)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}},36045:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}r.d(t,{A:()=>n})},37163:(e,t,r)=>{var n=r(23476).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,s=o.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{d({},"")}catch{d=function(e,t,r){return e[t]=r}}function h(e,r,n,i){var o,s,a=Object.create((r&&r.prototype instanceof m?r:m).prototype);return d(a,"_invoke",(o=new S(i||[]),s=1,function(r,i){if(3===s)throw Error("Generator is already running");if(4===s){if("throw"===r)throw i;return{value:t,done:!0}}for(o.method=r,o.arg=i;;){var a=o.delegate;if(a){var c=function e(r,n){var i=n.method,o=r.i[i];if(o===t)return n.delegate=null,"throw"===i&&r.i.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),p;var s=f(o,r.i,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,p;var a=s.arg;return a?a.done?(n[r.r]=a.value,n.next=r.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,p)}(a,o);if(c){if(c===p)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(1===s)throw s=4,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=3;var u=f(e,n,o);if("normal"===u.type){if(s=o.done?4:2,u.arg===p)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(s=4,o.method="throw",o.arg=u.arg)}}),!0),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var p={};function m(){}function y(){}function g(){}var v={};d(v,c,function(){return this});var b=Object.getPrototypeOf,E=b&&b(b(P([])));E&&E!==o&&s.call(E,c)&&(v=E);var O=g.prototype=m.prototype=Object.create(v);function w(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){var r;d(this,"_invoke",function(i,o){function a(){return new t(function(r,a){!function r(i,o,a,c){var u=f(e[i],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==n(d)&&s.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(d).then(function(e){l.value=e,a(l)},function(e){return r("throw",e,a,c)})}c(u.arg)}(i,o,r,a)})}return r=r?r.then(a,a):a()},!0)}function I(e){this.tryEntries.push(e)}function _(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function S(e){this.tryEntries=[[-1]],e.forEach(I,this),this.reset(!0)}function P(e){if(null!=e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(s.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw TypeError(n(e)+" is not iterable")}return y.prototype=g,d(O,"constructor",g),d(g,"constructor",y),y.displayName=d(g,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},r.awrap=function(e){return{__await:e}},w(A.prototype),d(A.prototype,u,function(){return this}),r.AsyncIterator=A,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var s=new A(h(e,t,n,i),o);return r.isGeneratorFunction(t)?s:s.next().then(function(e){return e.done?e.value:s.next()})},w(O),d(O,l,"Generator"),d(O,c,function(){return this}),d(O,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},r.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){s.type="throw",s.arg=e,r.next=t}for(var i=r.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o[4],a=this.prev,c=o[1],u=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=a){if(a<c)return this.method="next",this.arg=t,n(c),!0;if(a<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var i=n;break}}i&&("break"===e||"continue"===e)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i[2],p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),_(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var i=n.arg;_(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:P(e),r:r,n},"next"===this.method&&(this.arg=t),p}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},40365:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(53374);function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,n.A)(e,t)}},41221:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CrossFlowConsumer:()=>v,Journeys:()=>o,Reasons:()=>s,Targets:()=>h,useCrossFlow:()=>c,withCrossFlow:()=>u});var n=r(56808),i=r(57832),o={GET_STARTED:"get-started",DECIDE:"decide",DISCOVER:"discover"},s={NO_API_SUPPORT:"Could not provide requested API version",NO_PROVIDER:"Provider not found"},a=(0,i.createContext)(function(){return{isEnabled:!1,reason:s.NO_PROVIDER}}),c=function(){var e=(0,i.useContext)(a);return(0,i.useMemo)(function(){return e(1)},[e])};function u(e){var t=function(t){var r=c();return i.createElement(e,(0,n.A)({},t,{crossFlow:r}))};return t.displayName="withCrossFlow(".concat(e.displayName||e.name||"Component",")"),t}var l=r(917),d=r(47973);(0,l.A)(function e(t){(0,d.A)(this,e),Object.assign(this,t),Object.freeze(this)});var h={CONFLUENCE:"confluence.ondemand",JIRA_CORE:"jira-core.ondemand",JIRA_SERVICE_DESK:"jira-servicedesk.ondemand",JIRA_SOFTWARE:"jira-software.ondemand",JIRA_PRODUCT_DISCOVERY:"jira-product-discovery",BITBUCKET:"bitbucket.ondemand",TRELLO:"trello",OPSGENIE:"opsgenie",STATUSPAGE:"statuspage",TEAM_CENTRAL:"townsquare",ATLAS:"townsquare",AVOCADO:"avocado",ANALYTICS:"atlassian-analytics-free",COMPASS:"compass",LOOM:"loom"},f=r(47157),p=r(81523),m=r(56700),y=r.n(m),g=["onComplete","onError"],v=function(e){var t=(0,i.useRef)(e),r=(0,i.useRef)(c());return(0,i.useEffect)(function(){var e=r.current;(0,p.A)(y().mark(function r(){var n,i,o,s,a,c;return y().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=(n=t.current).onComplete,o=n.onError,s=(0,f.A)(n,g),!e.isEnabled){r.next=13;break}return a="v1"in s?e.apiV1:e.api,r.prev=3,r.next=6,a.open(s);case 6:c=r.sent,i?.(c),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),o?.(r.t0);case 13:case"end":return r.stop()}},r,null,[[3,10]])}))()},[]),null}},43806:(e,t,r)=>{"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{A:()=>n})},44197:e=>{e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){var r=e.exports="u">typeof window&&window.Math==Math?window:"u">typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var r=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){e.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch{return!0}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(32)("wks"),i=r(9),o=r(0).Symbol,s="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=n},function(e,t,r){var n=r(0),i=r(2),o=r(8),s=r(22),a=r(10),c=function(e,t,r){var u,l,d,h,f=e&c.F,p=e&c.G,m=e&c.S,y=e&c.P,g=e&c.B,v=p?n:m?n[t]||(n[t]={}):(n[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),E=b.prototype||(b.prototype={});for(u in p&&(r=t),r)d=((l=!f&&v&&void 0!==v[u])?v:r)[u],h=g&&l?a(d,n):y&&"function"==typeof d?a(Function.call,d):d,v&&s(v,u,d,e&c.U),b[u]!=d&&o(b,u,h),y&&E[u]!=d&&(E[u]=d)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,r){var n=r(16),i=r(21);e.exports=r(3)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(24);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(28),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",i=e.type||"",o=i.replace(/\/.*$/,"");return r.some(function(e){var t=e.trim();return"."===t.charAt(0)?n.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t})}return!0},r(14),r(34)},function(e,t,r){r(15),e.exports=r(2).Array.some},function(e,t,r){"use strict";var n=r(7),i=r(25)(3);n(n.P+!r(33)([].some,!0)*n.F,"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(17),i=r(18),o=r(20),s=Object.defineProperty;t.f=r(3)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return s(e,t,r)}catch{}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(1);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){e.exports=!r(3)&&!r(4)(function(){return 7!=Object.defineProperty(r(19)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(1),i=r(0).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(1);e.exports=function(e,t){var r,i;if(!n(e))return e;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e))||"function"==typeof(r=e.valueOf)&&!n(i=r.call(e))||!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(0),i=r(8),o=r(23),s=r(9)("src"),a=Function.toString,c=(""+a).split("toString");r(2).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,r,a){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(o(r,s)||i(r,s,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:a?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(10),i=r(26),o=r(27),s=r(12),a=r(29);e.exports=function(e,t){var r=1==e,c=2==e,u=3==e,l=4==e,d=6==e,h=5==e||d,f=t||a;return function(t,a,p){for(var m,y,g=o(t),v=i(g),b=n(a,p,3),E=s(v.length),O=0,w=r?f(t,E):c?f(t,0):void 0;E>O;O++)if((h||O in v)&&(y=b(m=v[O],O,g),e)){if(r)w[O]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return O;case 2:w.push(m)}else if(l)return!1}return d?-1:u||l?l:w}}},function(e,t,r){var n=r(5);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(11);e.exports=function(e){return Object(n(e))}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(30);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(1),i=r(31),o=r(6)("species");e.exports=function(e){var t;return i(e)&&("function"==typeof(t=e.constructor)&&(t===Array||i(t.prototype))&&(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(5);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(0),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){"use strict";var n=r(4);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){r(35),e.exports=r(2).String.endsWith},function(e,t,r){"use strict";var n=r(7),i=r(12),o=r(36),s="".endsWith;n(n.P+n.F*r(38)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),a=void 0===r?n:Math.min(i(r),n),c=String(e);return s?s.call(t,c,a):t.slice(a-c.length,a)===c}})},function(e,t,r){var n=r(37),i=r(11);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n=r(1),i=r(5),o=r(6)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch{try{return t[n]=!1,!"/./"[e](t)}catch{}}return!0}}])},45826:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},46951:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(36045);function i(e,t){if(null==e)return{};var r,i,o=(0,n.A)(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}},47157:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{A:()=>n})},47973:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.d(t,{A:()=>n})},48352:(e,t,r)=>{"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{A:()=>n})},49666:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(60994);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||(0,n.A)(e,t)||function(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},51277:(e,t,r)=>{"use strict";r.d(t,{Hp:()=>s,Im:()=>c,Uz:()=>o,VT:()=>u,nj:()=>a,q$:()=>i,tN:()=>n});var n="http://localhost:4224",i="http://localhost:8081",o="/api/v1/placements/",s="/gateway/api/post-office/api/v1/placements/",a="http://localhost:9009",c="https://post-office-rml-frontend.stg-east.frontend.public.atl-paas.net",u="https://post-office-rml-frontend.prod-east.frontend.public.atl-paas.net"},53374:(e,t,r)=>{"use strict";function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,{A:()=>n})},56700:(e,t,r)=>{var n=r(15393)();e.exports=n;try{regeneratorRuntime=n}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},56808:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}r.d(t,{A:()=>n})},57400:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(85640);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||(0,n.A)(e,t)||function(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},57936:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var n,i=r(79559),o=r(78916),s=r(48352),a=r(28973),c=r(86311),u=r(1107),l=r(69642),d=r.n(l),h=r(96024),f=function(){return n||(n=p({atob:"function"==typeof atob&&atob.bind(void 0)||"u">typeof h.Buffer&&function(e){return h.Buffer.from(e,"base64").toString()},btoa:"function"==typeof btoa&&btoa.bind(void 0)||"u">typeof h.Buffer&&function(e){return h.Buffer.from(e).toString("base64")},URLSearchParams:"function"==typeof URLSearchParams&&URLSearchParams||r(95634).URLSearchParams}))},p=function(e){if(!(e.atob&&e.btoa&&e.URLSearchParams))throw TypeError("Origin-Tracing: missing environment APIs. Required: btoa(), atob(), URLSearchParams() (or in Node: Buffer, require('url').URLSearchParams).");return e},m={confluence:"c",jira:"j",stride:"s",bitbucket:"b",trello:"t"};function y(e){var t=g();return function(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!e})()}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var E="atlOrigin",O={originLibrary:"origin-tracing.js@".concat("6.1.5")},w=function(){function e(t){var r=t.id,n=void 0===r?e.generateId():r,i=t.product,o=t.dangerouslySkipValidation;(0,c.A)(this,e),this.id=n,this.product=i,void 0!==o&&o||this.validate()}return(0,u.A)(e,[{key:"encode",value:function(){var e,t,r,n;return e=JSON.stringify({i:(r={id:this.id,product:this.product}).id,p:(n=r.product)&&n in m?m[n]:n}),null==(t=f().btoa(e))?"":String(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"addToUrl",value:function(e){var t=this;return _(e,function(e){var r=new(f()).URLSearchParams(e);return r.set(E,t.encode()),r.toString()})}},{key:"isEmpty",value:function(){return!1}},{key:"isMalformed",value:function(){return!this.isEmpty()&&!this.isValid()}},{key:"isValid",value:function(){return!0}},{key:"toAnalyticsAttributes",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.transformValue,n=void 0===r?function(e){return null===e?void 0:e}:r,i=t.hasGeneratedId;return b((e={},(0,a.A)(e,void 0!==i&&i?"originIdGenerated":"originId",n(this.id)),(0,a.A)(e,"originProduct",n(this.product)),e),O)}},{key:"validate",value:function(){if(!e.isValidId(this.id))throw TypeError("Invalid Origin id");if(!e.isValidProduct(this.product))throw TypeError("Missing/invalid Origin product")}}],[{key:"isValidId",value:function(e){return"string"==typeof e&&/^[-_a-zA-Z0-9]{1,36}$/.test(e)}},{key:"isValidProduct",value:function(e){return"string"==typeof e&&/^[-_a-zA-Z0-9]{1,20}$/.test(e)}},{key:"generateId",value:function(){return d()().replace(/-/g,"")}},{key:"createEmpty",value:function(){return new A}},{key:"createMalformed",value:function(){return new I}},{key:"fromUrl",value:function(t){var r=new(f()).URLSearchParams;return _(t,function(e){r=new(f()).URLSearchParams(e)}),e.fromEncoded(r.get(E))}},{key:"fromEncoded",value:function(t){if(!t)return e.createEmpty();try{return e.decode(t)}catch{return e.createMalformed()}}},{key:"removeFromUrl",value:function(e){return _(e,function(e){var t=new(f()).URLSearchParams(e);return t.delete(E),t.toString()})}},{key:"decode",value:function(t){var r,n,i,o=(i=function(e){if(null==e)return"";var t=String(e).replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return t+"===".slice(0,r)}(t),r=JSON.parse(f().atob(i)),n={},r.i&&(n.id=r.i),r.p&&(n.product=function(e){for(var t=Object.keys(m),r=0;r<t.length;r++){var n=t[r];if(e===m[n])return n}return e}(r.p)),n);return new e(o)}}]),e}(),A=function(e){(0,i.A)(r,e);var t=y(r);function r(){return(0,c.A)(this,r),t.call(this,{id:null,product:null,dangerouslySkipValidation:!0})}return(0,u.A)(r,[{key:"isValid",value:function(){return!1}},{key:"isEmpty",value:function(){return!0}},{key:"toAnalyticsAttributes",value:function(){return b({},O)}}]),r}(w),I=function(e){(0,i.A)(r,e);var t=y(r);function r(){return(0,c.A)(this,r),t.call(this,{id:null,product:null,dangerouslySkipValidation:!0})}return(0,u.A)(r,[{key:"isValid",value:function(){return!1}},{key:"isEmpty",value:function(){return!1}},{key:"toAnalyticsAttributes",value:function(){return b({originMalformed:!0},O)}}]),r}(w);function _(e,t){return String(e).replace(/(^[^?#]*)(?:\?)?([^#]*?)(#.*|$)$/,function(e,r,n,i){var o=t(n);return o&&(o="?".concat(o)),"".concat(r).concat(o).concat(i)})}},60994:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(20703);function i(e,t){if(e){if("string"==typeof e)return(0,n.A)(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.A)(e,t):void 0}}},61741:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(80916);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,n.A)(e,t)}},61781:(e,t,r)=>{"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}r.d(t,{A:()=>n})},63291:(e,t,r)=>{"use strict";function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{A:()=>n})},64761:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{A:()=>n})},66906:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(20703),i=r(60994);function o(e){return function(e){if(Array.isArray(e))return(0,n.A)(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.A)(e)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},67156:(e,t,r)=>{"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{A:()=>n})},68417:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(28973);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},71932:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{A:()=>n})},72772:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(64761),i=r(85640);function o(e){return function(e){if(Array.isArray(e))return(0,n.A)(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.A)(e)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},73800:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)})(e)}r.d(t,{A:()=>s});var o=r(599);function s(e,t){return t&&("object"===i(t)||"function"==typeof t)?t:(0,o.A)(e)}},74479:(e,t,r)=>{"use strict";r.d(t,{X:()=>f});var n=r(81523),i=r(57400),o=r(56700),s=r.n(o),a=r(57832),c=null,u=function(){},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return c||(c=new Promise(function(r,n){typeof window>"u"&&(t({message:"[SDKLoader]: window is undefined"}),n(Error("Failed to load CSM SDK: window is undefined"))),window.CSM&&(t({message:"[SDKLoader]: window.CSM already exists"}),r(window.CSM));var i=document.createElement("script");i.src=new URL("/csm/widget/script.js","https://".concat(e)).toString(),i.setAttribute("async",""),i.type="text/javascript",i.onerror=function(){n(Error("Failed to load CSM SDK script: onerror"))},i.onload=function(){t({message:"[SDKLoader]: script onload called"}),window.CSM?(t({message:"[SDKLoader]: CSM SDK found after script onload"}),r(window.CSM)):(t({message:"[SDKLoader]: CSM SDK not found after script onload"}),n(Error("Failed to load CSM SDK: window.CSM is undefined")))},t({message:"[SDKLoader]: CSM SDK appended to body"}),document.body.appendChild(i);var o=document.createElement("link"),s=/jira-dev\.com/.test(e)?"https://jcs-chat-widget.stg.atlassian.com":"https://jcs-chat-widget.atlassian.com";o.rel="preconnect",o.href=s,o.crossOrigin="anonymous",document.head.appendChild(o),t({message:"[SDKLoader]: CSM SDK preconnecting to ".concat(s)})})),c};function d(e){var t=(0,a.useRef)(e);return(0,a.useLayoutEffect)(function(){t.current=e}),(0,a.useCallback)(function(){for(var e=t.current,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e?.apply(void 0,n)},[])}var h=function(){},f=function(e){var t,r=e.settings,o=e.sdk,c=e.onChatStatus,u=e.onChatMessage,f=e.onHandoff,p=e.onError,m=e.onDebug,y=(0,a.useState)(r),g=(0,i.A)(y,1)[0],v=(0,a.useRef)(null),b=(0,a.useState)(null),E=(0,i.A)(b,2),O=E[0],w=E[1],A=(t=(0,a.useRef)(u),(0,a.useLayoutEffect)(function(){t.current=u}),t),I=d(c??h),_=d(f??h),S=d(p??h),P=d(m??h);return(0,a.useEffect)(function(){return P({message:"[ReactSDK]: mounted"}),function(){P({message:"[ReactSDK]: unmounted"})}},[P]),(0,a.useEffect)(function(){var e;(e=(0,n.A)(s().mark(function e(){var t,r,n,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P({message:"[ReactSDK]: loading CSM SDK"}),e.next=4,l(g.site,P);case 4:if(t=e.sent,v.current){e.next=8;break}throw P({message:"[ReactSDK]: embed target container ref not found"}),Error("Container element not found");case 8:P({message:"[ReactSDK]: creating CSM.embed instance"}),r=t.embed(v.current,g,{debug:function(e){P({message:e})}}),n=["before","started","aborted","completed","failed"],i=function(e){r.on("message:".concat(e),function(){for(var t,r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];null===(t=A.current)||void 0===t||null===(r=t[e])||void 0===r||r.call.apply(r,[t].concat(i))})},n.forEach(function(e){i(e)}),r.on("status",function(e){P({message:"[ReactSDK]: received status message ".concat(e.status)}),I(e.status)}),r.on("handoff",function(e){_(e)}),r.on("error",function(e){P({message:"[ReactSDK]: received error message"}),S(e)}),w(r),P({message:"[ReactSDK]: embed setup complete"}),e.next=24;break;case 20:var o;e.prev=20,e.t0=e.catch(0),P({message:"[ReactSDK]: error caught"}),S({message:"string"==typeof(o=e.t0)?o:o instanceof Error?o.message:"Unknown error"});case 24:case"end":return e.stop()}},e,null,[[0,20]])})),function(){return e.apply(this,arguments)})()},[g,A,I,_,S,P]),(0,a.useImperativeHandle)(o,function(){return O},[O]),a.createElement("div",{ref:v,style:{width:"100%",height:"100%"}})}},76147:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}r.d(t,{A:()=>n})},77290:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{A:()=>n})},78706:(e,t,r)=>{"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{A:()=>n})},78916:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(77290),i=r(63291);function o(e,t){if(t&&("object"==(0,n.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return(0,i.A)(e)}},79559:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(80916);function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,n.A)(e,t)}},79917:(e,t,r)=>{"use strict";function n(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)})}}r.d(t,{A:()=>i})},80635:(e,t,r)=>{"use strict";r.d(t,{A:()=>tr});var n=r(56808),i=r(57832),o=r(93240),s=r(93339),a=r(5443),c=r(72562),u=r(72745),l=r(2278),d=r(86882),h=r(917),f=r(47973),p=r(1644),m=r(78706),y=r(40365),g=r(72772),v=r(81523),b=r(56700),E=r.n(b),O=r(89314),w=function(){return"u">typeof window},A=function(e){return e[e.EXPERIENCE_PAYLOAD=0]="EXPERIENCE_PAYLOAD",e[e.SUBSCRIBE=1]="SUBSCRIBE",e[e.UNSUBSCRIBE=2]="UNSUBSCRIBE",e}({}),I=function(e){return e.VISIBLE="visible",e.HIDDEN="hidden",e.MIXED="mixed",e}({}),_=(function(e){e.fmp="fmp",e.tti="tti"}({}),function(e){e.fmp="fmp",e.tti="tti"}({}),function(e){e.response="response",e.result="result"}({}),"__SUBSCRIBE_ALL__"),S="inline-response",P=function(){if(!globalThis.__UFO_GLOBAL_EVENT_STREAM__){var e,t=(e=[],{__buffer_only__:!0,push:function(t){e.length<250&&e.push(t)},getStream:function(){return e}});globalThis.__UFO_GLOBAL_EVENT_STREAM__=t}return globalThis.__UFO_GLOBAL_EVENT_STREAM__},T=r(73030),D=function(){function e(){(0,f.A)(this,e),(0,a.A)(this,"enabled",!1)}return(0,h.A)(e,[{key:"log",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.enabled&&T.log.apply(T,[e.UFOprefix].concat(r))}},{key:"warn",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.enabled&&T.warn.apply(T,[e.UFOprefix].concat(r))}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}}])}();(0,a.A)(D,"UFOprefix","[ufo]");var C=new D,j=function(){C.log.apply(C,arguments)},k=function(){C.warn.apply(C,arguments)},R=new((0,h.A)(function e(){var t=this;(0,f.A)(this,e),(0,a.A)(this,"started",!1),(0,a.A)(this,"observers",[]),(0,a.A)(this,"broadcast",function(){t.observers.forEach(function(e){return e()}),t.observers=[]})},[{key:"start",value:function(){this.started||(this.started=!0,document.addEventListener("visibilitychange",this.broadcast),w()&&window.addEventListener("pagehide",this.broadcast))}},{key:"subscribe",value:function(e){this.observers.push(e)}},{key:"unsubscribe",value:function(e){this.observers=this.observers.filter(function(t){return t!==e})}}])),x={NOT_STARTED:{id:"NOT_STARTED",final:!0},STARTED:{id:"STARTED"},IN_PROGRESS:{id:"IN_PROGRESS"},BLOCKED:{id:"BLOCKED"},RECOVERED:{id:"RECOVERED"},SUCCEEDED:{id:"SUCCEEDED",final:!0,success:!0},SUCCEEDED_WAITING_FOR_DEPS:{id:"SUCCEEDED_WAITING_FOR_DEPS"},FAILED:{id:"FAILED",final:!0},ABORTED:{id:"ABORTED",final:!0}},M=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},x.NOT_STARTED.id,[x.STARTED.id]),x.STARTED.id,[x.IN_PROGRESS.id,x.BLOCKED.id,x.SUCCEEDED.id,x.SUCCEEDED_WAITING_FOR_DEPS.id,x.FAILED.id,x.ABORTED.id]),x.IN_PROGRESS.id,[x.BLOCKED.id,x.SUCCEEDED.id,x.SUCCEEDED_WAITING_FOR_DEPS.id,x.FAILED.id,x.ABORTED.id]),x.BLOCKED.id,[x.RECOVERED.id,x.ABORTED.id]),x.RECOVERED.id,[x.STARTED.id,x.SUCCEEDED.id,x.SUCCEEDED_WAITING_FOR_DEPS.id,x.FAILED.id,x.ABORTED.id]),x.SUCCEEDED.id,[x.STARTED.id]),x.SUCCEEDED_WAITING_FOR_DEPS.id,[x.SUCCEEDED.id,x.FAILED.id,x.ABORTED.id]),x.FAILED.id,[x.STARTED.id]),x.ABORTED.id,[x.STARTED.id]),N=function(e){return e.Load="load",e.Experience="experience",e.Operation="operation",e}({}),L=function(e){return e.PageLoad="page-load",e.PageSegmentLoad="page-segment-load",e.InlineResult="inline-result",e.Custom="custom",e}({});function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var B=function(){return w()&&window.document&&"visible"!==window.document.visibilityState?I.HIDDEN:I.VISIBLE},$=function(e){return void 0!==e?~~e:~~performance.now()};function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K=function(){return!!e})()}var V=function(e){function t(){var e,r;return(0,f.A)(this,t),e=t,r=arguments,e=(0,m.A)(e),(0,p.A)(this,K()?Reflect.construct(e,r||[],(0,m.A)(this).constructor):e.apply(this,r))}return(0,y.A)(t,e),(0,h.A)(t)}(function(){var e,t,r,n,i,o,s;return(0,h.A)(function e(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,f.A)(this,e),(0,a.A)(this,"state",x.NOT_STARTED),(0,a.A)(this,"instanceId",null),(0,a.A)(this,"parent",null),(0,a.A)(this,"category",null),(0,a.A)(this,"metadata",{}),(0,a.A)(this,"onDoneCallbacks",[]),(0,a.A)(this,"childExperiences",[]),(0,a.A)(this,"explicitTimings",{}),(0,a.A)(this,"isSSROutputAsFMP",!1),(0,a.A)(this,"uuid",null),(0,a.A)(this,"_until",null),(0,a.A)(this,"metrics",{startTime:null,endTime:null,marks:[]}),(0,a.A)(this,"performanceConfig",{}),(0,a.A)(this,"setPageVisibleStateToMixed",function(){n.pageVisibleState=I.MIXED,R.unsubscribe(n.setPageVisibleStateToMixed)}),this.id=t,this.category=r?.category||null,this.until=r?.until||null,this.instanceId=i,this.handleDoneBind=this._handleDoneExperience.bind(this),this.type=r.type,this.performanceType=r.performanceType,this.performanceConfig=r.performanceConfig||{},this.config=r,this.pageVisibleState=B(),this.featureFlags=r.featureFlags||[],this.timings=r.timings||[],(r.performanceType===L.PageLoad||r.performanceType===L.PageSegmentLoad)&&(this.isSSROutputAsFMP=r.isSSROutputAsFMP||!1)},[{key:"transition",value:(e=(0,v.A)(E().mark(function e(t,r){var n;return E().wrap(function(e){for(var i,o;;)switch(e.prev=e.next){case 0:if(j("async transition",this.id,this.state.id,t.id),!(M[(i=this.state).id]&&M[i.id].includes(t.id))){e.next=15;break}if(j("TRANSITION: ".concat(this.id," from ").concat(this.state.id," to ").concat(t.id," successful"),this.state.final,!t.final),t===x.STARTED&&this._reset(),this.state.final&&!t.final&&(this.metrics.startTime=$(r),this.uuid=(0,O.v4)()),this.state=t,!t.final){e.next=14;break}return this.metrics.endTime=$(r),this._isManualStateEnabled()||P().push((o=this.handleDoneBind,{type:A.UNSUBSCRIBE,payload:{experienceId:_,callback:o}})),e.next=11,this.exportData();case 11:n=e.sent,j("this.parent",this.parent),P().push({type:A.EXPERIENCE_PAYLOAD,payload:n});case 14:return e.abrupt("return",!0);case 15:return j("TRANSITION: ".concat(this.id," from ").concat(this.state.id," to ").concat(t.id," unsuccessful")),k("transition of ".concat(this.id," from ").concat(this.state," to ").concat(t," is not possible")),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})},{key:"start",value:(t=(0,v.A)(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transition(x.STARTED,t);case 2:var r;e.sent&&(this.pageVisibleState=B(),R.subscribe(this.setPageVisibleStateToMixed),this._isManualStateEnabled()||(j("subscribed",this.id),P().push((r=this.handleDoneBind,{type:A.SUBSCRIBE,payload:{experienceId:_,callback:r}}))));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"mark",value:function(e,t){"fmp"!==e&&e!==S?this._mark(e,t):k("please use markFMP or markInlineResponse for specialised marks")}},{key:"_mark",value:function(e,t){this.metrics.marks.push({name:e,time:$(t)}),this.transition(x.IN_PROGRESS)}},{key:"markFMP",value:function(e){this._mark("fmp",e)}},{key:"markInlineResponse",value:function(e){this._mark(S,e)}},{key:"_isManualStateEnabled",value:function(){return null===this.until}},{key:"_validateManualState",value:function(){return!!this._isManualStateEnabled()||(k('manual change of state not allowed as "until" is defined'),!1)}},{key:"switchToEndState",value:function(e,t){return null!=t&&t.force||this._validateManualState()?(null!=t&&t.metadata&&this.addMetadata(t.metadata),R.unsubscribe(this.setPageVisibleStateToMixed),this.transition(e)):null}},{key:"success",value:(r=(0,v.A)(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.switchToEndState(x.SUCCEEDED,t));case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"failure",value:(n=(0,v.A)(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.switchToEndState(x.FAILED,t));case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"abort",value:(i=(0,v.A)(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.switchToEndState(x.ABORTED,t));case 1:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"addMetadata",value:function(e){Object.assign(this.metadata,e)}},{key:"_handleDoneExperience",value:function(e){if(j("_handleDoneExperience in",this.id,e.state,e,this._until),e.state.final&&null!==this._until){var t=this._until(e),r=t.done,n=t.state;r&&!this.state.final&&this.transition(n)}}},{key:"getId",value:(o=(0,v.A)(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.id);case 1:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"exportData",value:(s=(0,v.A)(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getId();case 2:return e.t0=e.sent,e.t1=this.uuid,e.t2=this.type,e.t3="0.1.5",e.t4=this.performanceType,e.t5=this.category,e.t6=this.state,e.t7=U({},this.metadata),e.t8=U({},this.metrics),e.t9=(0,g.A)(this.childExperiences),e.t10={success:!!this.state.success,startTime:this.metrics.startTime,duration:(this.metrics.endTime||0)-(this.metrics.startTime||0)},e.t11=this.config.platform||null,e.t12=this.pageVisibleState,e.t13=this.featureFlags,e.t14=this.isSSROutputAsFMP,e.t15=this.timings,e.t16=this.explicitTimings,e.t17=this.performanceConfig,e.abrupt("return",{id:e.t0,uuid:e.t1,type:e.t2,schemaVersion:e.t3,performanceType:e.t4,category:e.t5,state:e.t6,metadata:e.t7,metrics:e.t8,children:e.t9,result:e.t10,platform:e.t11,pageVisibleState:e.t12,featureFlags:e.t13,isSSROutputAsFMP:e.t14,timings:e.t15,explicitTimings:e.t16,performanceConfig:e.t17});case 21:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"_reset",value:function(){this.parent=null,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.metrics={startTime:null,endTime:null,marks:[]},this._until=this.until?this.until():null}}])}()),G={PLACEMENT:"post-office-placement",MESSAGE:"post-office-message"},H="post-office";function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Q(e,t){var r="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e,t){var r="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}(0,h.A)(function e(t){var r=this;(0,f.A)(this,e),(0,a.A)(this,"metadata",{}),(0,a.A)(this,"markSuccess",function(){var e,t=Q(r.experiences);try{for(t.s();!(e=t.n()).done;)e.value.success({metadata:r.metadata})}catch(e){t.e(e)}finally{t.f()}}),(0,a.A)(this,"markFailure",function(e){var t,n=Q(r.experiences);try{for(n.s();!(t=n.n()).done;)t.value.failure({metadata:q(q({},r.metadata),{},{error:JSON.stringify(e)})})}catch(e){n.e(e)}finally{n.f()}}),(0,a.A)(this,"abort",function(){var e,t=Q(r.experiences);try{for(t.s();!(e=t.n()).done;)e.value.abort({metadata:r.metadata})}catch(e){t.e(e)}finally{t.f()}}),this.aggregatedExperience=new V(G.MESSAGE,{performanceType:L.PageSegmentLoad,type:N.Load,platform:{component:H}}),this.messageSpecificExperience=new V("".concat(G.MESSAGE,".").concat(t),{performanceType:L.PageSegmentLoad,type:N.Load,platform:{component:H}}),this.experiences=[this.aggregatedExperience,this.messageSpecificExperience],this.experiences.forEach(function(e){return e.start()}),this.metadata={messageTemplateId:t}});var ee={RML_FETCH:"rml-fetch",RML_RENDER:"rml-render",INITIAL_DATA:"initial-data-load",COMPONENT_READY:"component-ready"},et={performanceType:L.PageSegmentLoad,type:N.Load,platform:{component:H},timings:[{key:"".concat(ee.RML_FETCH,"-complete"),endMark:"".concat(ee.RML_FETCH,"-complete")},{key:"".concat(ee.RML_RENDER,"-complete"),endMark:"".concat(ee.RML_RENDER,"-complete")},{key:"".concat(ee.INITIAL_DATA,"-complete"),endMark:"".concat(ee.INITIAL_DATA,"-complete")},{key:"".concat(ee.INITIAL_DATA,"-error"),endMark:"".concat(ee.INITIAL_DATA,"-error")}]},er={PlacementPerformanceTracker:(0,h.A)(function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"remote";(0,f.A)(this,e),(0,a.A)(this,"placementExperiences",[]),(0,a.A)(this,"metadata",{}),(0,a.A)(this,"markFetchComplete",function(){var e,t=z(r.placementExperiences);try{for(t.s();!(e=t.n()).done;)e.value.mark("".concat(ee.RML_FETCH,"-complete"))}catch(e){t.e(e)}finally{t.f()}}),(0,a.A)(this,"markRenderComplete",function(){var e,t=z(r.placementExperiences);try{for(t.s();!(e=t.n()).done;)e.value.mark("".concat(ee.RML_RENDER,"-complete"))}catch(e){t.e(e)}finally{t.f()}}),(0,a.A)(this,"markInitialDataComplete",function(){var e,t=z(r.placementExperiences);try{for(t.s();!(e=t.n()).done;)e.value.mark("".concat(ee.INITIAL_DATA,"-complete"))}catch(e){t.e(e)}finally{t.f()}}),(0,a.A)(this,"markComponentReady",function(){var e,t=z(r.placementExperiences);try{for(t.s();!(e=t.n()).done;)e.value.success({metadata:r.metadata})}catch(e){t.e(e)}finally{t.f()}}),(0,a.A)(this,"markFetchFailure",function(e){var t,n=z(r.placementExperiences);try{for(n.s();!(t=n.n()).done;)t.value.failure({metadata:X(X({},r.metadata),{},{failedDuring:ee.RML_FETCH,error:JSON.stringify(e)})})}catch(e){n.e(e)}finally{n.f()}}),(0,a.A)(this,"markRenderFailure",function(e){var t,n=z(r.placementExperiences);try{for(n.s();!(t=n.n()).done;)t.value.failure({metadata:X(X({},r.metadata),{},{failedDuring:ee.RML_RENDER,error:JSON.stringify(e)})})}catch(e){n.e(e)}finally{n.f()}}),(0,a.A)(this,"markInitialDataFailure",function(e){var t,n=z(r.placementExperiences);try{for(n.s();!(t=n.n()).done;)t.value.mark("".concat(ee.INITIAL_DATA,"-error"))}catch(e){n.e(e)}finally{n.f()}}),(0,a.A)(this,"markComponentFailure",function(e){var t,n=z(r.placementExperiences);try{for(n.s();!(t=n.n()).done;)t.value.failure({metadata:X(X({},r.metadata),{},{failedDuring:ee.COMPONENT_READY,error:JSON.stringify(e)})})}catch(e){n.e(e)}finally{n.f()}}),(0,a.A)(this,"markComponentAborted",function(){var e,t=z(r.placementExperiences);try{for(t.s();!(e=t.n()).done;)e.value.abort({metadata:r.metadata})}catch(e){t.e(e)}finally{t.f()}}),this.aggregatedExperience=new V(G.PLACEMENT,et),this.placementSpecificExperience=new V("".concat(G.PLACEMENT,".").concat(t),et),this.placementExperiences=[this.aggregatedExperience,this.placementSpecificExperience];var i,o=z(this.placementExperiences);try{for(o.s();!(i=o.n()).done;)i.value.start()}catch(e){o.e(e)}finally{o.f()}this.metadata={placementId:t,consumptionType:n}})},en=r(527),ei=r(78150),eo={SegmentNames:{REMOTE_PLACEMENT:"post-office-remote-loaded-placement",PLACEMENT:"post-office-placement",MESSAGE:"post-office-message"},HoldNames:{REMOTE_PLACEMENT:"post-office-remote-loaded-placement-loading",PLACEMENT:"post-office-placement-loading",MESSAGE:"post-office-message-loading"},UFOLoadHold:en.A,UFOSegment:ei.A},es=(0,i.createContext)({fetch:function(){return globalThis.fetch.apply(globalThis,arguments)}}),ea=r(57400);function ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eu=function(e,t){return fetch(e,{headers:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({credentials:"include",mode:"cors","Content-Type":"application/json"},t)})},el=function(){var e=(0,v.A)(E().mark(function e(t,r){var n,i,o,s,a,c,u,l=arguments;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:eu,o=(i=l.length>3?l[3]:void 0).baseUrl,s=i.path,a=o?new URL(s,o).toString():s,(c=new URLSearchParams(Object.fromEntries(Object.entries(r).filter(function(e){var t=(0,ea.A)(e,2)[1];return"u">typeof t&&null!==t}).map(function(e){var t=(0,ea.A)(e,2);return[t[0],String(t[1])]})))).sort(),u=encodeURI("".concat(a).concat(t,"?").concat(c.toString())),e.abrupt("return",n(u));case 10:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),ed=r(51277),eh=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.vL.envConfigs;return{baseUrl:r[e].api.origin,path:null!==(t=r[e].api.pathname)&&void 0!==t?t:ed.Hp}},ef=function(){var e=(0,o.tv)();return(0,i.useMemo)(function(){return eh(e.currentEnv,e.envConfigs)},[e.currentEnv,e.envConfigs])};function ep(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ep(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ey=function(e,t,r,n,o){var s=(0,i.useContext)(es);return(0,i.useMemo)(function(){return o?void 0:el(e,t,s.fetch,{baseUrl:r,path:n})},[o,r,n,e,t,s.fetch])};let eg=function(e){var t=e.placementId,r=e.consumptionType,n=e.onEvent,o=e.disableInitialData,a=e.children,h=u.Ay.checkGate("enable_ufo_tracking_in_post_office"),f=(0,l.lh)(),p=(0,d.ho)(),m=ef(),y=m.baseUrl,g=m.path,v=(0,s.g)(em(em({},p),{},{postOfficeRoute:f})),b=(0,i.useMemo)(function(){return h?new er.PlacementPerformanceTracker(t,r):void 0},[h,t,r]),E=(0,i.useCallback)(function(e){var t=e.type,r=e.error;switch(n?.({type:t,error:r}),t){case"fetch-complete":b?.markFetchComplete();break;case"fetch-error":b?.markFetchFailure(r);break;case"render-complete":b?.markRenderComplete();break;case"render-error":b?.markRenderFailure(r);break;case"initial-data-complete":b?.markInitialDataComplete();break;case"initial-data-error":b?.markInitialDataFailure(r);break;case"component-error":b?.markComponentFailure(r);break;case"component-ready":b?.markComponentReady();break;case"unmount":b?.markComponentAborted()}},[n,b]),O=ey(t,p,y,g,void 0!==o&&o),w=(0,i.useMemo)(function(){return{source:"post-office-frontend",componentName:"Placement",attributes:{placementId:t,channel:"in-app"}}},[t]);return i.createElement(ev,{placementId:t,isEnabled:h},i.createElement(c.G4,{data:w},a({initialData:O,context:v,onEvent:E})))};var ev=function(e){var t=e.isEnabled,r=e.placementId,n=e.children;return t?i.createElement(eo.UFOSegment,{name:eo.SegmentNames.PLACEMENT},i.createElement(eo.UFOSegment,{name:"".concat(eo.SegmentNames.PLACEMENT,".").concat(r)},n)):i.createElement(i.Fragment,null,n)},eb=r(47157),eE=r(31171),eO=r(42139);function ew(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ew=function(){return!!e})()}var eA=function(e){function t(e){var r,n,i;return(0,f.A)(this,t),n=t,i=[e],n=(0,m.A)(n),(r=(0,p.A)(this,ew()?Reflect.construct(n,i||[],(0,m.A)(this).constructor):n.apply(this,i))).state={hasError:!1},r}return(0,y.A)(t,e),(0,h.A)(t,[{key:"componentDidCatch",value:function(e,t){this.props.createAnalyticsEvent({action:"handled",actionSubject:"error",actionSubjectId:"remoteModuleErrorBoundary",attributes:{error:e?.message,errorInfo:t,dimensions:this.props.remotePlugin.dimensions,plugin:this.props.remotePlugin.constructor.name}}).fire(this.props.analyticsChannel),this.props.onError&&this.props.onError(e,t),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?this.props.fallback?i.createElement(i.Fragment,null,this.props.fallback):null:this.props.children}}])}(i.Component);let eI=(0,eO.A)()(eA);var e_=function(){var e=(0,v.A)(E().mark(function e(t){var r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,System.import(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),eS=function(){},eP={},eT=r(93928),eD=function(e){return e.React="react",e.ReactDOM="react-dom",e.ReactIntlNext="react-intl-next",e.EmotionReact="@emotion/react",e.FeatureGateJsClientPublic="@atlaskit/feature-gate-js-client",e.AnalyticsContext="@atlaskit/analytics-next-stable-react-context",e}({}),eC=function(e){return e.AppSwitcher="app-switcher",e.PostOffice="post-office",e}({}),ej=["latest","stable"];eD.React,eD.ReactDOM,eD.ReactIntlNext,eD.EmotionReact;var ek=r(51088);let eR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e+JSON.stringify(t.sort(function(e,t){return(e.name+e.version).localeCompare(t.name+t.version)}));return(0,ek.t)(r)};var ex=r(73030);function eM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eL=function(e){try{switch(e){case eD.React:return{isDefault:!0,import:r(57832)};case eD.ReactDOM:return{isDefault:!0,import:r(9133)};case eD.ReactIntlNext:return{isDefault:!0,import:r(37787)};case eD.EmotionReact:return{isDefault:!1,import:r(95214)};case eD.FeatureGateJsClientPublic:return{isDefault:!1,import:r(1336)};case eD.AnalyticsContext:return{isDefault:!0,import:r(69977)};default:return}}catch{ex.error("Module [".concat(e,"] is possibly not installed."));return}},eF=function(e){if("module"in e)return e;var t={module:e.name,import:void 0,isDefault:!1};if(!Object.values(eD).find(function(t){return t===e.name}))return ex.error("Excluded system module [".concat(e.name,"] must be setup inside '/remote-setup/config.ts'. Modules cannot be excluded and required dynamically.")),t;var r=eL(e.name);return r?eN({module:e.name},r):t},eU=function(e){try{var t=e.map(function(e){return e.import&&(0,a.A)({},e.module,e.scopedModuleId)});return Object.assign.apply(Object,[{}].concat((0,g.A)(t)))}catch(e){return ex.error("Could not set scoped modules with error message: ".concat(e)),null}},eB=r(73030);r(75890);var e$=function(e,t){if(!e||0===e.length)return eB.error("No modules found to set in System registry"),null;var r=e.map(eF).map(function(e){return e.isDefault?{module:e.module,import:eN(eN({},e.import),{},{default:e.import,__useDefault:!0}),scopedModuleId:"".concat(t,":").concat(e.module)}:{module:e.module,import:e.import,scopedModuleId:"".concat(t,":").concat(e.module)}});return r.forEach(function(e){if(!e.import){eB.error("Unable to set import for module [".concat(e.module,"]. Please ensure it has been installed and is available."));return}System.set(e.scopedModuleId,e.import)}),eU(r)},eK=function(e,t){var r=eG(e)?".".concat(eV(e)):"";return new V(t,{type:N.Load,performanceType:L.Custom,platform:{component:"remote-module-loader".concat(r)}})},eV=function(e){return e.replace(/\//g,"-").replace(/[^a-zA-Z0-9-.]/g,"")},eG=function(e){return""!==e&&"@atlassian/app-switcher-remote-module"!==e},eH=r(73030);function eW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eq=function(e){return e?.moduleUri!==void 0},eQ=function(){var e;return(0,h.A)(function e(t){(0,f.A)(this,e),(0,a.A)(this,"resolvedModuleMap",new Map),(0,a.A)(this,"storageClient",new eT.A("remote-module-loader-bifrost-override",{storageEngine:"sessionStorage"})),this.plugin=t,this.importMap=this.findPluginManifest(t),this.setImportMaps([this.importMap]),this.renderUfoExperience=eK(this.getModuleName(),"render")},[{key:"findPluginManifest",value:function(e){if(e){var t=e.manifestMap,r=e.dimensions,n=t.get(r.env);if(n){if(eq(n))return n;var i=ej.indexOf(r.variant);if(i>-1){for(var o=i;o<ej.length;o++){var s=n.get(ej[o]);if(eq(s))return this.variant=ej[o],s}throw Error('No valid "variant" dimensions defined in plugin for ['.concat(r.variant,"]."))}throw Error('Invalid "variant" dimension defined in plugin for ['.concat(r.variant,"]."))}throw Error('No "env" dimension defined in plugin for ['.concat(r.env,"]."))}throw Error('Invalid "plugin" provided to SDK.')}},{key:"getModuleName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.importMap;return e?e.moduleName:""}},{key:"loadFromQueryAndSaveToSession",value:function(e){try{var t=new URLSearchParams(window.location.search);if(t.has("".concat(e,"-clear"))){this.storageClient.removeItem(e);return}if(!t.has(e))return this.storageClient.getItem(e)||void 0;var r=t.get(e);return this.storageClient.setItemWithExpiry(e,r,108e5),r}catch(e){eH.error("Error loading value from query or sessionStorage: ".concat(e));return}}},{key:"addBifrostOverride",value:function(e){try{if(!(null!==(t=this.plugin)&&void 0!==t&&t.bifrostOverrideKey))return e;var t,r,n=this.loadFromQueryAndSaveToSession(null===(r=this.plugin)||void 0===r?void 0:r.bifrostOverrideKey);if(!n)return e;var i=new URL(e);if("https:"===i.protocol||"http:"===i.protocol){var o=new URLSearchParams(i.search);o.set("bifrost-override",n),i.search=o.toString()}return i.toString()}catch{return eH.error("Error adding bifrost override to url. Falling back to original url."),e}}},{key:"getModuleUri",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.importMap;if(e){var t,r,n=e.moduleUri;return null!==(t=this.plugin)&&void 0!==t&&t.moduleUriMapper&&(n=this.plugin.moduleUriMapper(e.moduleUri,this.variant,eR)),null!==(r=this.plugin)&&void 0!==r&&r.bifrostOverrideKey&&(n=this.addBifrostOverride(n)),n}return""}},{key:"getResolvedModule",value:function(){return this.resolvedModuleMap.get(this.getModuleName())}},{key:"isModuleRegisteredAndValid",value:function(){return System.has(this.getModuleUri())&&!!System.get(this.getModuleUri())&&!!this.getResolvedModule()}},{key:"setImportMaps",value:function(e){var t,r=this,n=null;try{n=e$(e.flatMap(function(e){return e.externals}),(null===(t=this.plugin)||void 0===t?void 0:t.name)||eC.AppSwitcher)}catch(e){eH.error(e)}System.addImportMap(e.reduce(function(e,t){var i=r.getModuleUri(t);if(e.imports[t.moduleName]=i,n&&t.externals.length){e.scopes[i]={};var o,s=function(e,t){var r="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return eW(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eW(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}(t.externals);try{for(s.s();!(o=s.n()).done;){var a=o.value,c="name"in a?a.name:a.module;e.scopes[i][c]=n[c]}}catch(e){s.e(e)}finally{s.f()}}return e},{imports:{},scopes:{}}))}},{key:"fetchModule",value:(e=(0,v.A)(E().mark(function e(){var t,r;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.importMap){e.next=7;break}return t=this.importMap.moduleName,e.next=4,e_(t);case 4:return r=e.sent,this.resolvedModuleMap.set(t,r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"resolveExport",value:function(e){var t=this.getResolvedModule();if(t)return e?t[e]:t}},{key:"renderComponent",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:eS,c=this.resolveExport(t);return c?(e=i.isValidElement(c)?r?i.cloneElement(c,r,o):c:i.createElement(c,r,o),a({type:"render-complete"}),s?.success({metadata:{moduleName:this.getModuleName()}}),e):n}}])}();let eJ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eP,r=(0,i.useState)({status:e.isModuleRegisteredAndValid()?"done":"initial"}),n=(0,ea.A)(r,2),o=n[0],s=n[1],a=o.status,c=o.error,u=t.onError,l=t.onEvent,d=e.getModuleName(),h=(0,i.useMemo)(function(){return eK(d,"fetch")},[d]);return(0,i.useEffect)(function(){return function(){h.abort({metadata:{moduleName:d}})}},[h,d]),(0,i.useEffect)(function(){"error"===a&&"function"==typeof u&&u(c)},[c,a,u]),(0,i.useEffect)(function(){"initial"===a&&(h.start(),s({status:"loading"}),e.fetchModule().then(function(){l?.({type:"fetch-complete"}),h.success({metadata:{moduleName:d}}),s({status:"done"})}).catch(function(e){l?.({type:"fetch-error"}),h.failure({metadata:{error:e,moduleName:d}}),s({error:e,status:"error"})}))},[a,e,u,h,d,l]),o};function eY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eY(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ez=new WeakMap,eZ=function(e){var t=ez.get(e);if(t)return t;var r=new eQ(e);return ez.set(e,r),r};let e0=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eP,r=eZ(e),n=r.renderUfoExperience,o=r.getModuleName();(0,i.useEffect)(function(){"NOT_STARTED"===n.state.id&&n.start()},[n]);var s=(0,eE.X)().createAnalyticsEvent;return(0,i.useEffect)(function(){s({action:"rendered",actionSubject:"remoteModule",actionSubjectId:"useRemoteModule",attributes:{dimensions:e.dimensions,plugin:e.constructor.name}}).fire(t?.analyticsChannel)},[s,e,t.analyticsChannel]),eJ(r,(0,i.useMemo)(function(){return eX(eX({},t),{},{onError:function(e){var r;n.failure({metadata:{moduleName:o}}),null==t||null===(r=t.onError)||void 0===r||r.call(t,e)}})},[n,o,t])),r};var e1=["analyticsChannel","remotePlugin","exportName","children","Fallback"],e2=["analyticsChannel","remotePlugin","ErrorFallback","onEvent"],e3=function(e){var t=e.analyticsChannel,r=e.remotePlugin,n=e.exportName,o=void 0===n?"default":n,s=e.children,a=void 0===s?null:s,c=e.Fallback,u=void 0===c?null:c,l=(0,eb.A)(e,e1),d=(0,i.useState)(),h=(0,ea.A)(d,2)[1],f=(0,eE.X)().createAnalyticsEvent;(0,i.useEffect)(function(){f({action:"rendered",actionSubject:"remoteModule",actionSubjectId:"remoteComponent",attributes:{exportName:o,dimensions:r.dimensions,plugin:r.constructor.name}}).fire(t)},[t,f,o,r]);var p=e0(r,{analyticsChannel:t,onError:(0,i.useCallback)(function(e){h(function(){throw e})},[]),onEvent:l.onEvent});return(0,i.useEffect)(function(){return function(){p.renderUfoExperience.abort({metadata:{moduleName:p.getModuleName()}})}},[p]),i.createElement(i.Fragment,null,p.renderComponent(o,l,u,a,p.renderUfoExperience,l.onEvent))};let e4=(0,i.memo)(function(e){var t=e.analyticsChannel,r=e.remotePlugin,o=e.ErrorFallback,s=e.onEvent,a=void 0===s?eS:s,c=(0,eb.A)(e,e2);(0,i.useEffect)(function(){return function(){a({type:"unmount"})}},[a]);var u=(0,i.useCallback)(function(e){a({error:e,type:"render-error"})},[a]);return i.createElement(eI,{analyticsChannel:t,remotePlugin:r,onError:u,fallback:void 0===o?null:o},i.createElement(e3,(0,n.A)({analyticsChannel:t,remotePlugin:r,onEvent:a},c)))});var e7=r(90140),e5="latest",e6=(0,h.A)(function e(t,r){(0,f.A)(this,e),(0,a.A)(this,"name",eC.PostOffice),(0,a.A)(this,"moduleUriMapper",(0,e7.A)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e5,r=arguments.length>2?arguments[2]:void 0,n=i.version.split(".")[0],o=r(t,["react","react-dom"].reduce(function(e,t){return e.concat([{name:t,version:n}])},[]));return"".concat(e,".").concat(o,".js")})),this.placementId=t;var n=r.currentEnv,o=r.envConfigs,s="".concat(e9,"/").concat(t);this._dimensions={env:({"test-server":"test-server",local:"local",test:"test",dev:"local",staging:"staging",production:"production","stg-fedm-east":"staging","prod-fedm-east":"production"})[n],variant:e5},this._manifestMap=new Map([["local",new Map([[e5,{moduleName:s,moduleUri:"".concat(o.local.remoteModule.origin,"/").concat(t),externals:e8}]])],["test",new Map([[e5,{moduleName:s,moduleUri:"".concat(o.test.remoteModule.origin,"/").concat(t),externals:e8}]])],["staging",new Map([[e5,{moduleName:s,moduleUri:"".concat(o.staging.remoteModule.origin,"/").concat(t),externals:e8}]])],["test-server",new Map([[e5,{moduleName:s,moduleUri:"".concat(o["test-server"].remoteModule.origin,"/").concat(t),externals:e8}]])],["production",new Map([[e5,{moduleName:s,moduleUri:"".concat(o.production.remoteModule.origin,"/").concat(t),externals:e8}]])]])},[{key:"dimensions",get:function(){return this._dimensions}},{key:"manifestMap",get:function(){return this._manifestMap}},{key:"bifrostOverrideKey",get:function(){return"".concat(this.placementId,"-bifrost-override")}}]),e9="@atlassian/post-office-placement-remote",e8=[{name:eD.React},{name:eD.ReactDOM},{name:eD.ReactIntlNext},{name:eD.EmotionReact},{name:eD.FeatureGateJsClientPublic},{name:eD.AnalyticsContext},{module:"@atlassiansox/cross-flow-support",import:r(41221),isDefault:!1},{module:"@atlaskit/react-ufo",import:r(16341),isDefault:!0}],te=function(){function e(){(0,f.A)(this,e),(0,a.A)(this,"registry",new Map)}return(0,h.A)(e,[{key:"getPluginForPlacement",value:function(e,t){var r="".concat(e,"--").concat(t.currentEnv),n=this.registry.get(r);if(n)return n;var i=new e6(e,t);return this.registry.set(r,i),i}}],[{key:"getRegistry",value:function(){return void 0===window.postOfficePluginRegistry&&(window.postOfficePluginRegistry=new e),window.postOfficePluginRegistry}}])}(),tt={};let tr=function(e){var t=e.placementId,r=e.placementProps,a=e.children,c=e.ErrorFallback,u=e.Fallback,l=e.onEvent,d=(0,o.tv)(),h=te.getRegistry().getPluginForPlacement(t,d),f=(0,s.g)(r??tt);return i.createElement(eg,{placementId:t,consumptionType:"remote",onEvent:l},function(e){var t=e.initialData,r=e.onEvent,o=e.context;return i.createElement(e4,(0,n.A)({analyticsChannel:"postOffice",remotePlugin:h,onEvent:r,ErrorFallback:c,Fallback:u,initialData:t,context:o},f),a)})}},80916:(e,t,r)=>{"use strict";function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,{A:()=>n})},81523:(e,t,r)=>{"use strict";function n(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)})}}r.d(t,{A:()=>i})},81604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bind=void 0,t.bind=function(e,t){var r=t.type,n=t.listener,i=t.options;return e.addEventListener(r,n,i),function(){e.removeEventListener(r,n,i)}}},81617:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:()=>n})},84347:(e,t,r)=>{"use strict";r.d(t,{s:()=>y});var n=class extends Error{};function i(e){if("cloud"!==e&&"third-party"!==e)throw new n(`Identifier must have a qualifier of 'cloud' or 'third-party'. Received: ${e}`)}function o(e){if("ati"!==e)throw new n(`ATI must have a qualifier of 'ati'. Received: ${e}`)}var s=class{static getIdentifierSegments(e,t){let r=e.split(":");if(r.length<t)throw new n(`Input string must have ${t} segments.`);return r.length>t?[...r.slice(0,4),r.slice(4,r.length).join(":")]:r}};function a(e,t){if(t&&e!==t)throw new n(`Invalid resource owner - ${e}, expected ${t}.`)}function c(e,t){if(t&&e!==t)throw new n(`Invalid resource type - ${e}, expected ${t}.`)}var u=class extends s{static fromString(e,t){let[r,n,i,o,s]=this.getIdentifierSegments(e,5),[a,...c]=s.split("/"),u={qualifier:r,platformQualifier:n,cloudId:o,resourceOwner:i,resourceType:a,resourceId:c.join("/"),resourceIdSegmentValues:null!=t&&t.resourceIdSlug?this.ariSegmentValuesFromSlug(t.resourceIdSlug,c.join("/"),Object.keys(t.resourceIdSegmentFormats)):{}};return this.fromOpts(u,t)}static fromOpts(e,t){let{qualifier:r="ari",platformQualifier:o="cloud",resourceOwner:s,cloudId:u,resourceId:l,resourceIdSegmentValues:d,resourceType:h}=e;return function(e){if("ari"!==e)throw new n(`ARI must have a qualifier of 'ari'. Received: ${e}`)}(r),i(o),function(e,t=RegExp("^[a-zA-Z0-9_\\-.]{0,255}$")){if(!e.match(t))throw new n(`Invalid cloud ID, expected ID of format ${t}.`)}(e.cloudId||"",null==t?void 0:t.cloudId),a(s,null==t?void 0:t.resourceOwner),c(h,null==t?void 0:t.resourceType),function(e,t){Object.entries(e).forEach(([e,r])=>{!function(e,t=RegExp("[!a-zA-Z0-9\\-_.~@:;{}=]+(/[!a-zA-Z0-9\\-_.~@:;{}=]+)*"),r="resourceId"){let i=RegExp(`^${t.source}$`);if(!e.match(i))throw new n(`Invalid ${r} - ${e}, expected ID of format ${i}.`)}(r,null==t?void 0:t[e],e)})}(d,null==t?void 0:t.resourceIdSegmentFormats),{qualifier:r,resourceOwner:s,resourceType:h,platformQualifier:o,cloudId:u,resourceId:l,resourceIdSegmentValues:d}}static ariSegmentValuesFromSlug(e,t,r){let i=RegExp("^"+e.replace(/\{(.*?)\}/g,"(?<$1>.*?)")+"$").exec(t);if(!i)throw new n(`Segment '${t}' don't match expected slug: ${e}`);return r.forEach(t=>{var r;if(!(null!=(r=i.groups)&&r[t]))throw new n(`No value supplied for '${t}' based on slug ${e}`)}),i.groups||{}}},l=class extends s{static fromString(e,t){let[r="ati",n="cloud",s,u]=this.getIdentifierSegments(e,4);return o(r),i(n),a(s,null==t?void 0:t.resourceOwner),c(u,null==t?void 0:t.resourceType),{platformQualifier:n,resourceOwner:s,resourceType:u}}static fromOpts(e,t){let{qualifier:r,platformQualifier:n,resourceOwner:s,resourceType:u}=e;return o(r),i(n),a(s,null==t?void 0:t.resourceOwner),c(u,null==t?void 0:t.resourceType),{platformQualifier:n,resourceOwner:s,resourceType:u}}},d=class e{constructor(e,t,r){this._platformQualifier=e,this._resourceOwner=t,this._resourceType=r}get platformQualifier(){return this._platformQualifier}get resourceOwner(){return this._resourceOwner}get resourceType(){return this._resourceType}static create(t){return new e(t.platformQualifier||"cloud",t.resourceOwner,t.resourceType)}static parse(t,r){let n=l.fromString(t,r);return new e(n.platformQualifier,n.resourceOwner,n.resourceType)}toString(){return`ati:${this.platformQualifier}:${this.resourceOwner}:${this.resourceType}`}toJSON(){return this.toString()}toOpts(){return{platformQualifier:this._platformQualifier,resourceOwner:this._resourceOwner,resourceType:this._resourceType}}},h=class{constructor(e){this._ati=d.create({platformQualifier:e.platformQualifier||"cloud",resourceOwner:e.resourceOwner,resourceType:e.resourceType}),this._cloudId=""!==e.cloudId?e.cloudId:void 0,this._resourceId=e.resourceId}get platformQualifier(){return this._ati.platformQualifier}get cloudId(){return this._cloudId}get resourceOwner(){return this._ati.resourceOwner}get resourceType(){return this._ati.resourceType}get resourceId(){return this._resourceId}get ati(){return this._ati}equals(e){return this.toString()===e.toString()}toString(){return`ari:${this.platformQualifier}:${this.resourceOwner}:${this.cloudId||""}:${this.resourceType}/${this.resourceId}`}toJSON(){return this.toString()}toOpts(){return{platformQualifier:this.platformQualifier,resourceOwner:this.resourceOwner,cloudId:this.cloudId,resourceType:this.resourceType,resourceId:this.resourceId}}},f=class e extends h{constructor(e){super(e)}static create(t,r){let n={...t,resourceIdSegmentValues:{}},i=u.fromOpts(n,r);return new e(i)}static parse(t,r){let n=u.fromString(t,r);return new e(n)}static check(t){try{return e.parse(t.toString()),!0}catch(e){return!1}}asAnyAri(){return this}},p=class extends h{static check(e){try{return this.parse(e.toString()),!0}catch(e){return!1}}asAnyAri(){return f.parse(this.toString())}},m={qualifier:"ari",platformQualifier:"cloud",cloudId:RegExp("^[a-zA-Z0-9_\\-.]{1,255}$"),resourceOwner:"confluence",resourceType:"page",resourceIdSlug:"{pageId}",resourceIdSegmentFormats:{pageId:/[0-9]+/}},y=class e extends p{constructor(e){super(e),this._siteId=e.cloudId||"",this._pageId=e.resourceIdSegmentValues.pageId}get siteId(){return this._siteId}get pageId(){return this._pageId}static create(t){let r={qualifier:m.qualifier,platformQualifier:m.platformQualifier,cloudId:t.siteId,resourceOwner:m.resourceOwner,resourceType:m.resourceType,resourceId:`${t.pageId}`,resourceIdSegmentValues:{pageId:t.pageId}},n=u.fromOpts(r,m);return new e(n)}static parse(t){let r=u.fromString(t,m);return new e(r)}getVariables(){return{siteId:this.siteId,pageId:this.pageId}}}},84864:(e,t,r)=>{"use strict";var n=r(61507),i=typeof globalThis>"u"?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof i[n[t]]&&(e[e.length]=n[t]);return e}},85499:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(53374);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,n.A)(e,t)}},85640:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(64761);function i(e,t){if(e){if("string"==typeof e)return(0,n.A)(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.A)(e,t):void 0}}},86311:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.d(t,{A:()=>n})},86882:(e,t,r)=>{"use strict";r.d(t,{K4:()=>s,ho:()=>a,wh:()=>i});var n=r(57832),i={product:void 0,subproduct:void 0,locale:void 0,isSiteAdmin:void 0,tenantId:void 0,workspaceAri:"no-workspace-ari-available",workspaceId:void 0,orgId:void 0,productEdition:void 0},o=(0,n.createContext)(i),s=o.Provider,a=function(){return(0,n.useContext)(o)}},87106:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{A:()=>n})},89909:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(78706),i=r(53374);function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o=function(){return!!e})()}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch{return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(o())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var s=new(e.bind.apply(e,n));return r&&(0,i.A)(s,r.prototype),s}(e,arguments,(0,n.A)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,i.A)(r,e)})(e)}},91169:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>rW});var n=r(28973),i=r(69642),o=r.n(i),s=r(93987);class a{constructor(){(0,n.A)(this,"_bindEventListeners",()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)}),(0,n.A)(this,"_handleVisibilityChange",()=>{let e=document[this._hidden];this._isHidden=e,this._callbacks.forEach(t=>t(e))}),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"u">typeof document&&("u">typeof document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):"u">typeof document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):"u">typeof document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),"u">typeof document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw Error("Invalid name, must be string");if("function"!=typeof t)throw Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}class c{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!this._performance&&!!this._performance.clearMarks&&!!this._performance.mark&&!!this._performance.getEntriesByName&&!!this._performance.timing}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class d{constructor(e,t){if((0,n.A)(this,"_getEventKey",({task:e,taskId:t})=>t?`${e}.${t}`:e),(0,n.A)(this,"_getEventTimingByName",e=>{let t=this._performance.getEntriesByName(e);return t[t.length-1]}),(0,n.A)(this,"_getApdexFields",e=>{let t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return l(l({},t),{},{apdex:r})}),(0,n.A)(this,"_getApdexTimings",e=>{let t=this._getEventKey(e),r=`${t}-start`,n=e.startTime||this._getStartTime(e,r),i=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:n,stopTime:i,duration:i-n}}),(0,n.A)(this,"_getStartTime",(e,t)=>{let r;let n=this._performance.getTimeOrigin();if(e.type===s.LR.INITIAL_LOAD)r=n;else{let e=this._getEventTimingByName(t);r=n+e.startTime}return r}),(0,n.A)(this,"_getStopTime",()=>this._performance.getTimeOrigin()+this._performance.now()),(0,n.A)(this,"_cleanApdexState",e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)}),(0,n.A)(this,"_getVisibilityFields",e=>{let t;if(e.type===s.LR.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===s.LR.TRANSITION){let r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}}),(0,n.A)(this,"_calculateApdex",({duration:e,threshold:t=this._threshold})=>e<=t?1:e<=4*t?.5:0),(0,n.A)(this,"_validateStartEvent",e=>{if(!e)throw Error('Missing "event" in Apdex start event');if(!e.task)throw Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex start event')}),(0,n.A)(this,"_validateStopEvent",e=>{if(!e)throw Error('Missing "event" in Apdex stop event');if(!e.task)throw Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw Error('Missing "type" in Apdex stop event');if(e.type&&!(0,s.Xj)(s.LR,e.type))throw Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===s.LR.TRANSITION){let t=this._getEventKey(e);if(!this._startedEvents.has(t))throw Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw Error('"stopTime" should be greater than "startTime" in Apdex stop event')}),(0,n.A)(this,"_shouldSendEvent",e=>!(!e||"number"!=typeof e.apdex)),(0,n.A)(this,"_sendEvent",(e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:l(l({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)}),!e)throw Error("Missing onEvent callback");if("function"!=typeof e)throw Error("Invalid onEvent, must be function");if(!(t instanceof a))throw Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new c,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",e=>{this.onVisibilityChange(!e)})}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=`${this._getEventKey(e)}-start`;return this._getEventTimingByName(t)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;let r=this._getApdexFields(e),n=this._getVisibilityFields(e);this._sendEvent(l(l(l({},e),r),n),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach(e=>this._isActiveEvents.set(e,!1)))}}var h=r(73030);let f=e=>"function"==typeof e,p=(e,t)=>()=>{if(f(e))try{return e()}catch(e){h.error(`${t} - ${e instanceof Error?e.message:String(e)}`);return}return e},m=e=>e.embeddedType===s.vH.FIRST_PARTY&&void 0!==e.embeddedFromProduct,y=e=>e.embeddedType===s.vH.THIRD_PARTY&&void 0!==e.embeddedFromTopLevelDomain;function g(e){return!0==(null!==e&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(e)}function v(e){if(!1===g(e))return!1;let t=e.constructor;if("function"!=typeof t)return!1;let r=t.prototype;return!(!1===g(r)||!("isPrototypeOf"in r))}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function w(e){return{userIdType:e.userIdType}}function A(e){return{orgId:e.orgId}}function I(e){return{workspaceId:e.workspaceId}}function _(e){if(C(e))return{aliases:e}}function S(e){if(C(e))return{groups:e}}function P(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function T(e,t){return void 0===t?e:t}function D(e,t){let r=t||{},n=T(e.env,r.env),i=T(e.product,r.product),o=T(e.subproduct(),r.subproduct),s=T(e.version,r.version),a=T(e.origin,r.origin),c=T(e.platform,r.platform);return{env:n,product:i,subproduct:o,version:s,origin:a,platform:c}}function C(e){return v(e)&&Object.keys(e).length>0}function j(e,t){return C(t)?{[e]:t}:void 0}function k(e){if(C(e)){let t=function(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r];t[r]={id:n.id,type:n.type}}),t}(e);return j("containers",t)}}function R(e,t){return E({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},k(e.containers))}function x(e){return`${e.actionSubject} ${e.action}`}let M=function(e){return e.QUIET="quiet",e.STANDARD="standard",e.COMPLETE="complete",e}({});function N(e,t,r,n,i,o,s,a,c,u,l,d,h){let f=D(e,function(e){let{env:t,product:r,subproduct:n,version:i,origin:o,platform:s}=e;return{env:t,product:r,subproduct:n,version:i,origin:o,platform:s}}(n)),p=O(t),m=A(c),y=I(l),g=w(r),v=R(n,i);return E(E(E(E(E(E(E(E(E({},f),p),m),g),v),P(n)),{},{tabId:o,sessionId:s,taskSessions:a,pageLoadId:u},y),_(d)),S(h))}let L=1e4,F=(e,t)=>Object.keys(e).reduce((r,n)=>{let i=t(e[n],n,e);return r[i]=e[n],r},{}),U=(e,t)=>t.reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{}),B=(e,t)=>Object.keys(e).filter(r=>!t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),$=(e,t)=>Object.keys(e).filter(r=>t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),K=(e,t)=>Object.keys(e).filter(e=>0>t.indexOf(e)).reduce((t,r)=>(t[r]=e[r],t),{}),V=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;let r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(r=>V(e[r],t[r]))},G=(e,t)=>e.reduce((e,r,n,i)=>(e[t(r,n,i)?0:1].push(r),e),[[],[]]),H=Object.freeze([s.$q.OPERATIONAL,s.$q.TRACK,s.$q.UI]);function W(e){if(e){if(e&&e.constructor!==Object)throw Error("properties.containers must be an Object");Object.values(e).forEach(e=>(function(e){if(!v(e))throw Error("properties.containers must be an Object");if(!("id"in e))throw Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw Error("properties.containers.type must be of type String")})(e))}}function q(e){switch(e){case s.$q.OPERATIONAL:case s.$q.TRACK:case s.$q.UI:return!0;default:return!1}}function Q(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject");if(!e.action)throw Error("Missing event.action");W(e.containers)}class J{constructor(e,t){if((0,n.A)(this,"canCompress",e=>{try{return e&&q(e.eventType)&&this.predicate(e)}catch{return!1}}),(0,n.A)(this,"compress",e=>{let[t,r]=G(e,e=>this.canCompress(e)),n=this.compressFn(t);if(!n)throw Error("No events were returned from the compression function");return n.forEach(e=>{(function(e){if(!q(e))throw Error(`Invalid action event type: ${e}, must be one of: [${H}]`)})(e.eventType),Q(e)}),n.concat(r)}),"function"!=typeof e)throw Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class z{constructor(e=[]){if((0,n.A)(this,"canCompress",e=>this.compressionRules.some(t=>t.canCompress(e))),(0,n.A)(this,"compress",e=>this.createGroups(e).reduce((e,t)=>{let r=this.compressGroup(t);return e.concat(r)},[])),(0,n.A)(this,"createGroups",e=>e.reduce((e,t)=>{let r;let n=this.compressionRules.find(e=>e.canCompress(t));if(n){let e=R(t,t.eventType);r=K(t,Object.keys(e))}let i=e.find(e=>n===e.compressor&&V(r,e.contextFields));return i?i.events.push(t):e.push({contextFields:r,compressor:n,events:[t]}),e},[])),(0,n.A)(this,"compressGroup",e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map(t=>X(X({},t),e.contextFields))}catch{return e.events}}),!Array.isArray(e))throw Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every(e=>e instanceof J))throw Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}var Z=r(73030);class ee{constructor(e,t){(0,n.A)(this,"push",(e,t,r,n)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:n})}),(0,n.A)(this,"size",()=>this.eventArgs.length),(0,n.A)(this,"startFlush",()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){Z.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()}),(0,n.A)(this,"cancelFlush",()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)}),(0,n.A)(this,"flushNextBatch",()=>{this.eventArgs.splice(0,7).forEach(e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo)),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout(()=>this.flushNextBatch(),100):this.flushBatchTimeout=null}),(0,n.A)(this,"compressEventArgs",e=>{let[t,r]=G(e,e=>this.compressor.canCompress(e.builtEvent)),n=t.reduce((e,t)=>{let r=e.find(e=>V(e.userInfo,t.userInfo)&&V(e.context,t.context));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e},[]).reduce((e,t)=>{try{let r=t.eventArgs.map(e=>e.builtEvent),n=this.compressor.compress(r).map(e=>({identifier:x(e),builtEvent:e,userInfo:t.userInfo,context:t.context}));return e.concat(n)}catch(e){return Z.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}},[]);return r.forEach(e=>n.push(e)),n}),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new z(t)}}let et=function(e){return e.TIMEOUT="timeout",e.MANUAL="manual",e}({});class er{constructor(e,t){(0,n.A)(this,"push",(e,t,r,n)=>{this.delayQueue.push(e,t,r,n)}),(0,n.A)(this,"startLowPriorityEventDelay",(e=L,t)=>{if(Number.isNaN(e)||e<=0)throw Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayCallback=t,this.delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(et.TIMEOUT),e?Math.min(e,3e4):3e4),this.delayQueue.cancelFlush(),this.isDelaying=!0}),(0,n.A)(this,"stopLowPriorityEventDelay",(e=et.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(t=this.delayCallback)||void 0===t||t.call(this,e),this.delayCallback=void 0}),(0,n.A)(this,"isDelayingLowPriorityEvents",()=>this.isDelaying),this.isDelaying=!1,this.delayQueue=new ee(e,t)}}let en=function(e){return e.IN_PROGRESS="inProgress",e.QUEUE="queue",e.RECLAIM_START="reclaimStart",e.RECLAIM_END="reclaimEnd",e.ACK="ack",e}({}),ei=function(e){return e[e.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",e[e.RECLAIM_WAIT=500]="RECLAIM_WAIT",e[e.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",e}({}),eo=(e,t)=>({[en.ACK]:`${e}.${t}.${en.ACK}`,[en.QUEUE]:`${e}.${t}.${en.QUEUE}`,[en.IN_PROGRESS]:`${e}.${t}.${en.IN_PROGRESS}`,[en.RECLAIM_START]:`${e}.${t}.${en.RECLAIM_START}`,[en.RECLAIM_END]:`${e}.${t}.${en.RECLAIM_END}`}),es=Object.values(en),ea=e=>{if("string"!=typeof e||0===e.length)return 0;try{let t=Object.keys(localStorage).filter(t=>t&&t.startsWith(`${e}.`)||!1).map(e=>e.split(".")).filter(e=>3===e.length&&es.includes(e[2])).reduce((e,t)=>{let[,r,n]=t;return void 0===e[r]&&(e[r]={}),e[r][n]=!0,e},{}),r=Object.keys(t).filter(e=>!0!==t[e][en.ACK]);return r.forEach(t=>{let{queue:r,inProgress:n,reclaimStart:i,reclaimEnd:o}=eo(e,t);localStorage.removeItem(n),localStorage.removeItem(r),localStorage.removeItem(i),localStorage.removeItem(o)}),r.length}catch{}return 0};function ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let el=e=>new Promise(t=>{setTimeout(t,e)}),ed=e=>{try{return Object.keys(localStorage).filter(t=>t.startsWith(e)).map(e=>e.split(".")).filter(t=>{if(3===t.length&&t[0]===e&&t[2]===en.ACK)try{let e=localStorage.getItem(t.join("."));if(e){let t=parseInt(e);return ei.RECLAIM_TIMEOUT+t<Date.now()}}catch{}return!1}).map(e=>e[1])}catch{}return[]},eh=async(e,t)=>{let{ack:r,reclaimStart:n,reclaimEnd:i}=e.storageKeys,o=Date.now();if(localStorage.setItem(n,e.reclaimProcessId),localStorage.setItem(r,o.toString()),await el(ei.RECLAIM_WAIT),Date.now()>o+ei.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(n)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(i,e.reclaimProcessId),await el(ei.RECLAIM_WAIT),Date.now()>o+ei.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(n)!==e.reclaimProcessId||localStorage.getItem(i)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return ef(e,t)},ef=async(e,t)=>{let{queue:r,inProgress:n}=e.storageKeys,i=JSON.parse(localStorage.getItem(r)||"[]"),o=JSON.parse(localStorage.getItem(n)||"{}"),s=Object.entries(o).map(([e,t])=>eu(eu({},t),{},{attemptNumber:t.attemptNumber+1,id:e})),a=[...i,...s];if(a.length>0){let i=await t(a);if("successful"===i.status)ep(e.storageKeys);else if("partial"===i.status){let e=a.filter(e=>!i.acceptedItemIds.includes(e.id));return localStorage.removeItem(n),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else ep(e.storageKeys);return{fullReclaim:!0}},ep=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)},em=async(e,t)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};let r=o()(),n=ed(e).map(n=>eh({queuePrefix:e,reclaimProcessId:r,storageKeys:eo(e,n)},t)),i=await Promise.allSettled(n),s=i.filter(e=>"rejected"===e.status),a=i.filter(e=>"fulfilled"===e.status).map(e=>e.value),c=a.filter(e=>e.fullReclaim),u=a.filter(e=>!e.fullReclaim);return{failedReclaims:s.length,partialReclaims:u.length,fullReclaims:c.length}},ey="namespace-timeAdded",eg="analytics-resilience",ev="timeToBeProcessedAfter",eb="timeAdded",eE="retryAttempts",eO=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),ew=function(e){return e.IGNORE="ignore",e.ABANDON="abandon",e.EVICT="evict",e}({});class eA extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,eA.prototype),this.name="NoIndexedDbError"}}let eI="AbandonWriteError";class e_ extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,e_.prototype),this.name=eI}}let eS="CallbackProcessingError";class eP extends Error{constructor(e){let t=e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString()||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string.";super(`Error thrown while processing events in callback: ${t}`),Object.setPrototypeOf(this,eP.prototype),this.name=eS}}let eT="InvalidPolicyError";class eD extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=eT}}let eC=e=>!!e&&"object"==typeof e&&"name"in e&&"string"==typeof e.name&&(e.name===eI||e.name===eS||e.name===eT);var ej=r(46951);let ek=7;var eR=r(73030);let ex=(e,t,{id:r,retryAttempts:n,timeToProcessOffset:i})=>({item:e,id:r||o()(),retryAttempts:n||0,timeToBeProcessedAfter:Date.now()+(i||0),namespace:t,timeAdded:Date.now()}),eM=e=>({logger:e.logger||eR,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||10,maxEventLimit:e.maxEventLimit||5e3}),eN=e=>new Promise((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}}),eL=e=>new Promise((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}}),eF=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return eL(e)},eU=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}};class eB{constructor(e,t,r,i){if((0,n.A)(this,"deleteOldestNEvents",async(e,t)=>{var r;let n=e.index(ey),i=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),o=n.getAllKeys(i,t),s=await eN(o),a=null==s||null===(r=s.target)||void 0===r?void 0:r.result;if(a&&Array.isArray(a)&&a.length>0)try{let t=a.map(t=>this.deleteItemHandler(e,t));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.namespace=t,this.logger=r,this.deleteItemHandler=i}async insertItems(e,t,r=ew.ABANDON){let n=[...t],i=0;switch(r){case ew.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case ew.EVICT:i=await this.evictIfNotEnoughSpace(e,t.length);break;case ew.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,n)}let o=n.map(t=>eN(e.add(t)));return await Promise.all(o),await eF(e.transaction,this.logger),{items:n,numberOfEvictedItems:i}}async throwIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t)throw new e_(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t){let n=t-r;return await this.deleteOldestNEvents(e,n),n}return 0}async calculateHowManyEventsWeCanAdd(e,t){let r=await this.calculateFreeSpace(e);if(r<t.length){let e=t.length-r,n=t.length-e;t.splice(n,e)}}async calculateFreeSpace(e){let t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){let t=e.index(ey),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),n=t.count(r);return(await eN(n)).target.result}}let e$=["item"],eK=["items"];function eV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}class eG{constructor(e,t={}){if((0,n.A)(this,"startDB",async()=>new Promise(async(e,t)=>{if("u">typeof window){let r=window.setTimeout(()=>{this.logger.warn("IndexedDB timed out."),t(new eA)},15e3),n=window.indexedDB.open("analytics-web-client",1);n.onupgradeneeded=e=>{if(0!==e.oldVersion)throw Error("We cannot upgrade the database. Do not do this.");let t=n.result.createObjectStore(eg,{keyPath:"id"});t.createIndex(ev,ev,{unique:!1}),t.createIndex(eE,eE,{unique:!1}),t.createIndex(eb,eb,{unique:!1}),t.createIndex(ey,["namespace","timeAdded"],{unique:!1})},n.onerror=function(){t(new eA)};try{return await eN(n),e(n.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new eA)}finally{window.clearTimeout(r)}}else this.logger.warn("IndexedDB failed to initialise. No 'window' object."),t(new eA)})),(0,n.A)(this,"addItem",async(e,t={},r=ew.ABANDON)=>{let{logger:n,namespace:i}=this,o=ex(e,i,t),{objectStore:s}=await this.getObjectStoreAndTransaction("readwrite");if(r===ew.IGNORE)throw new eD(r,"IndexedDbConnector#addItem");try{if(!o.namespace||0===o.namespace.length||"string"!=typeof o.namespace)throw Error("Namespace not specified");let e=await this.globalEventLimitGuard.insertItems(s,[o],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){throw eC(e)?e:(n.log("Failed to add item to table",e),Error("Request to add item to table failed"))}}),(0,n.A)(this,"bulkAddItem",async(e,t=ew.ABANDON)=>{let{logger:r,namespace:n}=this,i=e.map(e=>{let{item:t}=e;return ex(t,n,(0,ej.A)(e,e$))}),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(o,i,t)}catch(e){throw eC(e)?e:(r.log("Failed to add item to table",e),Error("Request to add item to table failed"))}}),(0,n.A)(this,"getItems",async(e=ek)=>{let t=e>0?e:ek,{logger:r}=this,i=this.options.maxAttempts,{transaction:o,objectStore:s}=await this.getObjectStoreAndTransaction("readwrite"),a=s.index(ev),c=IDBKeyRange.upperBound(Date.now()),u=a.openCursor(c),l=await new Promise(async(e,o)=>{let s=[],a=0;u.onerror=e=>{r.error("Failed to open cursor:",e),o("Failed to open cursor")},u.onsuccess=o=>{let c=o.target.result;if(c){let o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},c.value);s.push(o);let u=c.value;if(u.retryAttempts+=1,u.timeToBeProcessedAfter=Date.now()+6e4,u.retryAttempts>=i){++a;let e=c.delete();eU(e,r)}else{let e=c.update(u);eU(e,r)}s.length<t?c.continue():e({items:s,numberOfDeletedItems:a})}else e({items:s,numberOfDeletedItems:a})}});return await eF(o,this.logger),l}),(0,n.A)(this,"deleteItems",async e=>{let{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{let n=e.map(e=>this.deleteItem(r,e));await eF(t,this.logger),await Promise.all(n)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),(0,n.A)(this,"getItemCount",async()=>{let{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(ev),n=IDBKeyRange.upperBound(Date.now()),i=r.count(n),o=await eN(i);return await eF(e,this.logger),o.target.result}),(0,n.A)(this,"processItems",async(e,t=ek)=>{let r=await this.getItems(t),{items:n}=r,i=(0,ej.A)(r,eK);try{let t=await e(n,i),r=n.map(e=>e.id);return await this.deleteItems(r),t}catch(e){throw new eP(e)}}),(0,n.A)(this,"deleteItem",async(e,t)=>{let{logger:r}=this;try{await eN(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}}),(0,n.A)(this,"getObjectStoreAndTransaction",async e=>{let t=(await this.db).transaction(eg,e),r=t.objectStore(eg);return{transaction:t,objectStore:r}}),this.options=eM(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new eA;this.db=this.startDB(),this.db.catch(()=>{}),this.globalEventLimitGuard=new eB(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return eO.INDEXEDDB}}class eH{constructor(e,t){if((0,n.A)(this,"insertItemsToMemoryStore",(e,t)=>{switch(t){case ew.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case ew.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case ew.IGNORE:return this.handleAddAsManyAsPossible(e)}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new e_(eO.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){this.memoryItemHandlers.addItems(e);let t=this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit);return{items:e,numberOfEvictedItems:t}}async handleAddAsManyAsPossible(e){let t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}let eW=["item"],eq=["items"];function eQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}class eJ{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=eM(t),this.globalEventLimitGuard=new eH(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=ew.ABANDON){if(r===ew.IGNORE)throw new eD(r,"IndexedDbConnector#addItem");let n=ex(e,this.namespace,t),i=await this.globalEventLimitGuard.insertItemsToMemoryStore([n],r);return Promise.resolve({item:i.items[0],numberOfEvictedItems:i.numberOfEvictedItems})}bulkAddItem(e,t=ew.ABANDON){let r=e.map(e=>{let{item:t}=e,r=(0,ej.A)(e,eW);return ex(t,this.namespace,r)});return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=ew.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=ek){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=ek){let t=e>0?e:ek,r=Date.now(),i=[],o=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(i.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eQ(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)),e.timeToBeProcessedAfter+=6e4,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&o.push(e)),i.length>=t)break;return o.forEach(e=>{let t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)}),{items:i,numberOfDeletedItems:o.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter(t=>!e.includes(t.id)),Promise.resolve(void 0)}getItemCount(){let e=Date.now(),t=this.memoryStore.filter(t=>t.timeToBeProcessedAfter<=e).length;return Promise.resolve(t)}async processItems(e,t){let r=this.synchronousGetItems(t),{items:n}=r,i=(0,ej.A)(r,eq),o=n.map(e=>e.id);try{let t=await e(n,i);return await this.deleteItems(o),t}catch(e){throw new eP(e)}}storeType(){return eO.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort(function(e,t){return e.timeAdded-t.timeAdded})}evictEventsIfNeeded(e){let t=this.memoryStore.length;if(t>e){let r=t-e;return this.memoryStore.splice(0,r),r}return 0}}let eY=class{constructor(e,t={}){if(this.namespace=e,this.options=eM(t),!e||0===e.length||"string"!=typeof e)throw Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new eG(e,t)}catch(e){if(!(e instanceof eA)){var r;null===(r=t.logger)||void 0===r||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}}return new eJ(this.namespace,t)}addItem(e,t,r=ew.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(e,t,r))}bulkAddItem(e,t=ew.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(e,t))}getItems(e){return this.runOrFailOver(()=>this.resilience.getItems(e))}deleteItems(e){return this.runOrFailOver(()=>this.resilience.deleteItems(e))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(e,t){return this.runOrFailOver(()=>this.resilience.processItems(e,t))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if(eC(t))throw t;return this.resilience.storeType()===eO.INDEXEDDB&&await this.failOver(),e()}}async failOver(){let e=this.resilience,t=new eJ(this.namespace,this.options);this.resilience=t;try{let{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){let n=(await t.bulkAddItemWrapperType(r,ew.IGNORE)).items.map(e=>e.id);await e.deleteItems(n)}}catch{this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}},eX=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),ez=function(e){return e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE",e}({});class eZ{constructor(){(0,n.A)(this,"itemsDiscardedByRetry",0),(0,n.A)(this,"eventCount",0),(0,n.A)(this,"itemsDiscardedByOverflow",0),(0,n.A)(this,"resilienceMechanism",eX.INDEXEDDB),(0,n.A)(this,"localstorageNumberOfQueuesPurged",0),(0,n.A)(this,"localstorageNumberOfFullReclaims",0),(0,n.A)(this,"localstorageNumberOfPartialReclaims",0),(0,n.A)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let e0=null,e1=()=>(e0||(e0=new eZ),e0);class e2{constructor(e){this._networkChangeCallback=e,"u">typeof window&&(window.addEventListener("offline",()=>this._networkChangeCallback(ez.OFFLINE)),window.addEventListener("online",()=>this._networkChangeCallback(ez.ONLINE)))}removeListeners(){"u">typeof window&&(window.addEventListener("offline",()=>this._networkChangeCallback(ez.OFFLINE)),window.addEventListener("online",()=>this._networkChangeCallback(ez.ONLINE)))}getNetworkStatus(){return window.navigator.onLine?ez.ONLINE:ez.OFFLINE}}let e3=function(e){return e.IDLE="idle",e.RUNNING="running",e.COMPLETED="completed",e.TIMED_OUT="timedOut",e}({}),e4=function(e){return e.EXECUTE="execute",e.COMPLETE="complete",e.TIMEOUT="timeout",e}({});class e7{constructor(e){if((0,n.A)(this,"timeoutHandle",void 0),(0,n.A)(this,"callbackStatus",e3.IDLE),e>0){this.timeoutPeriod=e;return}throw Error("CallbackWithTimeout requires timeout period higher than 0")}transitionCallbackStatus(e,t){switch(e){case e3.IDLE:case e3.TIMED_OUT:case e3.COMPLETED:t===e4.EXECUTE&&(this.callbackStatus=e3.RUNNING);break;case e3.RUNNING:switch(t){case e4.COMPLETE:this.callbackStatus=e3.COMPLETED;break;case e4.TIMEOUT:this.callbackStatus=e3.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){typeof window>"u"||(this.transitionCallbackStatus(this.callbackStatus,e4.EXECUTE),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,e4.TIMEOUT),r()},this.timeoutPeriod),e(e=>{this.cancelTimeout(),this.getCallbackStatus()!==e3.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,e4.COMPLETE),t(e))}))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"u">typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}let e5=function(e){return e[e.NOOP=0]="NOOP",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e}({}),e6={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3},e9=function(e){return e[e.NONE=0]="NONE",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.WAIT=2]="WAIT",e}({});class e8{constructor(e,t){(0,n.A)(this,"schedule",({immediate:e}={})=>{typeof window>"u"||(this.operationInFlight?e?this.queuedSchedule=e9.IMMEDIATE:this.queuedSchedule!==e9.IMMEDIATE&&(this.queuedSchedule=e9.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))}),(0,n.A)(this,"stop",()=>{this.clearTimeout(),this.queuedSchedule=e9.NONE}),(0,n.A)(this,"getFailureCount",()=>this.failureCount),(0,n.A)(this,"getCallbackStatus",()=>this.callbackTimer.getCallbackStatus()),(0,n.A)(this,"clearTimeout",()=>{"u">typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}),(0,n.A)(this,"run",()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(e5.ERROR))}catch(e){this.done(e)}}),(0,n.A)(this,"done",e=>{this.operationInFlight=!1,e===e5.ERROR||this.callbackTimer.getCallbackStatus()===e3.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===e5.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()}),(0,n.A)(this,"processQueuedSchedule",()=>{if(this.queuedSchedule!==e9.NONE){let e=this.queuedSchedule===e9.IMMEDIATE;this.queuedSchedule=e9.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()}),(0,n.A)(this,"calculateBackoff",()=>{let{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:n}=this.options,i=e*r**this.failureCount;if(n){let e=Math.random(),t=Math.floor(e*n*i);5>Math.floor(10*e)?i-=t:i+=t}return Number(Math.min(i,t).toPrecision(1))}),this.options={minRetryDelay:e.minRetryDelay||e6.minRetryDelay,maxRetryDelay:e.maxRetryDelay||e6.maxRetryDelay,backoffFactor:e.backoffFactor||e6.backoffFactor,backoffJitterPercentage:e.backoffJitterPercentage||e6.backoffJitterPercentage,waitInterval:void 0!==e.waitInterval?e.waitInterval:e6.waitInterval,callbackTimeoutPeriod:e.callbackTimeoutPeriod||e6.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=e9.NONE,this.callbackTimer=new e7(this.options.callbackTimeoutPeriod)}}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tr={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},tn={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class ti{constructor(e,t,r,n){this.queuePrefix=e,this.resilience=new eY(t,{logger:n,maxAttempts:r?.maxAttempts,maxEventLimit:r?.maxItems}),this.options=this.buildOptions(r),this.scheduler=new e8(tt(tt({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new e8(tt(tt({},tr),{},{waitInterval:tr.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=e1(),this.networkStatus=new e2(e=>{e===ez.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){let t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},ew.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()===ez.OFFLINE){e(e5.NOOP);return}try{let t=await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize);e(t)}catch(t){if(t.name===eS){e(e5.ERROR);return}}finally{await this.checkEventCountAndReschedule()}}async checkEventCountAndReschedule(){let e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){let t=ea(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);let r=await em(this.queuePrefix,async e=>{let t=e.map(e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id})),{items:r}=await this.resilience.bulkAddItem(t,ew.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map(e=>e.id)}});this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(e5.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());let{batchFlushCallback:r}=this;if(!r)throw Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((n,i)=>{if(e.length<=0){n(e5.NOOP);return}let o=e.map(e=>{let t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t});r(o,e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),i(e)):n(e5.SUCCESS)})})}buildOptions(e){return{backoffFactor:e?.backoffFactor||tn.backoffFactor,backoffJitterPercentage:e?.backoffJitterPercentage!==void 0?e.backoffJitterPercentage:tn.backoffJitterPercentage,batchFlushSize:e?.batchFlushSize||tn.batchFlushSize,flushBeforeUnload:e?.flushBeforeUnload||tn.flushBeforeUnload,flushWaitMs:e?.flushWaitMs||tn.flushWaitMs,maxItems:e?.maxItems||tn.maxItems,maxAttempts:e?.maxAttempts||tn.maxAttempts,maxRetryDelay:e?.maxRetryDelay||tn.maxRetryDelay,minRetryDelay:e?.minRetryDelay||tn.minRetryDelay}}}let to=(e,t,r,n)=>new ti(e,t,r||{},n),ts=function(e){return e.IDENTIFY="identify",e.PAGE="page",e.TRACK="track",e}({});(function(e){e.XC="xc",e.UID="uid"})({}),function(e){e.NEW="NEW",e.CHANGED="CHANGED",e.EXISTING="EXISTING",e.TIMEOUT="TIMEOUT",e.ERROR="ERROR",e.UNAVAILABLE="UNAVAILABLE",e.MALFORMED="MALFORMED",e.UNKNOWN="UNKNOWN"}({});class ta{constructor(e,t){this.props=e,this.url=t}static fromJson(e){var t;let r="string"==typeof(t=e?.url)||t instanceof String?e.url.trim():"";return new ta(e?.props||null,r.startsWith("http")?r:null)}}class tc extends Error{constructor(e,t,r){super(e),this.statusCode=t,this.statusText=r}}let tu=["FetchError","AbortError","TypeError"];function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function td(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function th(e,t){try{let r=await t;return e.map(e=>(function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===ts.PAGE||e.msg.type===ts.TRACK){let r=t();r&&Array.isArray(r)&&(e.msg.properties=td(td({},e.msg.properties),{},{xid:r}))}else if(e.msg.traits&&e.msg.type===ts.IDENTIFY){let r=t();r&&Array.isArray(r)&&(e.msg.traits=td(td({},e.msg.traits),{},{xid:r}))}return e})(e,r))}catch{return e}}let tf=new Map([[200,"OK"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Timeout"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Payload Too Large"],[414,"URI Too Long"],[415,"Unsupported Media Type"],[416,"Requested range not satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Timeout"],[505,"HTTP Version not supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[508,"Loop Detected"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"],[-1,"Unknown Status"]]);var tp=r(90140);function tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let ty=async e=>{var t;let r=null===(t=tg(e))||void 0===t?void 0:t.signal,i=tv(e.url),o=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:r},i));if(429===o.status||o.status>=500&&o.status<600)throw new tc(`HTTP Error ${o.status} (${o.statusText})`,o.status,o.statusText);return o},tg=e=>{if(e.abortController)return e.abortController;if(e.timeout){let t=new AbortController;return setTimeout(()=>{t.abort()},e.timeout),t}},tv=(0,tp.A)(e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"});var tb=r(23553),tE=r(69298),tO=r.n(tE);let tw=function(e){return e.AWC_TLD_TEST="AWC_TLD_TEST",e.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",e.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",e}({});class tA{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}let tI=()=>{try{return window&&window.location&&"https:"===window.location.protocol}catch{return!1}},t_={[tw.AWC_TLD_TEST]:new tA("__awc_tld_test__",{expires:365,secure:tI(),path:"/"}),[tw.AWC_ANALYTICS_DEBUG]:new tA("atlassian_analytics_debug",{expires:365,secure:tI(),path:"/"}),[tw.AJS_ANONYMOUS_ID]:new tA("ajs_anonymous_id",{expires:365,secure:tI(),path:"/"})},tS=new class{constructor(){(0,n.A)(this,"_data",{}),(0,n.A)(this,"length",0),(0,n.A)(this,"setItem",(e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t)),(0,n.A)(this,"getItem",e=>e in this._data?this._data[e]:null),(0,n.A)(this,"removeItem",e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null)),(0,n.A)(this,"clear",()=>{this._data={},this.length=0}),(0,n.A)(this,"key",e=>Object.keys(this._data)[e])}},tP="awcInMemoryStorageFallback";function tT(e){let t="test_value";if(!e)return!1;try{let r="awc.storage.support";e.setItem(r,t);let n=e.getItem(r);return e.removeItem(r),n===t}catch{return!1}}class tD{constructor(e,t={}){(0,n.A)(this,"getStore",()=>this._store),(0,n.A)(this,"getItem",e=>this._store.getItem(this.createKey(e))),(0,n.A)(this,"removeItem",e=>this._store.removeItem(this.createKey(e))),(0,n.A)(this,"setItem",(e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else -2147024882===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}}),(0,n.A)(this,"swapToInMemory",()=>{let e;if(this._store===tS||typeof window>"u")return;let t=Object.keys(this._store||{});tT(window[tP])?e=window[tP]:(e=tS,window[tP]||(window[tP]=tS)),t.forEach(t=>{if(0===t.indexOf(this.getPrefix())){let r=this._store.getItem(t);r&&e.setItem(t,r)}}),this._store=e}),(0,n.A)(this,"clear",()=>this._store.clear()),(0,n.A)(this,"key",e=>this._store.key(e)),(0,n.A)(this,"getPrefix",()=>this._prefix),(0,n.A)(this,"createKey",e=>this._prefix?`${this.getPrefix()}.${e}`:e),this.options=t;let r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==s.sR.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),tT(e)?this._store=e:this.swapToInMemory()}}let tC=class extends tD{constructor(e){let t;try{t=window.localStorage||tS}catch{t=tS}super(t,e)}};class tj{constructor(){this.safeStorage=new tC({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}let tk=(e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol),tR=t_.AWC_TLD_TEST.getKey(),tx="tld_test",tM=(0,tp.A)(()=>{if(typeof location>"u")return"";let{hostname:e}=location,t=e.split(".");for(let e=1;e<=t.length;e++){let r=`.${t.slice(-1*e).join(".")}`;if(tO().set(tR,tx,{domain:r}),tO().get(tR)===tx)return tO().remove(tR,{domain:r}),r}return e});var tN=r(73030);function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class tU{constructor(e){this.cookieLike=tk(e)?tO():new tj}set(e,t,r){if(!t_[e]){tN.warn(`Unknown cookie key ${e} provided, not set.`);return}return this.cookieLike.set(t_[e].getKey(),t,tF(tF({},t_[e].getAttributes()),{},{domain:tM()},r))}get(e){if(!t_[e]){tN.warn(`Unknown cookie key ${e} provided, not fetched.`);return}return this.cookieLike.get(t_[e].getKey())}remove(e,t){if(!t_[e]){tN.warn(`Unknown cookie key ${e} provided, not removed.`);return}this.cookieLike.remove(t_[e].getKey(),tF({},t))}}let tB="SAFE",t$="UNSAFE",tK="LOCAL_STORAGE";class tV{constructor(e){this.store=new tC({useStoragePrefix:!1}),this.cookie=new tU(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){let t=JSON.stringify(e);return this.cookie.set(tw.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(t_.AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){let t=e===tK?this.store.getItem(t_.AJS_ANONYMOUS_ID.getKey()):this.cookie.get(tw.AJS_ANONYMOUS_ID);if(t){let e={type:t$,anonymousId:t};try{let r=JSON.parse(t);return r&&"string"==typeof r?{type:tB,anonymousId:r}:e}catch{return e}}return{type:"NOT_FOUND"}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){let e=this.getAnonymousIdFromStorage(tK),t=!1;switch((!this.lastAnonymousIdCookieUpdate||(0,tb.A)(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case tB:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case t$:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){let e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case tB:case t$:return this.store.setItem(t_.AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=o()){let t=e();return this.setAnonymousId(t),t}}var tG=r(31150),tH=r.n(tG);function tW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tW(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tQ=e=>tq(tq({},e.context),{},{userAgent:navigator.userAgent}),tJ=e=>{let t=tY(e);return tH()(t)},tY=e=>{if(null===e||"object"!=typeof e)return e;let t={};return Object.keys(e).forEach(r=>{let n=tX(e,r);void 0!==n&&(Array.isArray(n)?t[r]=n.map(e=>tY(e)):"object"==typeof n&&null!==n?t[r]=tY(n):t[r]=n)}),t},tX=(e,t)=>e[t];var tz=r(73030);function tZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tZ(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class t1{constructor(e,t,r,n,i){this.success=e,this.validationErrors=t,this.message=r,this.code=n,this.validationReports=i}isSuccess(){return this.success}getValidationErrors(){return this.validationErrors}getMessage(){return this.message}getCode(){return this.code}getValidationReports(){return void 0===this.validationReports?null:this.validationReports}}class t2{constructor(e){this.error=e}}class t3{constructor(e,t,r,n){this.success=e,this.statusCode=t,this.message=r,this.eventResponseList=n}isSuccess(){return this.success}getStatusCode(){return this.statusCode}getMessage(){return this.message}getEventResponseList(){return this.eventResponseList}}class t4{constructor(e,t,r){this.messageId=e,this.results=t,this.segmentEvent=r}getMessageId(){return this.messageId}getResults(){return this.results}getSegmentEvent(){return this.segmentEvent}}class t7{constructor(e){var t;(0,n.A)(this,"sendEvents",async(e,t)=>{var r;if(!1===this.options.enableEventCalls)return;let n=this.resilienceQueue.getGlobalRetryCount(),i=this.metrics.getMetricsPayload(),o=await this.attachXIDs(e),s=new Date().toISOString(),a=await this.metadataClient.getMetadataAsync(),c=null!=a&&a.url?a.url:this.gasv3BatchUrl,u=this.useUrlFromMetadata?c:this.gasv3BatchUrl,l=c===this.gasv3BatchUrl?null:u!==c,d=t0(t0({},i),{},{httpRetryCount:n,lastSendEventsErrorReason:this.sendEventsLastErrorReason,isUsingFallbackUrl:l,props:a?.props||null,metadataClientMetrics:(null===(r=this.metadataClient)||void 0===r?void 0:r.metrics)||null});this.cleanLibraryMetadata(d);let h={batch:o.map(e=>(e.msg.sentAt=s,e.msg)),sentAt:s,metadata:d};try{this.sendEventsLastErrorReason=null;let r=await ty({url:u,batch:h,timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(i),t(null,r),await this.invokeLocalResponseCallbackAsync(e,r,null)}catch(r){r instanceof tc&&[429,503].includes(r.statusCode)?this.sendEventsLastErrorReason="ServerBusyError":(this.useUrlFromMetadata=!1,this.sendEventsLastErrorReason=r instanceof Error&&tu.includes(r.name)?r.name:"Unknown"),t(r,null),await this.invokeLocalResponseCallbackAsync(e,null,r)}}),this.options=t0(t0({},e),{},{requestTimeout:e.requestTimeout||1e4,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||tz,disableCookiePersistence:e.disableCookiePersistence||!1,env:e.env,perimeter:e.perimeter||"",enableMetadataCalls:"boolean"!=typeof e.enableMetadataCalls||e.enableMetadataCalls,enableEventCalls:"boolean"!=typeof e.enableEventCalls||e.enableEventCalls}),this.user=new tV(null===(t=this.options)||void 0===t?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=e1(),this.responseCallback=e.responseCallback,this.resilienceQueue=to(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.metadataClient=e.metadataClient,this.useUrlFromMetadata=!0,this.sendEventsLastErrorReason=null,setInterval(()=>{this.useUrlFromMetadata=!0},6e5),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,n){let i=this.buildBaseEvent(r,ts.TRACK,t),o=t0(t0({},i),{},{type:ts.TRACK,properties:tJ(t),event:e}),s=t0(t0({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(s);await this.enqueueEvent(a),n&&n()}async page(e,t,r,n){let i=this.buildBaseEvent(r,ts.PAGE,t),o=t0(t0({},i),{},{type:ts.PAGE,properties:tJ(t),name:e}),s=t0(t0({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(s);await this.enqueueEvent(a),n&&n()}async identify(e,t,r,n){let i=this.buildBaseEvent(r,ts.IDENTIFY,t),o=t0(t0({},i),{},{type:ts.IDENTIFY,traits:tJ(t)}),s=t0(t0({},o),{},{messageId:this.createMessageId()}),a=this.packageEvent(s);await this.enqueueEvent(a),n&&n()}async enqueueEvent(e){this.options.enableMetadataCalls&&this.metadataClient.start(!1),await this.resilienceQueue.addItem(e)}buildBaseEvent(e,t,r){let n=tJ(e);return{context:tQ(n),timestamp:new Date().toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${o()()}`}packageEvent(e){let{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}cleanLibraryMetadata(e){if(!(null===e||"object"!=typeof e))for(let t in e){let r=e[t];null==r||"number"==typeof r&&0===r?delete e[t]:Array.isArray(r)?0===r.length?delete e[t]:r.forEach(e=>{this.cleanLibraryMetadata(e)}):"object"==typeof r&&this.cleanLibraryMetadata(e[t])}}async invokeLocalResponseCallbackAsync(e,t,r){let n=this.responseCallback;if(n){let o=null;if(t){var i;let e;try{e=await t.clone().json()}catch{}(e=e||{}).code=Number.parseInt(e.code)>0?Number.parseInt(e.code):t.status,e.success=e.success||e.code>=200&&e.code<=299,o=new t1(e.success,e.validationErrors||new Map,new t2((null===(i=e.message)||void 0===i?void 0:i.error)||""),e.code,e.validationReports||null)}!r||r instanceof Error||(r=Error(String(r)));let s=t5.toAnalyticsResponse(e||[],r||null,o);n(s)}}async attachXIDs(e){return this.xidPromiseCallback?th(e,this.xidPromiseCallback):Promise.resolve(e)}setResponseCallback(e){this.responseCallback=e}refreshMetadata(e,t){this.metadataClient.userInfo=e,this.metadataClient.tenantInfo=t}}class t5{static toAnalyticsResponse(e,t,r){let n=[];if(null!==r){var i,o;let[t,s]=[r.code,r.success];if(t>=200&&t<=299)return null===(i=r.validationReports)||void 0===i||i.forEach(t=>{let r=e.find(e=>e.msg.messageId===t.messageId);r&&n.push(new t4(r.msg.messageId,t.results,r.msg))}),new t3(s,t,tf.get(t),n);if(t>=400&&t<=499){let i=(null===(o=r.message)||void 0===o?void 0:o.error)!==null?r.message.error:tf.has(t)?tf.get(t):tf.get(-1);return e.forEach(e=>{n.push(new t4(e.msg.messageId,[],e.msg))}),new t3(s,t,i,n)}}else if(null!=t&&t.message){let r=t.message.match(t5.http_error_regex);if(r)return e.forEach(e=>{n.push(new t4(e.msg.messageId,[],e.msg))}),new t3(!1,Number(r[1]),r[2],n)}return e.forEach(e=>{n.push(new t4(e.msg.messageId,[],e.msg))}),new t3(!1,-1,tf.get(-1),n)}}(0,n.A)(t5,"http_error_regex",/HTTP Error\s([0-9]{3})\s\((.+)\)/);let t6="/gateway/api/gasv3/api/v1",t9=()=>"as.staging.atl-paas-us-gov-mod.net/api/v1",t8=()=>"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1",re=({useStargate:e,env:t,useLegacyUrl:r,envOverride:n})=>{if(t===s.sR.LOCAL||t===s.sR.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(t===s.sR.PROD&&n)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return e?r?t===s.sR.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":t8():window.location.host+t6:t===s.sR.PROD?"as.atlassian-us-gov-mod.com/api/v1":t9()},rt=({useStargate:e,env:t,useLegacyUrl:r})=>e?r?t===s.sR.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+t6:t===s.sR.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1";class rr{static isGeminiVREnvironment(){try{for(let e in r.g)if(e.startsWith("__gemini_")&&e.endsWith("__"))return!0}catch{}return!1}static areMetadataCallsDisabled(){return this.areFetchCallsDisabled()||this.getGlobalBooleanProperty(rr.DISABLE_METADATA_CALLS_PROPERTY)}static areEventCallsDisabled(){return this.areFetchCallsDisabled()||this.getGlobalBooleanProperty(rr.DISABLE_EVENT_CALLS_PROPERTY)}static areFetchCallsDisabled(){return this.getGlobalBooleanProperty(rr.DISABLE_FETCH_CALLS_PROPERTY)}static getGlobalBooleanProperty(e){return!!(r.g&&r.g.hasOwnProperty(e))&&!0===r.g[e]}}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}(0,n.A)(rr,"DISABLE_METADATA_CALLS_PROPERTY","__awc_disable_metadata_calls__"),(0,n.A)(rr,"DISABLE_EVENT_CALLS_PROPERTY","__awc_disable_event_calls__"),(0,n.A)(rr,"DISABLE_FETCH_CALLS_PROPERTY","__awc_disable_fetch_calls__");let ri=async(e,t,r,i)=>{var o,s,a,c;let u=ro(r,i),l=rs(e),d=e+"?"+new URLSearchParams({product:`${t.product}`,userId:`${(null===(o=t.userInfo)||void 0===o?void 0:o.userId)||""}`,userIdType:`${(null===(s=t.userInfo)||void 0===s?void 0:s.userIdType)||""}`,tenantId:`${(null===(a=t.tenantInfo)||void 0===a?void 0:a.tenantId)||""}`,tenantIdType:`${(null===(c=t.tenantInfo)||void 0===c?void 0:c.tenantIdType)||""}`}).toString(),h=await fetch(d,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:"GET",signal:u.signal},l));if(200!==h.status)throw new tc(`Metadata: HTTP Error ${h.status} (${h.statusText})`,h.status,h.statusText);return h},ro=(e,t)=>{let r=new AbortController;return setTimeout(()=>{r.abort()},e||3e4),t?.addEventListener("abort",()=>{r.abort()}),r},rs=(0,tp.A)(e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"});function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class ru{constructor(e,t,r){this._userInfo={anonymousId:""},this._tenantInfo={},this._url=`${e}://${t}/metadata`,this._product=r,this._metadataInfo=null,this._requestStatus="PENDING",this._lastFetchRequestCount=0,this._lastErrorReason=null,this._fetchAbortController=null,this._hasBeenStopped=!1,this._isEnabled=!1,this._propertyChangeRefreshTimeout=null;let n=function({apiHost:e}){return e===window.location.host+t6}({apiHost:t});this._metadataHost=n?"PRODUCT_HOST":t,this._options=this.buildOptions({backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3}),this._scheduler=new e8(rc(rc({},this._options),{},{waitInterval:6e5}),this.scheduleCallback.bind(this)),this._networkStatus=null}start(e){this._isEnabled||this._hasBeenStopped&&!e||(this._isEnabled=!0,this.startNetworkStatusMonitor(),setTimeout(()=>{this._scheduler.schedule({immediate:!0})},ru.INITIAL_REFRESH_DELAY))}stop(){var e;this._isEnabled&&(this._hasBeenStopped=!0,this._isEnabled=!1,this.stopNetworkStatusMonitor(),this._scheduler.stop(),null===(e=this._fetchAbortController)||void 0===e||e.abort(),this.resetPropertyChangeRefresh())}startNetworkStatusMonitor(){this._networkStatus||(this._networkStatus=new e2(e=>{e===ez.OFFLINE?this._scheduler.stop():this._isEnabled&&this._scheduler.schedule({immediate:null===this._metadataInfo})}))}stopNetworkStatusMonitor(){this._networkStatus&&(this._networkStatus.removeListeners(),this._networkStatus=null)}async refreshMetadataAsync(){var e;if(rr.areFetchCallsDisabled()||!this._isEnabled)return Promise.resolve();null===(e=this._fetchAbortController)||void 0===e||e.abort(),this._fetchAbortController=new AbortController;let t=this._fetchAbortController.signal;this._lastFetchRequestCount=this._scheduler.getFailureCount(),await ri(this._url,{product:this._product,userInfo:this._userInfo,tenantInfo:this._tenantInfo},6e4,t).then(async e=>{let t=await e.json();this._metadataInfo=ta.fromJson(t),this._lastFetchRequestCount++,this._requestStatus="FETCHED",this._lastErrorReason=null}).catch(e=>{if(!t.aborted)throw this._requestStatus="FAILED",e instanceof tc&&[429,503].includes(e.statusCode)?this._lastErrorReason="ServerBusyError":this._lastErrorReason=e instanceof Error&&tu.includes(e.name)?e.name:"Unknown",e})}getMetadataAsync(){return Promise.resolve(this._metadataInfo)}get status(){return this._requestStatus}get lastErrorReason(){return this._lastErrorReason}get lastFetchRequestCount(){return this._lastFetchRequestCount}get userInfo(){return this._userInfo}set userInfo(e){var t,r;(null===(t=this._userInfo)||void 0===t?void 0:t.userId)===e?.userId&&(null===(r=this._userInfo)||void 0===r?void 0:r.userIdType)===e?.userIdType||(this._userInfo=e,this.schedulePropertyChangeRefresh())}get tenantInfo(){return this._tenantInfo}set tenantInfo(e){var t,r;(null===(t=this._tenantInfo)||void 0===t?void 0:t.tenantId)===e?.tenantId&&(null===(r=this._tenantInfo)||void 0===r?void 0:r.tenantIdType)===e?.tenantIdType||(this._tenantInfo=e,this.schedulePropertyChangeRefresh())}get metrics(){return{host:this._metadataHost,status:this.status,lastErrorReason:this.lastErrorReason,lastRefreshRequestCount:this.lastFetchRequestCount}}async scheduleCallback(e){var t;if((null===(t=this._networkStatus)||void 0===t?void 0:t.getNetworkStatus())===ez.OFFLINE){e(e5.NOOP);return}try{await this.refreshMetadataAsync(),e(e5.SUCCESS),this._scheduler.schedule()}catch{e(e5.ERROR)}}schedulePropertyChangeRefresh(){this._isEnabled&&(this.resetPropertyChangeRefresh(),this._propertyChangeRefreshTimeout=setTimeout(()=>{this.resetPropertyChangeRefresh(),this._scheduler.schedule({immediate:!0})},10))}resetPropertyChangeRefresh(){this._propertyChangeRefreshTimeout&&(clearTimeout(this._propertyChangeRefreshTimeout),this._propertyChangeRefreshTimeout=null)}buildOptions(e){return{backoffFactor:e?.backoffFactor||tn.backoffFactor,backoffJitterPercentage:e?.backoffJitterPercentage!==void 0?e.backoffJitterPercentage:tn.backoffJitterPercentage,batchFlushSize:e?.batchFlushSize||tn.batchFlushSize,flushBeforeUnload:e?.flushBeforeUnload||tn.flushBeforeUnload,flushWaitMs:e?.flushWaitMs||tn.flushWaitMs,maxItems:e?.maxItems||tn.maxItems,maxAttempts:e?.maxAttempts||tn.maxAttempts,maxRetryDelay:e?.maxRetryDelay||tn.maxRetryDelay,minRetryDelay:e?.minRetryDelay||tn.minRetryDelay}}}(0,n.A)(ru,"INITIAL_REFRESH_DELAY",1),(0,n.A)(ru,"Factory",(e,t,r)=>new ru(e,t,r));var rl=r(34648);let rd=e=>window.history.replaceState({},"",e),rh=(e,t=rd)=>{let r=window.location.href,n=window.location.hash,i=""!==n?r.replace(n,""):r,{url:o,query:s}=(0,rl.parseUrl)(i),a=$(s,e);if(Object.keys(a).length>0){let r=B(s,e);if(Object.keys(r).length>0){let e=`${o}?${(0,rl.stringify)(r)}${n}`;t(e)}else t(`${o}${n}`)}return a};class rf{constructor(){(0,n.A)(this,"handleOriginParameters",(e,t)=>{let r=Object.keys(e);if(!(r.length>0))throw Error("Empty parameter mapping provided");let n=r.filter(e=>0>Object.values(s.D0).indexOf(e));if(n.length>0)throw Error(`Invalid Origin Tracing Parameter(s) supplied: ${n.join()}!`);let i=rh((e,t)=>r.indexOf(t)>=0,t);return Object.keys(i).map(t=>{let r=e[t](i[t]);return{[t]:r}}).reduce((e,t)=>Object.assign(e,t),{})}),this._originStore={}}}let rp="session.id",rm="session.expiry",ry=/^\d+$/,rg=()=>{};class rv{constructor(e={}){(0,n.A)(this,"_generateNewSessionId",()=>{let e=Date.now().toString();return this._safeLocalStorage.setItem(rp,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e}),(0,n.A)(this,"_updateSessionExpiry",()=>{let e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(rm,e.toString()),e}),(0,n.A)(this,"_debouncedUpdateSessionExpiry",e=>{let{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{t()},this._sessionExpiryDebounce)}),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:rg,this._safeLocalStorage=new tC}getCurrentSessionId(){let e=this._safeLocalStorage.getItem(rp),t=parseInt(this._safeLocalStorage.getItem(rm)||"0",10)||0;return this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)?this._generateNewSessionId():ry.test(e)?e:this._generateNewSessionId()}}let rb=class extends tD{constructor(e){let t;try{t=window.sessionStorage||tS}catch{t=tS}super(t,e)}},rE="tab.id";class rO{constructor(){(0,n.A)(this,"_generateNewTabId",()=>{let e=o()();return this._safeSessionStorage.setItem(rE,e),e}),this._safeSessionStorage=new rb}getCurrentTabId(){let e=this._safeSessionStorage.getItem(rE);return e||(e=this._generateNewTabId()),e}}function rw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rw(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let rI="taskSessions",r_="taskSessionsInit",rS="awc.";class rP{constructor(){(0,n.A)(this,"_taskSessionsNotRecentlyInitialised",e=>null===this._safeSessionStorage.getItem(rI)||null===this._safeSessionStorage.getItem(r_)||parseInt(this._safeSessionStorage.getItem(r_)||"0",10)<e-3e3),(0,n.A)(this,"_removeTaskSessionPrefix",(e,t)=>t.split(rS)[1]),(0,n.A)(this,"_isTaskSessionQueryParam",(e,t)=>t.startsWith(rS)),(0,n.A)(this,"getAllTaskSessions",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(rI)||"")}catch{return{}}}),(0,n.A)(this,"_writeToSessionStorage",e=>{try{this._safeSessionStorage.setItem(rI,JSON.stringify(e))}catch{}}),(0,n.A)(this,"_appendTaskSessions",e=>{let t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)}),(0,n.A)(this,"_safelyRemoveKey",(e,t)=>null===e?{}:(delete e[t],e)),(0,n.A)(this,"createTaskSession",e=>{let t=o()(),r={};return r[e]=t,this._appendTaskSessions(r),t}),(0,n.A)(this,"createTaskSessionWithProvidedId",(e,t)=>{if("string"!=typeof t)throw TypeError("invalid taskSessionId, must be string");let r={};r[e]=t,this._appendTaskSessions(r)}),(0,n.A)(this,"completeTaskSession",e=>{let t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)}),(0,n.A)(this,"formatTaskSessionQueryString",({uri:e,includedTaskSessions:t})=>{let{url:r,query:n}=(0,rl.parseUrl)(e),i=this.getAllTaskSessions(),o=t?U(i,t):K(i,Object.values(s.D0));if(0===Object.keys(o).length)return e;let a=rA(rA({},F(o,(e,t)=>rS+t)),n);return`${r}?${(0,rl.stringify)(a)}`}),(0,n.A)(this,"stripQueryParameters",()=>{let e=F(rh(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)});let e=Date.now();this._safeSessionStorage=new rb;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(r_,e.toString()))}catch{}}}let rT=t_.AWC_ANALYTICS_DEBUG.getKey(),rD="synthetic",rC=()=>{try{return JSON.parse(tO().get(rT)||"false")}catch{tO().remove(rT)}return!1},rj=class{constructor(){(0,n.A)(this,"_bind",()=>{typeof window>"u"||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch{}}})}),(0,n.A)(this,"_cache",e=>{typeof window>"u"||(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))}),(0,n.A)(this,"_shouldCacheEvent",()=>this._isDebugCookieEnabled),(0,n.A)(this,"saveEvent",e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(rD):e.tags=[rD],this._cache(e))}),this._isDebugCookieEnabled=rC(),this._isDebugCookieEnabled&&this._bind()}},rk=["embeddedProduct"];function rR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rR(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class rM{constructor(e,t,r,i={}){if((0,n.A)(this,"start",()=>{this._startInterval(),this._bindEventListeners()}),(0,n.A)(this,"stop",()=>{this._stopInterval(),this._unbindEventListeners()}),(0,n.A)(this,"resetTimers",()=>{this._intervalId&&(this.stop(),this.start())}),(0,n.A)(this,"_bindEventListeners",()=>{"u">typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))}),(0,n.A)(this,"_unbindEventListeners",()=>{"u">typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))}),(0,n.A)(this,"_startInterval",()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)}),(0,n.A)(this,"_stopInterval",()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}),(0,n.A)(this,"_getProductKey",(e,t)=>{let r=e;return t&&(r+=`-${t}`),r}),(0,n.A)(this,"_getLastSentTimestamp",(e,t,r)=>(((this._parseLocalStorageData(this._storageKey)||{})[r]||{})[t]||{})[e]||null),(0,n.A)(this,"_parseLocalStorageData",e=>{let t=this._safeLocalStorage.getItem(e);try{return JSON.parse(t||"")}catch{return this._safeLocalStorage.removeItem(e),null}}),(0,n.A)(this,"_getMalformedLastSentTimestamp",(e,t,r)=>(((this._parseLocalStorageData(this._malformedEventStorageKey)||{})[r||"NOT_SET"]||{})[t||"NOT_SET"]||{})[e]||null),(0,n.A)(this,"_setLastSentTimestamp",(e,t,r)=>{let n=this._parseLocalStorageData(this._storageKey)||{},i=n[r]||{},o=i[t]||{};o[e]=Date.now(),i[t]=o,n[r]=i,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(n))}),(0,n.A)(this,"_setMalformedLastSentTimestamp",(e,t,r)=>{let n=this._parseLocalStorageData(this._malformedEventStorageKey)||{},i=r||"NOT_SET",o=t||"NOT_SET",s=n[i]||{},a=s[o]||{};a[e]=Date.now(),s[o]=a,n[i]=s,this._safeLocalStorage.setItem(this._malformedEventStorageKey,JSON.stringify(n))}),(0,n.A)(this,"_shouldSendEvent",(e,t,r,n)=>{if(!document.hasFocus())return"FocusLost";if(t!==s.v7.NONE&&!r||!n){let t=Date.now()-this._getMalformedLastSentTimestamp(e,r,n);return null===t||t>this._throttle?"UserOrTenantIncomplete":"MalformedUiViewedRateLimited"}let i=Date.now()-this._getLastSentTimestamp(e,r,n);return null===i||i>this._throttle?"EligibleToSend":"UiViewedRateLimited"}),(0,n.A)(this,"_handleInterval",()=>{let e=this._getContext(),{embeddedProduct:t}=e,r=(0,ej.A)(e,rk);this._sendEvent(this._product,r),t&&this._sendEvent(t,r,!0)}),(0,n.A)(this,"_sendEvent",(e,t,r=!1)=>{let{subproduct:n,tenantIdType:i,tenantId:o,userId:s,lastScreenEvent:a,attributes:c}=t,u=this._getProductKey(e,n);switch(this._shouldSendEvent(u,i,o,s)){case"EligibleToSend":this._setLastSentTimestamp(u,o,s),this._onEvent(this._createEvent(e,n,r,a,c,"ui","viewed"));break;case"UserOrTenantIncomplete":this._setMalformedLastSentTimestamp(u,o,s),this._onEvent(this._createEvent(e,n,r,a,c,"malformed","uiviewed"))}}),(0,n.A)(this,"_createEvent",(e,t,r,n,i,o,s)=>{let a={product:e,source:"ui",action:s,actionSubject:o,attributes:i};return r&&(a.subproduct=null,a.version=null,a.attributes=rx(rx({},a.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),n&&(a.attributes=rx(rx({},a.attributes),{},{lastScreenEvent:{name:n.name,attributes:n.attributes}})),a}),!e)throw Error("Missing productInfo");if(!e.product)throw Error("Missing productInfo.product");if(!t)throw Error("Missing getContext callback");if("function"!=typeof t)throw Error("Invalid getContext, must be function");if(!r)throw Error("Missing onEvent callback");if("function"!=typeof r)throw Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=i.delay||2e3,this._throttle=i.throttle||36e5,this._storageKey=i.storageKey||"ui.viewed.last.sent",this._malformedEventStorageKey=i.malformedStorageKey||"malformed.uiviewed.last.sent",this._safeLocalStorage=new tC({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function rN(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}let rL=function(e){return e.XC="xc",e.UID="uid",e}({});(function(e){e.NEW="NEW",e.CHANGED="CHANGED",e.EXISTING="EXISTING",e.TIMEOUT="TIMEOUT",e.ERROR="ERROR",e.UNAVAILABLE="UNAVAILABLE",e.MALFORMED="MALFORMED",e.UNKNOWN="UNKNOWN"})({});let rF=()=>[{type:rL.XC,state:"TIMEOUT"},{type:rL.UID,state:"TIMEOUT"}],rU=()=>[{type:rL.XC,state:"UNKNOWN"},{type:rL.UID,state:"UNKNOWN"}],rB=(e,t)=>{if(e&&t&&"function"==typeof t)return Promise.race([t().catch(()=>()=>rU()),new Promise(e=>{setTimeout(()=>e(()=>rF()),5e3)})])};var r$=r(73030);function rK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rK(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let rG="last.screen.event";class rH{static getCallback(e){return e=e||r$,t=>{rH.callback(t,e)}}static callback(e,t){let r=e.getStatusCode();r>=200&&r<=299?e.getEventResponseList().forEach(e=>{t.warn(`Validation report for event with message ID %s:
`,e.getMessageId(),e)}):400===r||404===r?(t.warn("GASv3 submission failed with HTTP Status Code %d: %s",e.getStatusCode(),e.getMessage()),e.getEventResponseList().forEach(e=>{t.warn(`Event with message ID %s:
`,e.getMessageId(),e)})):(t.log("GASv3 submission failed with HTTP Status Code %d: %s",e.getStatusCode(),e.getMessage()),e.eventResponseList.forEach(e=>{t.debug(`Event with message ID %s:
`,e.getMessageId(),e)}))}}class rW{constructor(e,t={}){if((0,n.A)(this,"_useStargate",e=>e??!0),(0,n.A)(this,"_changeInternalUserId",(e,t)=>{this._eventProcessor.getUser().setUserId(e),t&&t!==this._eventProcessor.getUser().getAnonymousId()&&this._eventProcessor.getUser().setAnonymousId(t)}),(0,n.A)(this,"_createSubproductGetter",e=>p(e,"Cannot get subproduct from the callback. Proceeding without it.")),(0,n.A)(this,"_createEmbeddedProductGetter",e=>p(e,"Cannot get embeddedProduct from the callback. Proceeding without it.")),(0,n.A)(this,"_getLastScreenEvent",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(rG)||"")}catch{return this._safeSessionStorage.removeItem(rG),null}}),(0,n.A)(this,"_setLastScreenEvent",e=>{this._safeSessionStorage.setItem(rG,JSON.stringify({name:e.name,attributes:e.attributes}))}),(0,n.A)(this,"_shouldEventBeDelayed",e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;let t=!1!==e.highPriority;return this._eventDelayQueue.isDelayingLowPriorityEvents()&&!t}),(0,n.A)(this,"_fireEvent",(e,t,r,n)=>{switch(t.eventType){case s.$q.UI:case s.$q.OPERATIONAL:case s.$q.TRACK:return this._eventProcessor.track(e,t,r,n);case s.$q.SCREEN:return this._eventProcessor.page(e,t,r,n);case s.$q.IDENTIFY:return this._eventProcessor.identify(e,t,r,n);default:throw Error(`No handler has been defined for events of type ${t.eventType}`)}}),(0,n.A)(this,"_fireDelayedEvent",(e,t,r,n)=>{try{this._changeInternalUserId(n.userId,n.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}}),(0,n.A)(this,"_delayEvent",(e,t,r,n,i)=>{this._eventDelayQueue.push(e,t,r,n),i&&i()}),(0,n.A)(this,"_processEvent",(e,t,r,n)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t)?(this._delayEvent(e,t,r,this._userInfo,n),Promise.resolve()):this._fireEvent(e,t,r,n))),(0,n.A)(this,"setEmbeddedProduct",e=>{this._internalProductInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()}),(0,n.A)(this,"clearEmbeddedProduct",()=>{this._internalProductInfo.embeddedProduct=this._createEmbeddedProductGetter(null)}),(0,n.A)(this,"setSubproduct",e=>{this._internalProductInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()}),(0,n.A)(this,"setOriginTracingHandlers",e=>{let t=this._originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach(e=>{"u">typeof t[e].taskSessionId&&this._task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)});let r={};return Object.keys(t).forEach(e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:r$.warn(`Handling method for origin parameter ${e} has not returned any attributes`)}),Object.keys(t).length>0?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},()=>{}):Promise.resolve()}),(0,n.A)(this,"setTenantInfo",(e,t)=>{if(!e)throw Error("Missing tenantIdType");if(e!==s.v7.NONE&&!t)throw Error("Missing tenantId");if(!(0,s.Xj)(s.v7,e))throw Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,s.KQ)(s.v7)}]`);this._tenantInfo={tenantIdType:e,tenantId:t},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,n.A)(this,"clearTenantInfo",()=>{this._tenantInfo={},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,n.A)(this,"setOrgInfo",e=>{if(!e)throw Error("Missing orgId");this._orgInfo={orgId:e}}),(0,n.A)(this,"clearOrgInfo",()=>{this._orgInfo={}}),(0,n.A)(this,"setWorkspaceInfo",e=>{if(!e)throw Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}}),(0,n.A)(this,"clearWorkspaceInfo",()=>{this._workspaceInfo={}}),(0,n.A)(this,"setUserInfo",(e,t)=>{(function(e,t){if(!e)throw Error("Missing userIdType");if(!t)throw Error("Missing userId");if(!(0,s.Xj)(s.Of,e))throw Error(`Invalid userIdType '${e}', must be an userType: [${(0,s.KQ)(s.Of)}]`)})(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this._eventProcessor.getUser().getAnonymousId()},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,n.A)(this,"clearUserInfo",()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this._eventProcessor.getUser().getAnonymousId()},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,n.A)(this,"setAlias",(e,t)=>{if(!e)throw Error("Missing aliasType");if(!(0,s.Xj)(s.VD,e))throw Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,s.KQ)(s.VD)}]`);this._aliases[e]=t}),(0,n.A)(this,"clearAlias",()=>{this._aliases={}}),(0,n.A)(this,"setGroup",(e,t)=>{if(!e)throw Error("Missing groupType");if(!(0,s.Xj)(s.iU,e))throw Error(`Invalid groupType '${e}', must be an groupType: [${(0,s.KQ)(s.iU)}]`);this._groups[e]=t}),(0,n.A)(this,"clearGroup",()=>{this._groups={}}),(0,n.A)(this,"getAnonymousId",()=>this._userInfo.anonymousId),(0,n.A)(this,"setUIViewedAttributes",e=>{if(!e)throw Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=rV({},e)}),(0,n.A)(this,"getUIViewedAttributes",()=>this._uiViewedAttributes),(0,n.A)(this,"clearUIViewedAttributes",()=>{this._uiViewedAttributes={}}),(0,n.A)(this,"sendIdentifyEvent",(e,t,r)=>{this.setUserInfo(e,t);let n={userIdType:e,eventType:s.$q.IDENTIFY};return this._processEvent(t,n,this._context,r)}),(0,n.A)(this,"sendPageEvent",(e,t)=>this.sendScreenEvent(e,t)),(0,n.A)(this,"sendScreenEvent",(e,t,r)=>{let n,i,o,a;"object"==typeof e?(n=e.name,i=e.attributes,o=e.containers,a=e.tags):(n=e,i=r),function(e){if(!e)throw Error("Missing name")}(n),W(o);let c=function(e,t,r,n,i,o,a,c,u,l,d,h,f,p,m,y){let g=D(e),v=O(t),b=w(r),T=A(l),C=I(h),R={title:"",path:"",url:"",referrer:"",search:"",eventType:s.$q.SCREEN};return E(E(E(E(E(E(E(E(E(E(E(E({},g),v),b),T),R),j("attributes",n)),j("nonPrivacySafeAttributes",i)),k(p)),P(f)),{},{tags:o,tabId:a,sessionId:c,taskSessions:u,pageLoadId:d},C),_(m)),S(y))}(this._internalProductInfo,this._tenantInfo,this._userInfo,i,e.nonPrivacySafeAttributes,a,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,o,this._aliases,this._groups),u=rV({name:n},c);return this._setLastScreenEvent(u),this._processEvent(n,u,this._context,rN(t,u))}),(0,n.A)(this,"sendTrackEvent",(e,t)=>{Q(e);let r=N(this._internalProductInfo,this._tenantInfo,this._userInfo,e,s.$q.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(x(e),r,this._context,rN(t,r))}),(0,n.A)(this,"sendUIEvent",(e,t)=>{Q(e);let r=N(this._internalProductInfo,this._tenantInfo,this._userInfo,e,s.$q.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(x(e),r,this._context,rN(t,r))}),(0,n.A)(this,"sendOperationalEvent",(e,t)=>{Q(e);let r=N(this._internalProductInfo,this._tenantInfo,this._userInfo,e,s.$q.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(x(e),r,this._context,rN(t,r))}),(0,n.A)(this,"startUIViewedEvent",e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new rM(this._internalProductInfo,()=>({embeddedProduct:this._internalProductInfo.embeddedProduct(),subproduct:this._internalProductInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),t=>this.sendUIEvent(t,e)),this._uiViewedEvent.start()}),(0,n.A)(this,"stopUIViewedEvent",()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)}),(0,n.A)(this,"resetUIViewedTimers",()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()}),(0,n.A)(this,"startApdexEvent",e=>{this._apdexEvent.start(e)}),(0,n.A)(this,"getApdexStart",e=>this._apdexEvent.getStart(e)),(0,n.A)(this,"stopApdexEvent",(e,t)=>{this._apdexEvent.stop(e,t)}),(0,n.A)(this,"startLowPriorityEventDelay",(e,t)=>{this._eventDelayQueue.startLowPriorityEventDelay(e,t)}),(0,n.A)(this,"stopLowPriorityEventDelay",()=>{this._eventDelayQueue.stopLowPriorityEventDelay()}),(0,n.A)(this,"onEvent",(e,t)=>{if(!t)throw Error("Missing analyticsData");if(!t.eventType)throw Error("Missing analyticsData.eventType");if(t.eventType===s.$q.TRACK)return this.sendTrackEvent(t);if(t.eventType===s.$q.UI)return this.sendUIEvent(t);if(t.eventType===s.$q.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===s.$q.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===s.$q.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,s.KQ)(s.$q)}]`)}),(0,n.A)(this,"setResponseCallback",e=>{this._eventProcessor.setResponseCallback(e)}),!e)throw Error("Missing productInfo");if(!e.env)throw Error("Missing productInfo.env");if(!e.product)throw Error("Missing productInfo.product");if(!(0,s.Xj)(s.sR,e.env))throw Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,s.KQ)(s.sR)}]`);if(e.perimeter&&!(0,s.Xj)(s.KW,e.perimeter))throw Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,s.KQ)(s.KW)}]`);if(e.origin){if(!(0,s.Xj)(s.VH,e.origin))throw Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,s.KQ)(s.VH)}]`)}else e.origin=s.VH.WEB;e.platform?function(e){if(!(0,s.Xj)(s.AQ,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,s.KQ)(s.AQ)}]`);if(e.origin===s.VH.DESKTOP&&!(0,s.Xj)(s.vB,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===s.VH.WEB&&!(0,s.Xj)(s.LK,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}(e):e.platform=e.origin===s.VH.WEB?s.AQ.WEB:s.AQ.DESKTOP,this._logger=t.logger||r$,this._internalProductInfo=rV(rV({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},null!=e&&e.embeddedContext&&(this._embeddedContext=e.embeddedContext,m(this._embeddedContext)&&this.setUIViewedAttributes({embeddedType:this._embeddedContext.embeddedType,embeddedFromProduct:this._embeddedContext.embeddedFromProduct,embeddedFromSubproduct:this._embeddedContext.embeddedFromSubproduct,embeddedFromTopLevelDomain:this._embeddedContext.embeddedFromTopLevelDomain}),y(this._embeddedContext)&&this.setUIViewedAttributes({embeddedType:this._embeddedContext.embeddedType,embeddedFromTopLevelDomain:this._embeddedContext.embeddedFromTopLevelDomain})),this._context=function(e){let t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"5.4.0"},validationMode:function(e){let t=e.env;return void 0===t||t.includes("prod")?M.QUIET:M.COMPLETE}(e)}}}(this._internalProductInfo),this._safeSessionStorage=new rb;let r=this._useStargate(t.useStargate),i=t.apiHost||function({useStargate:e,env:t,useLegacyUrl:r,perimeter:n,envOverride:i}){return n===s.KW.FEDRAMP_MODERATE?re({useStargate:e,env:t,useLegacyUrl:r,envOverride:i}):rt({useStargate:e,env:t,useLegacyUrl:r})}({useStargate:r,env:e.env,useLegacyUrl:t.useLegacyUrl,perimeter:e.perimeter,envOverride:e.envOverride}),c=t.apiHostProtocol||"https",u=t.minRetryDelay||1e3,l=void 0!==t.maxRetryAttempts&&Number.isInteger(t.maxRetryAttempts)&&t.maxRetryAttempts>=0?t.maxRetryAttempts+1:void 0,h={maxRetryDelay:6e4,minRetryDelay:u,backoffFactor:2,flushWaitMs:t.flushWaitInterval,flushBeforeUnload:t.flushBeforeUnload,maxAttempts:l},f=`awc-${e.env}`,g=t.disableCookiePersistence||!1,v=(t.metadataClientFactory||ru.Factory)(c,i,e.product);this._eventProcessor=new t7({apiHost:i,apiHostProtocol:c,product:e.product,retryQueuePrefix:f,retryQueueOptions:h,xidPromiseGetter:()=>rB(t.xidConsent,t.xidPromiseFn),logger:this._logger,metadataClient:v,disableCookiePersistence:g,responseCallback:rH.getCallback(this._logger),env:e.env,perimeter:e.perimeter,enableMetadataCalls:this.metadataCallsEnabled(t),enableEventCalls:this.eventCallsEnabled(t)}),this._userInfo={anonymousId:this._eventProcessor.getUser().getAnonymousId(t?.customAnonymousIdGenerator)},this._pageVisibility=new a,this._tabTracking=new rO,this._sessionTracking=new rv({sessionExpiryTime:t.sessionExpiryTime,onNewSessionStarted:t.onNewSessionStarted}),this._task=new rP,this._originTracing=new rf,this._apdexEvent=new d(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof t.historyReplaceFn?t.historyReplaceFn:rd,this._eventDelayQueue=new er(this._fireDelayedEvent,t.delayQueueCompressors||[]),this._testingCache=new rj,this._pageLoadId=o()(),this._workspaceInfo={},this._aliases={},this._groups={}}metadataCallsEnabled(e){return"boolean"==typeof e.disableMetadataCalls?!e.disableMetadataCalls:!rr.isGeminiVREnvironment()&&!rr.areFetchCallsDisabled()}eventCallsEnabled(e){return"boolean"==typeof e.disableEventCalls?!e.disableEventCalls:!rr.isGeminiVREnvironment()&&!rr.areFetchCallsDisabled()}setEventValidationMode(e){this._context.context.validationMode=e}get task(){return this._task}get _productInfo(){return this._internalProductInfo}}},93240:(e,t,r)=>{"use strict";r.d(t,{bJ:()=>a,tv:()=>c,vL:()=>o});var n=r(57832),i=r(51277),o={currentEnv:"local",envConfigs:{"test-server":{remoteModule:{origin:i.nj,pathname:void 0,searchParams:void 0},api:{origin:i.tN,pathname:i.tN,searchParams:void 0}},test:{remoteModule:{origin:i.nj,pathname:void 0,searchParams:void 0},api:{origin:i.q$,pathname:i.Uz,searchParams:void 0}},local:{remoteModule:{origin:i.nj,pathname:void 0,searchParams:void 0},api:{origin:i.q$,pathname:i.Uz,searchParams:void 0}},dev:{remoteModule:{origin:i.nj,pathname:void 0,searchParams:void 0},api:{origin:i.q$,pathname:i.Uz,searchParams:void 0}},staging:{remoteModule:{origin:i.Im,pathname:void 0,searchParams:void 0},api:{origin:void 0,pathname:i.Hp,searchParams:void 0}},"stg-fedm-east":{remoteModule:{origin:i.Im,pathname:void 0,searchParams:void 0},api:{origin:void 0,pathname:i.Hp,searchParams:void 0}},production:{remoteModule:{origin:i.VT,pathname:void 0,searchParams:void 0},api:{origin:void 0,pathname:i.Hp,searchParams:void 0}},"prod-fedm-east":{remoteModule:{origin:i.VT,pathname:void 0,searchParams:void 0},api:{origin:void 0,pathname:i.Hp,searchParams:void 0}}}},s=(0,n.createContext)(o),a=s.Provider,c=function(){return(0,n.useContext)(s)}},93339:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var n=r(57832);function i(e){return(0,n.useMemo)(function(){return e},Object.entries(e).sort().flatMap(function(e){return e}))}},93987:(e,t,r)=>{"use strict";r.d(t,{$q:()=>i,AQ:()=>o,D0:()=>f,KQ:()=>p,KW:()=>y,LK:()=>h,LR:()=>l,Of:()=>u,VD:()=>g,VH:()=>s,Xj:()=>m,iU:()=>v,sR:()=>n,v7:()=>a,vB:()=>d,vH:()=>c});let n=function(e){return e.LOCAL="local",e.DEV="dev",e.STAGING="staging",e.PROD="prod",e}({}),i=function(e){return e.TRACK="track",e.UI="ui",e.OPERATIONAL="operational",e.SCREEN="screen",e.IDENTIFY="identify",e}({}),o=function(e){return e.MAC="mac",e.LINUX="linux",e.WINDOWS="windows",e.DESKTOP="desktop",e.WEB="web",e.MOBILE_WEB="mobileWeb",e}({}),s=function(e){return e.DESKTOP="desktop",e.WEB="web",e}({}),a=function(e){return e.CLOUD_ID="cloudId",e.ORG_ID="orgId",e.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",e.HALP_TEAM_ID="halpTeamId",e.LOOM_ORG_ID="loomOrgId",e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e.TRELLO_WORKSPACE_ID="trelloWorkspaceId",e.JA_WORKSPACE_ID="jiraAlignWorkspaceId",e.NONE="none",e}({}),c=function(e){return e.FIRST_PARTY="FIRST_PARTY",e.THIRD_PARTY="THIRD_PARTY",e}({}),u=function(e){return e.ATLASSIAN_ACCOUNT="atlassianAccount",e.HASHED_EMAIL="hashedEmail",e.LOOM="loom",e.TRELLO="trello",e.OPSGENIE="opsgenie",e.JA_USER_ID="jiraAlign",e.HALP="halp",e}({}),l=function(e){return e.TRANSITION="transition",e.INITIAL_LOAD="initialLoad",e}({}),d=Object.freeze([o.DESKTOP,o.MAC,o.LINUX,o.WINDOWS]),h=Object.freeze([o.WEB,o.MOBILE_WEB]),f=function(e){return e.ATL_ORIGIN="atlOrigin",e}({});function p(e){return Object.values(e)}function m(e,t){return Object.values(e).indexOf(t)>-1}let y=function(e){return e.C5="c5",e.COMMERCIAL="commercial",e.FEDRAMP_MODERATE="fedramp-moderate",e.FEDRAMP_HIGH="fedramp-high",e}({}),g={},v=function(e){return e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e}({})},94303:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,{A:()=>i})},97687:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(77290);function i(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=(0,n.A)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}}}]);