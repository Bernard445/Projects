try{let t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="e7cbd4a1-52f9-4e2e-800f-671c643f007b",t._sentryDebugIdIdentifier="sentry-dbid-e7cbd4a1-52f9-4e2e-800f-671c643f007b")}catch(t){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"033c9e7"},(self.webpackChunk_loomhq_web_client=self.webpackChunk_loomhq_web_client||[]).push([[6955],{296:(t,e,r)=>{var n=r(76954),o=r(95536),i=r(22770),s=r(71436),a=r(23067),l=r(8822),c=r(18645),h=r(52084),p=r(83973).Buffer;t.exports=function(t,e,r){d=t.padding?t.padding:r?1:4;var d,f,u=n(t);if(4===d)f=function(t,e){var r=t.modulus.byteLength(),n=e.length,c=i("sha1").update(p.alloc(0)).digest(),h=c.length,d=2*h;if(n>r-d-2)throw Error("message too long");var f=p.alloc(r-n-d-2),u=r-h-1,m=o(h),g=a(p.concat([c,f,p.alloc(1,1),e],u),s(m,u)),v=a(m,s(g,h));return new l(p.concat([p.alloc(1),v,g],r))}(u,e);else if(1===d)f=function(t,e,r){var n,i=e.length,s=t.modulus.byteLength();if(i>s-11)throw Error("message too long");return n=r?p.alloc(s-i-3,255):function(t){for(var e,r=p.allocUnsafe(t),n=0,i=o(2*t),s=0;n<t;)s===i.length&&(i=o(2*t),s=0),(e=i[s++])&&(r[n++]=e);return r}(s-i-3),new l(p.concat([p.from([0,r?1:2]),n,p.alloc(1),e],s))}(u,e,r);else if(3===d){if((f=new l(e)).cmp(u.modulus)>=0)throw Error("data too long for modulus")}else throw Error("unknown padding");return r?h(f,u):c(f,u)}},5657:(t,e,r)=>{"use strict";r.d(e,{$L:()=>T,Ln:()=>m,N0:()=>x,Um:()=>D,Wg:()=>g,X9:()=>s,dL:()=>B,jP:()=>w,n9:()=>C,oM:()=>b,zy:()=>O});var n=r(67271);class o{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class i{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&i.empty)return i.empty}recover(t){let e=0,r=65535&t;if(!this.inverted)for(let t=0;t<r;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*r]+e+(t-(65535&t))/65536}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let n=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>t)break;let c=this.ranges[a+i],h=this.ranges[a+s],p=l+c;if(t<=p){let i=c?t==l?-1:t==p?1:e:e,s=l+n+(i<0?0:h);if(r)return s;let d=t==(e<0?l:p)?null:a/3+(t-l)*65536,f=t==l?2:t==p?1:4;return(e<0?t!=l:t!=p)&&(f|=8),new o(s,f,d)}n+=h-c}return r?t+n:new o(t+n,0,null)}touches(t,e){let r=0,n=65535&e,o=this.inverted?2:1,i=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?r:0);if(s>t)break;let a=this.ranges[e+o];if(t<=s+a&&e==3*n)return!0;r+=this.ranges[e+i]-a}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,o=0;n<this.ranges.length;n+=3){let i=this.ranges[n],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[n+e],c=this.ranges[n+r];t(s,s+l,a,a+c),o+=c-l}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?i.empty:new i(t<0?[0,-t,0]:[0,0,t])}}i.empty=new i([]);class s{constructor(t,e,r=0,n=t?t.length:0){this.mirror=e,this.from=r,this.to=n,this._maps=t||[],this.ownData=!(t||e)}get maps(){return this._maps}slice(t=0,e=this.maps.length){return new s(this._maps,this.mirror,t,e)}appendMap(t,e){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),null!=e&&this.setMirror(this._maps.length-1,e)}appendMapping(t){for(let e=0,r=this._maps.length;e<t._maps.length;e++){let n=t.getMirror(e);this.appendMap(t._maps[e],null!=n&&n<e?r+n:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,r=this._maps.length+t._maps.length;e>=0;e--){let n=t.getMirror(e);this.appendMap(t._maps[e].invert(),null!=n&&n>e?r-n-1:void 0)}}invert(){let t=new s;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,r){let n=0;for(let r=this.from;r<this.to;r++){let o=this._maps[r].mapResult(t,e);if(null!=o.recover){let e=this.getMirror(r);if(null!=e&&e>r&&e<this.to){r=e,t=this._maps[e].recover(o.recover);continue}}n|=o.delInfo,t=o.pos}return r?t:new o(t,n,null)}}let a=Object.create(null);class l{getMap(){return i.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw RangeError("Invalid input for Step.fromJSON");let r=a[e.stepType];if(!r)throw RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in a)throw RangeError("Duplicate use of step JSON ID "+t);return a[t]=e,e.prototype.jsonID=t,e}}class c{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new c(t,null)}static fail(t){return new c(null,t)}static fromReplace(t,e,r,o){try{return c.ok(t.replace(e,r,o))}catch(t){if(t instanceof n.vI)return c.fail(t.message);throw t}}}function h(t,e,r){let o=[];for(let n=0;n<t.childCount;n++){let i=t.child(n);i.content.size&&(i=i.copy(h(i.content,e,i))),i.isInline&&(i=e(i,r,n)),o.push(i)}return n.FK.fromArray(o)}class p extends l{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new n.Ji(h(e.content,(t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t,o),e.openStart,e.openEnd);return c.fromReplace(t,this.from,this.to,i)}invert(){return new d(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new p(e.pos,r.pos,this.mark)}merge(t){return t instanceof p&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new p(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new p(e.from,e.to,t.markFromJSON(e.mark))}}l.jsonID("addMark",p);class d extends l{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new n.Ji(h(e.content,t=>t.mark(this.mark.removeFromSet(t.marks)),t),e.openStart,e.openEnd);return c.fromReplace(t,this.from,this.to,r)}invert(){return new p(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new d(e.pos,r.pos,this.mark)}merge(t){return t instanceof d&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new d(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new d(e.from,e.to,t.markFromJSON(e.mark))}}l.jsonID("removeMark",d);class f extends l{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return c.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(t))return new f(this.pos,e.marks[r]);return new f(this.pos,this.mark)}}return new u(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new f(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new f(e.pos,t.markFromJSON(e.mark))}}l.jsonID("addNodeMark",f);class u extends l{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return c.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new f(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new u(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new u(e.pos,t.markFromJSON(e.mark))}}l.jsonID("removeNodeMark",u);class m extends l{constructor(t,e,r,n=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=n}apply(t){return this.structure&&v(t,this.from,this.to)?c.fail("Structure replace would overwrite content"):c.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new i([this.from,this.to-this.from,this.slice.size])}invert(t){return new m(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new m(e.pos,Math.max(e.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof m)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new m(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new m(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new m(e.from,e.to,n.Ji.fromJSON(t,e.slice),!!e.structure)}}l.jsonID("replace",m);class g extends l{constructor(t,e,r,n,o,i,s=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=n,this.slice=o,this.insert=i,this.structure=s}apply(t){if(this.structure&&(v(t,this.from,this.gapFrom)||v(t,this.gapTo,this.to)))return c.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return c.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?c.fromReplace(t,this.from,this.to,r):c.fail("Content does not fit in gap")}getMap(){return new i([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new g(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),n=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||n<e.pos||o>r.pos?null:new g(e.pos,r.pos,n,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new g(e.from,e.to,e.gapFrom,e.gapTo,n.Ji.fromJSON(t,e.slice),e.insert,!!e.structure)}}function v(t,e,r){let n=t.resolve(e),o=r-e,i=n.depth;for(;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0){let t=n.node(i).maybeChild(n.indexAfter(i));for(;o>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,o--}}return!1}function y(t,e,r,o=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),a=[],l=e+1;for(let e=0;e<s.childCount;e++){let c=s.child(e),h=l+c.nodeSize,p=o.matchType(c.type);if(p){o=p;for(let e=0;e<c.marks.length;e++)r.allowsMarkType(c.marks[e].type)||t.step(new d(l,h,c.marks[e]));if(i&&c.isText&&"pre"!=r.whitespace){let t,e=/\r?\n|\r/g,o;for(;t=e.exec(c.text);)o||(o=new n.Ji(n.FK.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),a.push(new m(l+t.index,l+t.index+t[0].length,o))}}else a.push(new m(l,h,n.Ji.empty));l=h}if(!o.validEnd){let e=o.fillBefore(n.FK.empty,!0);t.replace(l,l,new n.Ji(e,0,0))}for(let e=a.length-1;e>=0;e--)t.step(a[e])}function w(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let n=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&n.canReplace(o,i,e))return r;if(0==r||n.type.spec.isolating||!((0==o||n.canReplace(o,n.childCount))&&(i==n.childCount||n.canReplace(0,i))))break}return null}function b(t,e,r=null,n=t){let o=function(t,e){let{parent:r,startIndex:n,endIndex:o}=t,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return r.canReplaceWith(n,o,s)?i:null}(t,e),i=o&&function(t,e){let{parent:r,startIndex:n,endIndex:o}=t,i=r.child(n),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let t=n;a&&t<o;t++)a=a.matchType(r.child(t).type);return a&&a.validEnd?s:null}(n,e);return i?o.map(k).concat({type:e,attrs:r}).concat(i.map(k)):null}function k(t){return{type:t,attrs:null}}function S(t,e,r,n){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let o=t.mapping.slice(n).map(r+1+i+s.index);t.replaceWith(o,o+1,e.type.schema.linebreakReplacement.create())}}})}function N(t,e,r,n){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function O(t,e,r=1,n){let o=t.resolve(e),i=o.depth-r,s=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let t=o.depth-1,e=r-2;t>i;t--,e--){let r=o.node(t),i=o.index(t);if(r.type.spec.isolating)return!1;let s=r.content.cutByIndex(i,r.childCount),a=n&&n[e+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let l=n&&n[e]||r;if(!r.canReplace(i+1,r.childCount)||!l.type.validContent(s))return!1}let a=o.indexAfter(i),l=n&&n[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function C(t,e){let r=t.resolve(e),n=r.index();return M(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function M(t,e){return!!(t&&e&&!t.isLeaf&&function(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==n?t.type.schema.nodes.text:i.type;if(!(r=r.matchType(s))||!t.type.allowsMarks(i.marks))return!1}return r.validEnd}(t,e))}function x(t,e,r=-1){let n=t.resolve(e);for(let t=n.depth;;t--){let o,i,s=n.index(t);if(t==n.depth?(o=n.nodeBefore,i=n.nodeAfter):r>0?(o=n.node(t+1),s++,i=n.node(t).maybeChild(s)):(o=n.node(t).maybeChild(s-1),i=n.node(t+1)),o&&!o.isTextblock&&M(o,i)&&n.node(t).canReplace(s,s+1))return e;if(0==t)break;e=r<0?n.before(t):n.after(t)}}function D(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let o=r.content;for(let t=0;t<r.openStart;t++)o=o.firstChild.content;for(let t=1;t<=(0==r.openStart&&r.size?2:1);t++)for(let e=n.depth;e>=0;e--){let r=e==n.depth?0:n.pos<=(n.start(e+1)+n.end(e+1))/2?-1:1,i=n.index(e)+(r>0?1:0),s=n.node(e),a=!1;if(1==t)a=s.canReplace(i,i,o);else{let t=s.contentMatchAt(i).findWrapping(o.firstChild.type);a=t&&s.canReplaceWith(i,i,t[0])}if(a)return 0==r?n.pos:r<0?n.before(e+1):n.after(e+1)}return null}function T(t,e,r=e,o=n.Ji.empty){if(e==r&&!o.size)return null;let i=t.resolve(e),s=t.resolve(r);return A(i,s,o)?new m(e,r,o):new E(i,s,o).fit()}function A(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}l.jsonID("replaceAround",g);class E{constructor(t,e,r){this.$from=t,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=n.FK.empty;for(let e=0;e<=t.depth;e++){let r=t.node(e);this.frontier.push({type:r.type,match:r.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=n.FK.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;let l=new n.Ji(i,s,a);return t>-1?new g(r.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||r.pos!=this.$to.pos?new m(r.pos,o.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,n=this.unplaced.openEnd;r<t;r++){let o=e.firstChild;if(e.childCount>1&&(n=0),o.type.spec.isolating&&n<=r){t=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=1==e?t:this.unplaced.openStart;r>=0;r--){let t=null,o=(r?(t=I(this.unplaced.content,r-1).firstChild).content:this.unplaced.content).firstChild;for(let i=this.depth;i>=0;i--){let{type:s,match:a}=this.frontier[i],l,c=null;if(1==e&&(o?a.matchType(o.type)||(c=a.fillBefore(n.FK.from(o),!1)):t&&s.compatibleContent(t.type)))return{sliceDepth:r,frontierDepth:i,parent:t,inject:c};if(2==e&&o&&(l=a.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:i,parent:t,wrap:l};if(t&&a.matchType(t.type))break}}}openMore(){let{content:t,openStart:e,openEnd:r}=this.unplaced,o=I(t,e);return!!o.childCount&&!o.firstChild.isLeaf&&(this.unplaced=new n.Ji(t,e+1,Math.max(r,o.size+e>=t.size-r?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:r}=this.unplaced,o=I(t,e);if(o.childCount<=1&&e>0){let i=t.size-e<=e+o.size;this.unplaced=new n.Ji(R(t,e-1,1),e-1,i?e-1:r)}else this.unplaced=new n.Ji(R(t,e,1),e,r)}placeNodes({sliceDepth:t,frontierDepth:e,parent:r,inject:o,wrap:i}){for(;this.depth>e;)this.closeFrontierNode();if(i)for(let t=0;t<i.length;t++)this.openFrontierNode(i[t]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,h=[],{match:p,type:d}=this.frontier[e];if(o){for(let t=0;t<o.childCount;t++)h.push(o.child(t));p=p.matchFragment(o)}let f=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let t=a.child(c),e=p.matchType(t.type);if(!e)break;(++c>1||0==l||t.content.size)&&(p=e,h.push(function t(e,r,o){if(r<=0)return e;let i=e.content;return r>1&&(i=i.replaceChild(0,t(i.firstChild,r-1,1==i.childCount?o-1:0))),r>0&&(i=e.type.contentMatch.fillBefore(i).append(i),o<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(n.FK.empty,!0)))),e.copy(i)}(t.mark(d.allowedMarks(t.marks)),1==c?l:0,c==a.childCount?f:-1)))}let u=c==a.childCount;u||(f=-1),this.placed=F(this.placed,e,n.FK.from(h)),this.frontier[e].match=p,u&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=a;t<f;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=u?0==t?n.Ji.empty:new n.Ji(R(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new n.Ji(R(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!J(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return -1;let{depth:r}=this.$to,n=this.$to.after(r);for(;r>1&&n==this.$to.end(--r);)++n;return n}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:r,type:n}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),i=J(t,e,n,r,o);if(i){for(let r=e-1;r>=0;r--){let{match:e,type:n}=this.frontier[r],o=J(t,r,n,e,!0);if(!o||o.childCount)continue t}return{depth:e,fit:i,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=F(this.placed,e.depth,e.fit)),t=e.move;for(let r=e.depth+1;r<=t.depth;r++){let e=t.node(r),n=e.type.contentMatch.fillBefore(e.content,!0,t.index(r));this.openFrontierNode(e.type,e.attrs,n)}return t}openFrontierNode(t,e=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=F(this.placed,this.depth,n.FK.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(n.FK.empty,!0);t.childCount&&(this.placed=F(this.placed,this.frontier.length,t))}}function R(t,e,r){return 0==e?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(R(t.firstChild.content,e-1,r)))}function F(t,e,r){return 0==e?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(F(t.lastChild.content,e-1,r)))}function I(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function J(t,e,r,n,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!r.compatibleContent(i.type))return null;let a=n.fillBefore(i.content,!0,s);return a&&!function(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(r,i.content,s)?a:null}function z(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let o=n;o>=0;o--){let n=t.start(o);if(n<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(n==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==n-1)&&r.push(o)}return r}class j extends l{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at attribute step's position");let r=Object.create(null);for(let t in e.attrs)r[t]=e.attrs[t];r[this.attr]=this.value;let o=e.type.create(r,null,e.marks);return c.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(o),0,e.isLeaf?0:1))}getMap(){return i.empty}invert(t){return new j(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new j(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new j(e.pos,e.attr,e.value)}}l.jsonID("attr",j);class P extends l{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return c.ok(r)}getMap(){return i.empty}invert(t){return new P(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new P(e.attr,e.value)}}l.jsonID("docAttr",P);let $=class extends Error{};($=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r}).prototype=Object.create(Error.prototype),$.prototype.constructor=$,$.prototype.name="TransformError";class B{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new s}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new $(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,r=n.Ji.empty){let o=T(this.doc,t,e,r);return o&&this.step(o),this}replaceWith(t,e,r){return this.replace(t,e,new n.Ji(n.FK.from(r),0,0))}delete(t,e){return this.replace(t,e,n.Ji.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,r){return function(t,e,r,o){if(!o.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(A(i,s,o))return t.step(new m(e,r,o));let a=z(i,t.doc.resolve(r));0==a[a.length-1]&&a.pop();let l=-(i.depth+1);a.unshift(l);for(let t=i.depth,e=i.pos-1;t>0;t--,e--){let r=i.node(t).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;a.indexOf(t)>-1?l=t:i.before(t)==e&&a.splice(1,0,-t)}let c=a.indexOf(l),h=[],p=o.openStart;for(let t=o.content,e=0;;e++){let r=t.firstChild;if(h.push(r),e==o.openStart)break;t=r.content}for(let t=p-1;t>=0;t--){var d;let e=h[t],r=(d=e.type).spec.defining||d.spec.definingForContent;if(r&&!e.sameMarkup(i.node(Math.abs(l)-1)))p=t;else if(r||!e.type.isTextblock)break}for(let e=o.openStart;e>=0;e--){let l=(e+p+1)%(o.openStart+1),d=h[l];if(d)for(let e=0;e<a.length;e++){let h=a[(e+c)%a.length],p=!0;h<0&&(p=!1,h=-h);let f=i.node(h-1),u=i.index(h-1);if(f.canReplaceWith(u,u,d.type,d.marks))return t.replace(i.before(h),p?s.after(h):r,new n.Ji(function t(e,r,o,i,s){if(r<o){let n=e.firstChild;e=e.replaceChild(0,n.copy(t(n.content,r+1,o,i,n)))}if(r>i){let t=s.contentMatchAt(0),r=t.fillBefore(e).append(e);e=r.append(t.matchFragment(r).fillBefore(n.FK.empty,!0))}return e}(o.content,0,o.openStart,l),l,o.openEnd))}}let f=t.steps.length;for(let n=a.length-1;n>=0&&(t.replace(e,r,o),!(t.steps.length>f));n--){let t=a[n];t<0||(e=i.before(t),r=s.after(t))}}(this,t,e,r),this}replaceRangeWith(t,e,r){return function(t,e,r,o){if(!o.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let n=function(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(let t=n.depth-1;t>=0;t--){let e=n.index(t);if(n.node(t).canReplaceWith(e,e,r))return n.before(t+1);if(e>0)return null}if(n.parentOffset==n.parent.content.size)for(let t=n.depth-1;t>=0;t--){let e=n.indexAfter(t);if(n.node(t).canReplaceWith(e,e,r))return n.after(t+1);if(e<n.node(t).childCount)break}return null}(t.doc,e,o.type);null!=n&&(e=r=n)}t.replaceRange(e,r,new n.Ji(n.FK.from(o),0,0))}(this,t,e,r),this}deleteRange(t,e){return function(t,e,r){let n=t.doc.resolve(e),o=t.doc.resolve(r),i=z(n,o);for(let e=0;e<i.length;e++){let r=i[e],s=e==i.length-1;if(s&&0==r||n.node(r).type.contentMatch.validEnd)return t.delete(n.start(r),o.end(r));if(r>0&&(s||n.node(r-1).canReplace(n.index(r-1),o.indexAfter(r-1))))return t.delete(n.before(r),o.after(r))}for(let i=1;i<=n.depth&&i<=o.depth;i++)if(e-n.start(i)==n.depth-i&&r>n.end(i)&&o.end(i)-r!=o.depth-i&&n.start(i-1)==o.start(i-1)&&n.node(i-1).canReplace(n.index(i-1),o.index(i-1)))return t.delete(n.before(i),r);t.delete(e,r)}(this,t,e),this}lift(t,e){return function(t,e,r){let{$from:o,$to:i,depth:s}=e,a=o.before(s+1),l=i.after(s+1),c=a,h=l,p=n.FK.empty,d=0;for(let t=s,e=!1;t>r;t--)e||o.index(t)>0?(e=!0,p=n.FK.from(o.node(t).copy(p)),d++):c--;let f=n.FK.empty,u=0;for(let t=s,e=!1;t>r;t--)e||i.after(t+1)<i.end(t)?(e=!0,f=n.FK.from(i.node(t).copy(f)),u++):h++;t.step(new g(c,h,a,l,new n.Ji(p.append(f),d,u),p.size-d,!0))}(this,t,e),this}join(t,e=1){return function(t,e,r){let o=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),a=s.node().type;if(i&&a.inlineContent){let t="pre"==a.whitespace,e=!!a.contentMatch.matchType(i);t&&!e?o=!1:!t&&e&&(o=!0)}let l=t.steps.length;if(!1===o){let n=t.doc.resolve(e+r);N(t,n.node(),n.before(),l)}a.inlineContent&&y(t,e+r-1,a,s.node().contentMatchAt(s.index()),null==o);let c=t.mapping.slice(l),h=c.map(e-r);if(t.step(new m(h,c.map(e+r,-1),n.Ji.empty,!0)),!0===o){let e=t.doc.resolve(h);S(t,e.node(),e.before(),t.steps.length)}}(this,t,e),this}wrap(t,e){return function(t,e,r){let o=n.FK.empty;for(let t=r.length-1;t>=0;t--){if(o.size){let e=r[t].type.contentMatch.matchFragment(o);if(!e||!e.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=n.FK.from(r[t].type.create(r[t].attrs,o))}let i=e.start,s=e.end;t.step(new g(i,s,i,s,new n.Ji(o,0,0),r.length,!0))}(this,t,e),this}setBlockType(t,e=t,r,o=null){return function(t,e,r,o,i){if(!o.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(e,r)=>{var a,l;let c,h,p="function"==typeof i?i(e):i;if(e.isTextblock&&!e.hasMarkup(o,p)&&(a=t.doc,l=t.mapping.slice(s).map(r),h=(c=a.resolve(l)).index(),c.parent.canReplaceWith(h,h+1,o))){let i=null;if(o.schema.linebreakReplacement){let t="pre"==o.whitespace,e=!!o.contentMatch.matchType(o.schema.linebreakReplacement);t&&!e?i=!1:!t&&e&&(i=!0)}!1===i&&N(t,e,r,s),y(t,t.mapping.slice(s).map(r,1),o,void 0,null===i);let a=t.mapping.slice(s),l=a.map(r,1),c=a.map(r+e.nodeSize,1);return t.step(new g(l,c,l+1,c-1,new n.Ji(n.FK.from(o.create(p,null,e.marks)),0,0),1,!0)),!0===i&&S(t,e,r,s),!1}})}(this,t,e,r,o),this}setNodeMarkup(t,e,r=null,o){return function(t,e,r,o,i){let s=t.doc.nodeAt(e);if(!s)throw RangeError("No node at given position");r||(r=s.type);let a=r.create(o,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!r.validContent(s.content))throw RangeError("Invalid content for node type "+r.name);t.step(new g(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new n.Ji(n.FK.from(a),0,0),1,!0))}(this,t,e,r,o),this}setNodeAttribute(t,e,r){return this.step(new j(t,e,r)),this}setDocAttribute(t,e){return this.step(new P(t,e)),this}addNodeMark(t,e){return this.step(new f(t,e)),this}removeNodeMark(t,e){let r=this.doc.nodeAt(t);if(!r)throw RangeError("No node at position "+t);if(e instanceof n.CU)e.isInSet(r.marks)&&this.step(new u(t,e));else{let n=r.marks,o,i=[];for(;o=e.isInSet(n);)i.push(new u(t,o)),n=o.removeFromSet(n);for(let t=i.length-1;t>=0;t--)this.step(i[t])}return this}split(t,e=1,r){return function(t,e,r=1,o){let i=t.doc.resolve(e),s=n.FK.empty,a=n.FK.empty;for(let t=i.depth,e=i.depth-r,l=r-1;t>e;t--,l--){s=n.FK.from(i.node(t).copy(s));let e=o&&o[l];a=n.FK.from(e?e.type.create(e.attrs,a):i.node(t).copy(a))}t.step(new m(e,e,new n.Ji(s.append(a),r,r),!0))}(this,t,e,r),this}addMark(t,e,r){var n;let o,i,s,a;return n=this,o=[],i=[],n.doc.nodesBetween(t,e,(n,l,c)=>{if(!n.isInline)return;let h=n.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),f=Math.min(l+n.nodeSize,e),u=r.addToSet(h);for(let t=0;t<h.length;t++)h[t].isInSet(u)||(s&&s.to==c&&s.mark.eq(h[t])?s.to=f:o.push(s=new d(c,f,h[t])));a&&a.to==c?a.to=f:i.push(a=new p(c,f,r))}}),o.forEach(t=>n.step(t)),i.forEach(t=>n.step(t)),this}removeMark(t,e,r){var o;let i,s;return o=this,i=[],s=0,o.doc.nodesBetween(t,e,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof n.sX){let t=o.marks,e;for(;e=r.isInSet(t);)(l||(l=[])).push(e),t=e.removeFromSet(t)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let r=Math.min(a+o.nodeSize,e);for(let e=0;e<l.length;e++){let n=l[e],o;for(let t=0;t<i.length;t++){let e=i[t];e.step==s-1&&n.eq(i[t].style)&&(o=e)}o?(o.to=r,o.step=s):i.push({style:n,from:Math.max(a,t),to:r,step:s})}}}),i.forEach(t=>o.step(new d(t.from,t.to,t.style))),this}clearIncompatible(t,e,r){return y(this,t,e,r),this}}},7220:function(t,e,r){var n;t=r.nmd(t),function(o){var i=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,a="object"==typeof r.g&&r.g;(a.global===a||a.window===a||a.self===a)&&(o=a);var l,c,h=/^xn--/,p=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,m=String.fromCharCode;function g(t){throw RangeError(f[t])}function v(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function y(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+v((t=t.replace(d,".")).split("."),e).join(".")}function w(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?(64512&(r=t.charCodeAt(o++)))==56320?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function b(t){return v(t,function(t){var e="";return t>65535&&(t-=65536,e+=m(t>>>10&1023|55296),t=56320|1023&t),e+=m(t)}).join("")}function k(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,r){var n=0;for(t=r?u(t/700):t>>1,t+=u(t/e);t>455;n+=36)t=u(t/35);return u(n+36*t/(t+38))}function N(t){var e,r,n,o,i,s,a,l,c,h,p,d=[],f=t.length,m=0,v=128,y=72;for((n=t.lastIndexOf("-"))<0&&(n=0),o=0;o<n;++o)t.charCodeAt(o)>=128&&g("not-basic"),d.push(t.charCodeAt(o));for(i=n>0?n+1:0;i<f;){for(s=m,a=1,l=36;i>=f&&g("invalid-input"),((c=(e=t.charCodeAt(i++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36)>=36||c>u((2147483647-m)/a))&&g("overflow"),m+=c*a,!(c<(h=l<=y?1:l>=y+26?26:l-y));l+=36)a>u(2147483647/(p=36-h))&&g("overflow"),a*=p;y=S(m-s,r=d.length+1,0==s),u(m/r)>2147483647-v&&g("overflow"),v+=u(m/r),m%=r,d.splice(m++,0,v)}return b(d)}function O(t){var e,r,n,o,i,s,a,l,c,h,p,d,f,v,y,b=[];for(d=(t=w(t)).length,e=128,r=0,i=72,s=0;s<d;++s)(p=t[s])<128&&b.push(m(p));for(n=o=b.length,o&&b.push("-");n<d;){for(a=2147483647,s=0;s<d;++s)(p=t[s])>=e&&p<a&&(a=p);for(a-e>u((2147483647-r)/(f=n+1))&&g("overflow"),r+=(a-e)*f,e=a,s=0;s<d;++s)if((p=t[s])<e&&++r>2147483647&&g("overflow"),p==e){for(l=r,c=36;!(l<(h=c<=i?1:c>=i+26?26:c-i));c+=36)y=l-h,v=36-h,b.push(m(k(h+y%v,0))),l=u(y/v);b.push(m(k(l,0))),i=S(r,f,n==o),r=0,++n}++r,++e}return b.join("")}if(l={version:"1.3.2",ucs2:{decode:w,encode:b},decode:N,encode:O,toASCII:function(t){return y(t,function(t){return p.test(t)?"xn--"+O(t):t})},toUnicode:function(t){return y(t,function(t){return h.test(t)?N(t.slice(4).toLowerCase()):t})}},r.amdO)void 0!==(n=(function(){return l}).call(e,r,e,t))&&(t.exports=n);else if(i&&s){if(t.exports==i)s.exports=l;else for(c in l)l.hasOwnProperty(c)&&(i[c]=l[c])}else o.punycode=l}(this)},10636:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>g});let n=/^xn--/,o=/[^\0-\x7F]/,i=/[\x2E\u3002\uFF0E\uFF61]/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=Math.floor,l=String.fromCharCode;function c(t){throw RangeError(s[t])}function h(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(i,".");let o=t.split("."),s=(function(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r})(o,e).join(".");return n+s}function p(t){let e=[],r=0,n=t.length;for(;r<n;){let o=t.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){let n=t.charCodeAt(r++);(64512&n)==56320?e.push(((1023&o)<<10)+(1023&n)+65536):(e.push(o),r--)}else e.push(o)}return e}let d=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},f=function(t,e,r){let n=0;for(t=r?a(t/700):t>>1,t+=a(t/e);t>455;n+=36)t=a(t/35);return a(n+36*t/(t+38))},u=function(t){let e=[],r=t.length,n=0,o=128,i=72,s=t.lastIndexOf("-");s<0&&(s=0);for(let r=0;r<s;++r)t.charCodeAt(r)>=128&&c("not-basic"),e.push(t.charCodeAt(r));for(let h=s>0?s+1:0;h<r;){let s=n;for(let e=1,o=36;;o+=36){var l;h>=r&&c("invalid-input");let s=(l=t.charCodeAt(h++))>=48&&l<58?26+(l-48):l>=65&&l<91?l-65:l>=97&&l<123?l-97:36;s>=36&&c("invalid-input"),s>a((2147483647-n)/e)&&c("overflow"),n+=s*e;let p=o<=i?1:o>=i+26?26:o-i;if(s<p)break;let d=36-p;e>a(2147483647/d)&&c("overflow"),e*=d}let p=e.length+1;i=f(n-s,p,0==s),a(n/p)>2147483647-o&&c("overflow"),o+=a(n/p),n%=p,e.splice(n++,0,o)}return String.fromCodePoint(...e)},m=function(t){let e=[];t=p(t);let r=t.length,n=128,o=0,i=72;for(let r of t)r<128&&e.push(l(r));let s=e.length,h=s;for(s&&e.push("-");h<r;){let r=2147483647;for(let e of t)e>=n&&e<r&&(r=e);let p=h+1;for(let u of(r-n>a((2147483647-o)/p)&&c("overflow"),o+=(r-n)*p,n=r,t))if(u<n&&++o>2147483647&&c("overflow"),u===n){let t=o;for(let r=36;;r+=36){let n=r<=i?1:r>=i+26?26:r-i;if(t<n)break;let o=t-n,s=36-n;e.push(l(d(n+o%s,0))),t=a(o/s)}e.push(l(d(t,0))),i=f(o,p,h===s),o=0,++h}++o,++n}return e.join("")},g={version:"2.3.1",ucs2:{decode:p,encode:t=>String.fromCodePoint(...t)},decode:u,encode:m,toASCII:function(t){return h(t,function(t){return o.test(t)?"xn--"+m(t):t})},toUnicode:function(t){return h(t,function(t){return n.test(t)?u(t.slice(4).toLowerCase()):t})}}},18645:(t,e,r)=>{var n=r(8822),o=r(83973).Buffer;t.exports=function(t,e){return o.from(t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed().toArray())}},21398:(t,e,r)=>{"use strict";r.d(e,{NZ:()=>ew,zF:()=>eN,Lz:()=>eI});var n=r(57815),o=r(67271);class i{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class s{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&s.empty)return s.empty}recover(t){let e=0,r=65535&t;if(!this.inverted)for(let t=0;t<r;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*r]+e+(t-(65535&t))/65536}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let n=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>t)break;let c=this.ranges[a+o],h=this.ranges[a+s],p=l+c;if(t<=p){let o=c?t==l?-1:t==p?1:e:e,s=l+n+(o<0?0:h);if(r)return s;let d=t==(e<0?l:p)?null:a/3+(t-l)*65536,f=t==l?2:t==p?1:4;return(e<0?t!=l:t!=p)&&(f|=8),new i(s,f,d)}n+=h-c}return r?t+n:new i(t+n,0,null)}touches(t,e){let r=0,n=65535&e,o=this.inverted?2:1,i=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?r:0);if(s>t)break;let a=this.ranges[e+o];if(t<=s+a&&e==3*n)return!0;r+=this.ranges[e+i]-a}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,o=0;n<this.ranges.length;n+=3){let i=this.ranges[n],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[n+e],c=this.ranges[n+r];t(s,s+l,a,a+c),o+=c-l}}invert(){return new s(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?s.empty:new s(t<0?[0,-t,0]:[0,0,t])}}s.empty=new s([]);let a=Object.create(null);class l{getMap(){return s.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw RangeError("Invalid input for Step.fromJSON");let r=a[e.stepType];if(!r)throw RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in a)throw RangeError("Duplicate use of step JSON ID "+t);return a[t]=e,e.prototype.jsonID=t,e}}class c{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new c(t,null)}static fail(t){return new c(null,t)}static fromReplace(t,e,r,n){try{return c.ok(t.replace(e,r,n))}catch(t){if(t instanceof o.vI)return c.fail(t.message);throw t}}}function h(t,e,r){let n=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(h(i.content,e,i))),i.isInline&&(i=e(i,r,o)),n.push(i)}return o.FK.fromArray(n)}class p extends l{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),n=r.node(r.sharedDepth(this.to)),i=new o.Ji(h(e.content,(t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t,n),e.openStart,e.openEnd);return c.fromReplace(t,this.from,this.to,i)}invert(){return new d(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new p(e.pos,r.pos,this.mark)}merge(t){return t instanceof p&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new p(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new p(e.from,e.to,t.markFromJSON(e.mark))}}l.jsonID("addMark",p);class d extends l{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new o.Ji(h(e.content,t=>t.mark(this.mark.removeFromSet(t.marks)),t),e.openStart,e.openEnd);return c.fromReplace(t,this.from,this.to,r)}invert(){return new p(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new d(e.pos,r.pos,this.mark)}merge(t){return t instanceof d&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new d(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new d(e.from,e.to,t.markFromJSON(e.mark))}}l.jsonID("removeMark",d);class f extends l{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return c.fromReplace(t,this.pos,this.pos+1,new o.Ji(o.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(t))return new f(this.pos,e.marks[r]);return new f(this.pos,this.mark)}}return new u(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new f(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new f(e.pos,t.markFromJSON(e.mark))}}l.jsonID("addNodeMark",f);class u extends l{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return c.fromReplace(t,this.pos,this.pos+1,new o.Ji(o.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new f(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new u(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new u(e.pos,t.markFromJSON(e.mark))}}l.jsonID("removeNodeMark",u);class m extends l{constructor(t,e,r,n=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=n}apply(t){return this.structure&&v(t,this.from,this.to)?c.fail("Structure replace would overwrite content"):c.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new s([this.from,this.to-this.from,this.slice.size])}invert(t){return new m(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new m(e.pos,Math.max(e.pos,r.pos),this.slice)}merge(t){if(!(t instanceof m)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?o.Ji.empty:new o.Ji(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new m(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?o.Ji.empty:new o.Ji(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new m(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new m(e.from,e.to,o.Ji.fromJSON(t,e.slice),!!e.structure)}}l.jsonID("replace",m);class g extends l{constructor(t,e,r,n,o,i,s=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=n,this.slice=o,this.insert=i,this.structure=s}apply(t){if(this.structure&&(v(t,this.from,this.gapFrom)||v(t,this.gapTo,this.to)))return c.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return c.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?c.fromReplace(t,this.from,this.to,r):c.fail("Content does not fit in gap")}getMap(){return new s([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new g(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),n=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||n<e.pos||o>r.pos?null:new g(e.pos,r.pos,n,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new g(e.from,e.to,e.gapFrom,e.gapTo,o.Ji.fromJSON(t,e.slice),e.insert,!!e.structure)}}function v(t,e,r){let n=t.resolve(e),o=r-e,i=n.depth;for(;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0){let t=n.node(i).maybeChild(n.indexAfter(i));for(;o>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,o--}}return!1}l.jsonID("replaceAround",g);class y extends l{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at attribute step's position");let r=Object.create(null);for(let t in e.attrs)r[t]=e.attrs[t];r[this.attr]=this.value;let n=e.type.create(r,null,e.marks);return c.fromReplace(t,this.pos,this.pos+1,new o.Ji(o.FK.from(n),0,e.isLeaf?0:1))}getMap(){return s.empty}invert(t){return new y(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new y(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new y(e.pos,e.attr,e.value)}}l.jsonID("attr",y);class w extends l{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return c.ok(r)}getMap(){return s.empty}invert(t){return new w(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new w(e.attr,e.value)}}l.jsonID("docAttr",w);let b=class extends Error{};(b=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r}).prototype=Object.create(Error.prototype),b.prototype.constructor=b,b.prototype.name="TransformError";var k=r(73030),S={};if("u">typeof navigator&&"u">typeof document){var N=/Edge\/(\d+)/.exec(navigator.userAgent),O=/MSIE \d/.test(navigator.userAgent),C=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);S.mac=/Mac/.test(navigator.platform);var M=S.ie=!!(O||C||N);S.ie_version=O?document.documentMode||6:C?+C[1]:N?+N[1]:null,S.gecko=!M&&/gecko\/(\d+)/i.test(navigator.userAgent),S.gecko_version=S.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var x=!M&&/Chrome\/(\d+)/.exec(navigator.userAgent);S.chrome=!!x,S.chrome_version=x&&+x[1],S.safari=!M&&/Apple Computer/.test(navigator.vendor),S.ios=S.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),S.android=/Android \d/.test(navigator.userAgent),S.webkit="webkitFontSmoothing"in document.documentElement.style,S.webkit_version=S.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var D=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},T=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},A=null,E=function(t,e,r){var n=A||(A=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},R=function(t,e,r,n){return r&&(I(t,e,r,n,-1)||I(t,e,r,n,1))},F=/^(img|br|input|textarea|hr)$/i;function I(t,e,r,n,o){for(;;){if(t==r&&e==n)return!0;if(e==(o<0?0:J(t))){var i=t.parentNode;if(1!=i.nodeType||function(t){for(var e,r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}(t)||F.test(t.nodeName)||"false"==t.contentEditable)return!1;e=D(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType||"false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?J(t):0}}}function J(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}var z=function(t){var e=t.isCollapsed;return e&&S.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function j(t,e){var r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function P(t,e){return"number"==typeof t?t:t[e]}function $(t,e,r){for(var n=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=r||t.dom;s;s=T(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,l=a?{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}:function(t){var e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}(s),c=0,h=0;if(e.top<l.top+P(n,"top")?h=-(l.top-e.top+P(o,"top")):e.bottom>l.bottom-P(n,"bottom")&&(h=e.bottom-l.bottom+P(o,"bottom")),e.left<l.left+P(n,"left")?c=-(l.left-e.left+P(o,"left")):e.right>l.right-P(n,"right")&&(c=e.right-l.right+P(o,"right")),c||h){if(a)i.defaultView.scrollBy(c,h);else{var p=s.scrollLeft,d=s.scrollTop;h&&(s.scrollTop+=h),c&&(s.scrollLeft+=c);var f=s.scrollLeft-p,u=s.scrollTop-d;e={left:e.left-f,top:e.top-u,right:e.right-f,bottom:e.bottom-u}}}if(a)break}}function B(t){for(var e=[],r=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=r);t=T(t));return e}function V(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=n.dom,i=n.top,s=n.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var K=null;function _(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function L(t,e){var r=t.getClientRects();return r.length?r[e<0?0:r.length-1]:t.getBoundingClientRect()}var W=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function q(t,e,r){var n=t.docView.domFromPos(e,r<0?-1:1),o=n.node,i=n.offset,s=S.webkit||S.gecko;if(3==o.nodeType){if(s&&(W.test(o.nodeValue)||(r<0?!i:i==o.nodeValue.length))){var a=L(E(o,i,i),r);if(S.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var l=L(E(o,i-1,i-1),-1);if(l.top==a.top){var c=L(E(o,i,i+1),-1);if(c.top!=a.top)return U(c,c.left<l.left)}}return a}var h=i,p=i,d=r<0?1:-1;return r<0&&!i?(p++,d=-1):r>=0&&i==o.nodeValue.length?(h--,d=1):r<0?h--:p++,U(L(E(o,h,p),d),d<0)}if(!t.state.doc.resolve(e).parent.inlineContent){if(i&&(r<0||i==J(o))){var f=o.childNodes[i-1];if(1==f.nodeType)return H(f.getBoundingClientRect(),!1)}if(i<J(o)){var u=o.childNodes[i];if(1==u.nodeType)return H(u.getBoundingClientRect(),!0)}return H(o.getBoundingClientRect(),r>=0)}if(i&&(r<0||i==J(o))){var m=o.childNodes[i-1],g=3==m.nodeType?E(m,J(m)-(s?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(g)return U(L(g,1),!1)}if(i<J(o)){var v=o.childNodes[i],y=3==v.nodeType?E(v,0,s?0:1):1==v.nodeType?v:null;if(y)return U(L(y,-1),!0)}return U(L(3==o.nodeType?E(o):o,-r),r>=0)}function U(t,e){if(0==t.width)return t;var r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function H(t,e){if(0==t.height)return t;var r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function G(t,e,r){var n=t.state,o=t.root.activeElement;n!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),o!=t.dom&&o&&o.focus()}}var X=/[\u0590-\u08ac]/,Y=null,Z=null,Q=!1,tt=function(t,e,r,n){this.parent=t,this.children=e,this.dom=r,r.pmViewDesc=this,this.contentDOM=n,this.dirty=0},te={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};tt.prototype.matchesWidget=function(){return!1},tt.prototype.matchesMark=function(){return!1},tt.prototype.matchesNode=function(){return!1},tt.prototype.matchesHack=function(t){return!1},te.beforePosition.get=function(){return!1},tt.prototype.parseRule=function(){return null},tt.prototype.stopEvent=function(){return!1},te.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},te.border.get=function(){return 0},tt.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},tt.prototype.posBeforeChild=function(t){for(var e=0,r=this.posAtStart;e<this.children.length;e++){var n=this.children[e];if(n==t)return r;r+=n.size}},te.posBefore.get=function(){return this.parent.posBeforeChild(this)},te.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},te.posAfter.get=function(){return this.posBefore+this.size},te.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},tt.prototype.localPosFromDOM=function(t,e,r){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(r<0){if(t==this.contentDOM)n=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;n=t.previousSibling}for(;n&&!((o=n.pmViewDesc)&&o.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(o)+o.size:this.posAtStart}if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}if(t==this.dom&&this.contentDOM)a=e>D(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var n,o,i,s,a,l=t;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return a??r>0?this.posAtEnd:this.posAtStart},tt.prototype.nearestDesc=function(t,e){for(var r=!0,n=t;n;n=n.parentNode){var o=this.getDesc(n);if(o&&(!e||o.node)){if(!r||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;r=!1}}},tt.prototype.getDesc=function(t){for(var e=t.pmViewDesc,r=e;r;r=r.parent)if(r==this)return e},tt.prototype.posFromDOM=function(t,e,r){for(var n=t;n;n=n.parentNode){var o=this.getDesc(n);if(o)return o.localPosFromDOM(t,e,r)}return -1},tt.prototype.descAt=function(t){for(var e=0,r=0;e<this.children.length;e++){var n=this.children[e],o=r+n.size;if(r==t&&o!=r){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(t<o)return n.descAt(t-r-n.border);r=o}},tt.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,n=0,o=!0;;n++,o=!1){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)r+=this.children[n++].size;var i=n==this.children.length?null:this.children[n];if(r==t&&(0==e||!i||!i.size||i.border||e<0&&o)||i&&i.domAtom&&t<r+i.size)return{node:this.contentDOM,offset:i?D(i.dom):this.contentDOM.childNodes.length};if(!i)throw Error("Invalid position "+t);var s=r+i.size;if(!i.domAtom&&(e<0&&!i.border?s>=t:s>t)&&(s>t||n+1>=this.children.length||!this.children[n+1].beforePosition))return i.domFromPos(t-r-i.border,e);r=s}},tt.prototype.parseRange=function(t,e,r){if(void 0===r&&(r=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,o=-1,i=r,s=0;;s++){var a=this.children[s],l=i+a.size;if(-1==n&&t<=l){var c=i+a.border;if(t>=c&&e<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,c);t=i;for(var h=s;h>0;h--){var p=this.children[h-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){n=D(p.dom)+1;break}t-=p.size}-1==n&&(n=0)}if(n>-1&&(l>e||s==this.children.length-1)){e=l;for(var d=s+1;d<this.children.length;d++){var f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=D(f.dom);break}e+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:t,to:e,fromOffset:n,toOffset:o}},tt.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},tt.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),r=e.node,n=e.offset;if(1!=r.nodeType||n==r.childNodes.length)throw RangeError("No node after pos "+t);return r.childNodes[n]},tt.prototype.setSelection=function(t,e,r,n){for(var o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(o>a&&i<c)return l.setSelection(t-a-l.border,e-a-l.border,r,n);a=c}var h=this.domFromPos(t,t?-1:1),p=e==t?h:this.domFromPos(e,e?-1:1),d=r.getSelection(),f=!1;if((S.gecko||S.safari)&&t==e){var u=h.node,m=h.offset;if(3==u.nodeType){if((f=m&&u.nodeValue[m-1]==`
`)&&m==u.nodeValue.length)for(var g=u,v=void 0;g;g=g.parentNode){if(v=g.nextSibling){"BR"==v.nodeName&&(h=p={node:v.parentNode,offset:D(v)+1});break}var y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{var w=u.childNodes[m-1];f=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(S.gecko&&d.focusNode&&d.focusNode!=p.node&&1==d.focusNode.nodeType){var b=d.focusNode.childNodes[d.focusOffset];b&&"false"==b.contentEditable&&(n=!0)}if(!(!(n||f&&S.safari)&&R(h.node,h.offset,d.anchorNode,d.anchorOffset)&&R(p.node,p.offset,d.focusNode,d.focusOffset))){var k=!1;if((d.extend||t==e)&&!f){d.collapse(h.node,h.offset);try{t!=e&&d.extend(p.node,p.offset),k=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!k){if(t>e){var N=h;h=p,p=N}var O=document.createRange();O.setEnd(p.node,p.offset),O.setStart(h.node,h.offset),d.removeAllRanges(),d.addRange(O)}}},tt.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},te.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},tt.prototype.markDirty=function(t,e){for(var r=0,n=0;n<this.children.length;n++){var o=this.children[n],i=r+o.size;if(r==i?t<=i&&e>=r:t<i&&e>r){var s=r+o.border,a=i-o.border;if(t>=s&&e<=a){this.dirty=t==r||e==i?2:1,t==s&&e==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=3:o.markDirty(t-s,e-s);return}o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM?2:3}r=i}this.dirty=2},tt.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var r=1==t?2:1;e.dirty<r&&(e.dirty=r)}},te.domAtom.get=function(){return!1},Object.defineProperties(tt.prototype,te);var tr=[],tn=function(t){function e(e,r,n,o){var i,s=r.type.toDOM;if("function"==typeof s&&(s=s(n,function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o})),!r.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,tr,s,null),this.widget=r,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return r.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},r.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,r),e}(tt),to=function(t){function e(e,r,n,o){t.call(this,e,tr,r,null),this.textDOM=n,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={size:{configurable:!0}};return r.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,r),e}(tt),ti=function(t){function e(e,r,n,o){t.call(this,e,[],n,o),this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,r,n,i){var s=i.nodeViews[r.type.name],a=s&&s(r,i,n);return a&&a.dom||(a=o.ZF.renderSpec(document,r.type.spec.toDOM(r,n))),new e(t,r,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,r){if(t.prototype.markDirty.call(this,e,r),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,r,n){var o=e.create(this.parent,this.mark,!0,n),i=this.children,s=this.size;r<s&&(i=tb(i,r,s,n)),t>0&&(i=tb(i,0,t,n));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(tt),ts=function(t){function e(e,r,n,o,i,s,a,l,c){t.call(this,e,r.isLeaf?tr:[],i,s),this.nodeDOM=a,this.node=r,this.outerDeco=n,this.innerDeco=o,s&&this.updateChildren(l,c)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,r,n,i,s,a){var l,c,h=s.nodeViews[r.type.name],p=h&&h(r,s,function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:a},n,i),d=p&&p.dom,f=p&&p.contentDOM;if(r.isText){if(d){if(3!=d.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(r.text)}else d||(d=(l=o.ZF.renderSpec(document,r.type.spec.toDOM(r))).dom,f=l.contentDOM);f||r.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),r.type.spec.draggable&&(d.draggable=!0));var u=d;return d=tm(d,n,r),p?c=new th(t,r,n,i,d,f,u,p,s,a+1):r.isText?new tl(t,r,n,i,d,u,s):new e(t,r,n,i,d,f,u,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?o.FK.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,r){return 0==this.dirty&&t.eq(this.node)&&tg(e,this.outerDeco)&&r.eq(this.innerDeco)},r.size.get=function(){return this.node.nodeSize},r.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var r=this,n=this.node.inlineContent,i=e,s=t.composing&&this.localCompositionInfo(t,e),a=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new ty(this,a&&a.node);(function(t,e,r,n){var o=e.locals(t),i=0;if(0==o.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);n(a,o,e.forChild(i,a),s),i+=a.nodeSize}return}for(var l=0,c=[],h=null,p=0;;){if(l<o.length&&o[l].to==i){for(var d=o[l++],f=void 0;l<o.length&&o[l].to==i;)(f||(f=[d])).push(o[l++]);if(f){f.sort(tw);for(var u=0;u<f.length;u++)r(f[u],p,!!h)}else r(d,p,!!h)}var m=void 0,g=void 0;if(h)g=-1,m=h,h=null;else if(p<t.childCount)g=p,m=t.child(p++);else break;for(var v=0;v<c.length;v++)c[v].to<=i&&c.splice(v--,1);for(;l<o.length&&o[l].from<=i&&o[l].to>i;)c.push(o[l++]);var y=i+m.nodeSize;if(m.isText){var w=y;l<o.length&&o[l].from<w&&(w=o[l].from);for(var b=0;b<c.length;b++)c[b].to<w&&(w=c[b].to);w<y&&(h=m.cut(w-i),m=m.cut(0,w-i),y=w,g=-1)}var k=c.length?m.isInline&&!m.isLeaf?c.filter(function(t){return!t.inline}):c.slice():tr;n(m,k,e.forChild(i,m),g),i=y}})(this.node,this.innerDeco,function(e,s,a){e.spec.marks?c.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!a&&c.syncToMarks(s==r.node.childCount?o.CU.none:r.node.child(s).marks,n,t),c.placeWidget(e,t,i)},function(e,r,o,a){var h;c.syncToMarks(e.marks,n,t),c.findNodeMatch(e,r,o,a)||l&&t.state.selection.from>i&&t.state.selection.to<i+e.nodeSize&&(h=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(e,r,o,h,t)||c.updateNextNode(e,r,o,t,a)||c.addNode(e,r,o,t,i),i+=e.nodeSize}),c.syncToMarks(tr,n,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),function t(e,r,n){for(var o=e.firstChild,i=!1,s=0;s<r.length;s++){var a=r[s],l=a.dom;if(l.parentNode==e){for(;l!=o;)o=tv(o),i=!0;o=o.nextSibling}else i=!0,e.insertBefore(l,o);if(a instanceof ti){var c=o?o.previousSibling:e.lastChild;t(a.contentDOM,a.children,n),o=c?c.nextSibling:e.firstChild}}for(;o;)o=tv(o),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}(this.contentDOM,this.children,t),S.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionInfo=function(t,e){var r=t.state.selection,o=r.from,i=r.to;if(!(!(t.state.selection instanceof n.U3)||o<e||i>e+this.node.content.size)){var s=t.root.getSelection(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=J(t=t.childNodes[e-1])}else{if(1!=t.nodeType||!(e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(!(!a||!this.dom.contains(a.parentNode))){if(!this.node.inlineContent)return{node:a,pos:-1};var l=a.nodeValue,c=function(t,e,r,n){for(var o=0,i=0;o<t.childCount&&i<=n;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var l=s.text;o<t.childCount;){var c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=r){var h=l.lastIndexOf(e,n-a);if(h>=0&&h+e.length+a>=r)return a+h}}}return -1}(this.node.content,l,o-e,i-e);return c<0?null:{node:a,pos:c,text:l}}}},e.prototype.protectLocalComposition=function(t,e){var r=e.node,n=e.pos,o=e.text;if(!this.getDesc(r)){for(var i=r;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new to(this,i,r,o);t.compositionNodes.push(s),this.children=tb(this.children,n,n+o.length,t,s)}},e.prototype.update=function(t,e,r,n){return!!(3!=this.dirty&&t.sameMarkup(this.node))&&(this.updateInner(t,e,r,n),!0)},e.prototype.updateInner=function(t,e,r,n){this.updateOuterDeco(e),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!tg(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=tu(this.dom,this.nodeDOM,tf(this.outerDeco,this.node,e),tf(t,this.node,e)),this.dom!=r&&(r.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")},r.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,r),e}(tt);function ta(t,e,r,n,o){return tm(n,e,t),new ts(null,t,e,r,n,n,n,o,0)}var tl=function(t){function e(e,r,n,o,i,s,a){t.call(this,e,r,n,o,i,null,s,a)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,r,n){return!!(3!=this.dirty&&(0==this.dirty||this.inParent())&&t.sameMarkup(this.node))&&(this.updateOuterDeco(e),(0!=this.dirty||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,r,n)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,r,n){var o=this.node.cut(t,r),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,n)},e.prototype.markDirty=function(e,r){t.prototype.markDirty.call(this,e,r),this.dom!=this.nodeDOM&&(0==e||r==this.nodeDOM.nodeValue.length)&&(this.dirty=3)},r.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,r),e}(ts),tc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(t){return 0==this.dirty&&this.dom.nodeName==t},r.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,r),e}(tt),th=function(t){function e(e,r,n,o,i,s,a,l,c,h){t.call(this,e,r,n,o,i,s,a,c,h),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,r,n,o){if(3==this.dirty)return!1;if(!this.spec.update)return(!!this.contentDOM||!!e.isLeaf)&&t.prototype.update.call(this,e,r,n,o);var i=this.spec.update(e,r,n);return i&&this.updateInner(e,r,n,o),i},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,r,n,o){this.spec.setSelection?this.spec.setSelection(e,r,n):t.prototype.setSelection.call(this,e,r,n,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(ts);function tp(t){t&&(this.nodeName=t)}tp.prototype=Object.create(null);var td=[new tp];function tf(t,e,r){if(0==t.length)return td;for(var n=r?td[0]:new tp,o=[n],i=0;i<t.length;i++){var s=t[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(n=new tp(s.nodeName)),s){var l=s[a];null!=l&&(r&&1==o.length&&o.push(n=new tp(e.isInline?"span":"div")),"class"==a?n.class=(n.class?n.class+" ":"")+l:"style"==a?n.style=(n.style?n.style+";":"")+l:"nodeName"!=a&&(n[a]=l))}}return o}function tu(t,e,r,n){if(r==td&&n==td)return e;for(var o=e,i=0;i<n.length;i++){var s=n[i],a=r[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(o),a=td[0]),o=l}(function(t,e,r){for(var n in e)"class"==n||"style"==n||"nodeName"==n||n in r||t.removeAttribute(n);for(var o in r)"class"!=o&&"style"!=o&&"nodeName"!=o&&r[o]!=e[o]&&t.setAttribute(o,r[o]);if(e.class!=r.class){for(var i=e.class?e.class.split(" ").filter(Boolean):tr,s=r.class?r.class.split(" ").filter(Boolean):tr,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&t.classList.add(s[l])}if(e.style!=r.style){if(e.style)for(var c,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=h.exec(e.style);)t.style.removeProperty(c[1]);r.style&&(t.style.cssText+=r.style)}})(o,a||td[0],s)}return o}function tm(t,e,r){return tu(t,t,td,tf(e,r,1!=t.nodeType))}function tg(t,e){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function tv(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var ty=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(t,e){for(var r=t.childCount,n=e.length,o=new Map;r>0&&n>0;n--){var i=e[n-1],s=i.node;if(s){if(s!=t.child(r-1))break;--r,o.set(i,r)}}return{index:r,matched:o}}(t.node.content,t.children)};function tw(t,e){return t.type.side-e.type.side}function tb(t,e,r,n,o){for(var i=[],s=0,a=0;s<t.length;s++){var l=t[s],c=a,h=a+=l.size;c>=r||h<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,n)),o&&(i.push(o),o=null),h>r&&i.push(l.slice(r-c,l.size,n)))}return i}function tk(t,e){var r=t.root.getSelection(),o=t.state.doc;if(!r.focusNode)return null;var i=t.docView.nearestDesc(r.focusNode),s=i&&0==i.size,a=t.docView.posFromDOM(r.focusNode,r.focusOffset);if(a<0)return null;var l,c,h=o.resolve(a);if(z(r)){for(l=h;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&n.nh.isSelectable(i.node)&&i.parent&&!(i.node.isInline&&function(t,e,r){for(var n=0==e,o=e==J(t);n||o;){if(t==r)return!0;var i=D(t);if(!(t=t.parentNode))return!1;n=n&&0==i,o=o&&i==J(t)}}(r.focusNode,r.focusOffset,i.dom))){var p=i.posBefore;c=new n.nh(a==p?h:o.resolve(p))}}else{var d=t.docView.posFromDOM(r.anchorNode,r.anchorOffset);if(d<0)return null;l=o.resolve(d)}if(!c){var f="pointer"==e||t.state.selection.head<h.pos&&!s?1:-1;c=tA(t,l,h,f)}return c}function tS(t){return t.editable?t.hasFocus():tE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function tN(t,e){var r=t.state.selection;if(tD(t,r),tS(t)){if(!e&&t.mouseDown&&t.mouseDown.allowDefault){t.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}if(t.domObserver.disconnectSelection(),t.cursorWrapper)o=t.root.getSelection(),i=document.createRange(),(a="IMG"==(s=t.cursorWrapper.dom).nodeName)?i.setEnd(s.parentNode,D(s)+1):i.setEnd(s,0),i.collapse(!1),o.removeAllRanges(),o.addRange(i),!a&&!t.state.selection.visible&&S.ie&&S.ie_version<=11&&(s.disabled=!0,s.disabled=!1);else{var o,i,s,a,l,c,h,p,d,f,u=r.anchor,m=r.head;!tO||r instanceof n.U3||(r.$from.parent.inlineContent||(d=tC(t,r.from)),r.empty||r.$from.parent.inlineContent||(f=tC(t,r.to))),t.docView.setSelection(u,m,t.root,e),tO&&(d&&tx(d),f&&tx(f)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((l=t.dom.ownerDocument).removeEventListener("selectionchange",t.hideSelectionGuard),h=(c=t.root.getSelection()).anchorNode,p=c.anchorOffset,l.addEventListener("selectionchange",t.hideSelectionGuard=function(){(c.anchorNode!=h||c.anchorOffset!=p)&&(l.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout(function(){(!tS(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}ty.prototype.destroyBetween=function(t,e){if(t!=e){for(var r=t;r<e;r++)this.top.children[r].destroy();this.top.children.splice(t,e-t),this.changed=!0}},ty.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ty.prototype.syncToMarks=function(t,e,r){for(var n=0,o=this.stack.length>>1,i=Math.min(o,t.length);n<i&&(n==o-1?this.top:this.stack[n+1<<1]).matchesMark(t[n])&&!1!==t[n].type.spec.spanning;)n++;for(;n<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=ti.create(this.top,t[o],e,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}},ty.prototype.findNodeMatch=function(t,e,r,n){var o=this.top.children,i=-1;if(n>=this.preMatch.index){for(var s=this.index;s<o.length;s++)if(o[s].matchesNode(t,e,r)){i=s;break}}else for(var a=this.index,l=Math.min(o.length,a+1);a<l;a++){var c=o[a];if(c.matchesNode(t,e,r)&&!this.preMatch.matched.has(c)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},ty.prototype.updateNodeAt=function(t,e,r,n,o){return!!this.top.children[n].update(t,e,r,o)&&(this.destroyBetween(this.index,n),this.index=n+1,!0)},ty.prototype.findIndexWithChild=function(t){for(;;){var e=t.parentNode;if(!e)return -1;if(e==this.top.contentDOM){var r=t.pmViewDesc;if(r){for(var n=this.index;n<this.top.children.length;n++)if(this.top.children[n]==r)return n}return -1}t=e}},ty.prototype.updateNextNode=function(t,e,r,n,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof ts){var a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&tg(e,s.outerDeco)))&&s.update(t,e,r,n))return this.destroyBetween(this.index,i),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},ty.prototype.addNode=function(t,e,r,n,o){this.top.children.splice(this.index++,0,ts.create(this.top,t,e,r,n,o)),this.changed=!0},ty.prototype.placeWidget=function(t,e,r){var n=this.index<this.top.children.length?this.top.children[this.index]:null;if(n&&n.matchesWidget(t)&&(t==n.widget||!n.widget.type.toDOM.parentNode))this.index++;else{var o=new tn(this.top,t,e,r);this.top.children.splice(this.index++,0,o),this.changed=!0}},ty.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof ti;)t=t.children[t.children.length-1];!(!t||!(t instanceof tl)||/\n$/.test(t.node.text))||((S.safari||S.chrome)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},ty.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var e=document.createElement(t);"IMG"==t&&(e.className="ProseMirror-separator"),this.top.children.splice(this.index++,0,new tc(this.top,tr,e,null)),this.changed=!0}};var tO=S.safari||S.chrome&&S.chrome_version<63;function tC(t,e){var r=t.docView.domFromPos(e,0),n=r.node,o=r.offset,i=o<n.childNodes.length?n.childNodes[o]:null,s=o?n.childNodes[o-1]:null;if(S.safari&&i&&"false"==i.contentEditable)return tM(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return tM(i);if(s)return tM(s)}}function tM(t){return t.contentEditable="true",S.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function tx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function tD(t,e){if(e instanceof n.nh){var r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(tT(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else tT(t)}function tT(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function tA(t,e,r,o){return t.someProp("createSelectionBetween",function(n){return n(t,e,r)})||n.U3.between(e,r,o)}function tE(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function tR(t,e){var r=t.selection,o=r.$anchor,i=r.$head,s=e>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&n.LN.findFrom(a,e)}function tF(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function tI(t,e,r){var o=t.state.selection;if(o instanceof n.U3){if(!o.empty||r.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var i=tR(t.state,e);return!!i&&i instanceof n.nh&&tF(t,i)}if(!(S.mac&&r.indexOf("m")>-1)){var s,a=o.$head,l=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=e<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=t.docView.descAt(c))&&!s.contentDOM)&&(n.nh.isSelectable(l)?tF(t,new n.nh(e<0?t.state.doc.resolve(a.pos-l.nodeSize):a)):!!S.webkit&&tF(t,new n.U3(t.state.doc.resolve(e<0?c:c+l.nodeSize))))}}else{if(o instanceof n.nh&&o.node.isInline)return tF(t,new n.U3(e>0?o.$to:o.$from));var h=tR(t.state,e);return!!h&&tF(t,h)}}function tJ(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function tz(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function tj(t){var e=t.root.getSelection(),r=e.focusNode,n=e.focusOffset;if(r){var o,i,s=!1;for(S.gecko&&1==r.nodeType&&n<tJ(r)&&tz(r.childNodes[n])&&(s=!0);;)if(n>0){if(1!=r.nodeType)break;var a=r.childNodes[n-1];if(tz(a))o=r,i=--n;else if(3==a.nodeType)n=(r=a).nodeValue.length;else break}else{if(t$(r))break;for(var l=r.previousSibling;l&&tz(l);)o=r.parentNode,i=D(l),l=l.previousSibling;if(l)n=tJ(r=l);else{if((r=r.parentNode)==t.dom)break;n=0}}s?tB(t,e,r,n):o&&tB(t,e,o,i)}}function tP(t){var e=t.root.getSelection(),r=e.focusNode,n=e.focusOffset;if(r){for(var o,i,s=tJ(r);;)if(n<s){if(1!=r.nodeType)break;if(tz(r.childNodes[n]))o=r,i=++n;else break}else{if(t$(r))break;for(var a=r.nextSibling;a&&tz(a);)o=a.parentNode,i=D(a)+1,a=a.nextSibling;if(a)n=0,s=tJ(r=a);else{if((r=r.parentNode)==t.dom)break;n=s=0}}o&&tB(t,e,o,i)}}function t$(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function tB(t,e,r,n){if(z(e)){var o=document.createRange();o.setEnd(r,n),o.setStart(r,n),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(r,n);t.domObserver.setCurSelection();var i=t.state;setTimeout(function(){t.state==i&&tN(t)},50)}function tV(t,e,r){var o=t.state.selection;if(o instanceof n.U3&&!o.empty||r.indexOf("s")>-1||S.mac&&r.indexOf("m")>-1)return!1;var i=o.$from,s=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var a=tR(t.state,e);if(a&&a instanceof n.nh)return tF(t,a)}if(!i.parent.inlineContent){var l=e<0?i:s,c=o instanceof n.i5?n.LN.near(l,e):n.LN.findFrom(l,e);return!!c&&tF(t,c)}return!1}function tK(t,e){if(!(t.state.selection instanceof n.U3))return!0;var r=t.state.selection,o=r.$head,i=r.$anchor,s=r.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var l=t.state.tr;return e<0?l.delete(o.pos-a.nodeSize,o.pos):l.delete(o.pos,o.pos+a.nodeSize),t.dispatch(l),!0}return!1}function t_(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function tL(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(S.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}if(t.parentNode.lastChild==t||S.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function tW(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:tA(t,e.resolve(r.anchor),e.resolve(r.head))}function tq(t,e,r){for(var n=t.depth,o=e?t.end():t.pos;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,o++,e=!1;if(r)for(var i=t.node(n).maybeChild(t.indexAfter(n));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function tU(t,e){for(var r=[],n=e.content,i=e.openStart,s=e.openEnd;i>1&&s>1&&1==n.childCount&&1==n.firstChild.childCount;){i--,s--;var a=n.firstChild;r.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),n=a.content}var l=t.someProp("clipboardSerializer")||o.ZF.fromSchema(t.state.schema),c=tQ(),h=c.createElement("div");h.appendChild(l.serializeFragment(n,{document:c}));for(var p,d=h.firstChild;d&&1==d.nodeType&&(p=tY[d.nodeName.toLowerCase()]);){for(var f=p.length-1;f>=0;f--){for(var u=c.createElement(p[f]);h.firstChild;)u.appendChild(h.firstChild);h.appendChild(u),"tbody"!=p[f]&&(i++,s++)}d=h.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(r)),{dom:h,text:t.someProp("clipboardTextSerializer",function(t){return t(e)})||e.content.textBetween(0,e.content.size,`

`)}}function tH(t,e,r,n,i){var s,a,l,c,h,p=i.parent.type.spec.code;if(!r&&!e)return null;var d=e&&(n||p||!r);if(d){if(t.someProp("transformPastedText",function(t){e=t(e,p||n)}),p)return new o.Ji(o.FK.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0);var f=t.someProp("clipboardTextParser",function(t){return t(e,i,n)});if(f)h=f;else{var u=i.marks(),m=t.state.schema,g=o.ZF.fromSchema(m);c=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach(function(t){c.appendChild(document.createElement("p")).appendChild(g.serializeNode(m.text(t,u)))})}}else t.someProp("transformPastedHTML",function(t){r=t(r)}),c=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var r,n=tQ().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);if((r=o&&tY[o[1].toLowerCase()])&&(t=r.map(function(t){return"<"+t+">"}).join("")+t+r.map(function(t){return"</"+t+">"}).reverse().join("")),n.innerHTML=t,r)for(var i=0;i<r.length;i++)n=n.querySelector(r[i])||n;return n}(r),S.webkit&&function(t){for(var e=t.querySelectorAll(S.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),r=0;r<e.length;r++){var n=e[r];1==n.childNodes.length&&"\xa0"==n.textContent&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}(c);var v=c&&c.querySelector("[data-pm-slice]"),y=v&&/^(\d+) (\d+) (.*)/.exec(v.getAttribute("data-pm-slice"));return h||(h=(t.someProp("clipboardParser")||t.someProp("domParser")||o.S4.fromSchema(t.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||y),context:i})),h=y?function(t,e){if(!t.size)return t;var r,n=t.content.firstChild.type.schema;try{r=JSON.parse(e)}catch{return t}for(var i=t.content,s=t.openStart,a=t.openEnd,l=r.length-2;l>=0;l-=2){var c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;i=o.FK.from(c.create(r[l+1],i)),s++,a++}return new o.Ji(i,s,a)}((s=h,a=+y[1],l=+y[2],a<s.openStart&&(s=new o.Ji(tX(s.content,-1,a,s.openStart,0,s.openEnd),a,s.openEnd)),l<s.openEnd&&(s=new o.Ji(tX(s.content,1,l,s.openEnd,0,0),s.openStart,l)),s),y[3]):o.Ji.maxOpen(function(t,e){if(t.childCount<2)return t;for(var r=e.depth;r>=0;r--){var n=function(r){var n=e.node(r).contentMatchAt(e.index(r)),i=void 0,s=[];if(t.forEach(function(t){if(s){var e,r=n.findWrapping(t.type);if(!r)return s=null;if(e=s.length&&i.length&&function t(e,r,n,i,s){if(s<e.length&&s<r.length&&e[s]==r[s]){var a=t(e,r,n,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(s==e.length-1?n.type:e[s+1]))return i.copy(i.content.append(o.FK.from(tG(n,e,s+1))))}}(r,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=function t(e,r){if(0==r)return e;var n=e.content.replaceChild(e.childCount-1,t(e.lastChild,r-1)),i=e.contentMatchAt(e.childCount).fillBefore(o.FK.empty,!0);return e.copy(n.append(i))}(s[s.length-1],i.length));var a=tG(t,r);s.push(a),n=n.matchType(a.type,a.attrs),i=r}}}),s)return{v:o.FK.from(s)}}(r);if(n)return n.v}return t}(h.content,i),!1),t.someProp("transformPasted",function(t){h=t(h)}),h}function tG(t,e,r){void 0===r&&(r=0);for(var n=e.length-1;n>=r;n--)t=e[n].create(null,o.FK.from(t));return t}function tX(t,e,r,n,i,s){var a=e<0?t.firstChild:t.lastChild,l=a.content;return i<n-1&&(l=tX(l,e,r,n,i+1,s)),i>=r&&(l=e<0?a.contentMatchAt(0).fillBefore(l,t.childCount>1||s<=i).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(o.FK.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(l))}var tY={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},tZ=null;function tQ(){return tZ||(tZ=document.implementation.createHTMLDocument("title"))}var t0={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},t1=S.ie&&S.ie_version<=11,t2=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};t2.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},t2.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var t3=function(t,e){var r=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(t){for(var e=0;e<t.length;e++)r.queue.push(t[e]);S.ie&&S.ie_version<=11&&t.some(function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length})?r.flushSoon():r.flush()}),this.currentSelection=new t2,t1&&(this.onCharData=function(t){r.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};t3.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){t.flushingSoon=-1,t.flush()},20))},t3.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},t3.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,t0),t1&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},t3.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(function(){return t.flush()},20)}this.observer.disconnect()}t1&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},t3.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},t3.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},t3.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return t.suppressingSelectionUpdates=!1},50)},t3.prototype.onSelectionChange=function(){var t;if((!(t=this.view).editable||t.root.activeElement==t.dom)&&tE(t)){if(this.suppressingSelectionUpdates)return tN(this.view);if(S.ie&&S.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&R(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},t3.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},t3.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(e);if(r&&r.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e}))return this.setCurSelection(),!0},t3.prototype.flush=function(){if(!(!this.view.docView||this.flushingSoon>-1)){var t,e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var r=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&tE(this.view)&&!this.ignoreSelectionChange(r),o=-1,i=-1,s=!1,a=[];if(this.view.editable)for(var l=0;l<e.length;l++){var c=this.registerMutation(e[l],a);c&&(o=o<0?c.from:Math.min(c.from,o),i=i<0?c.to:Math.max(c.to,i),c.typeOver&&(s=!0))}if(S.gecko&&a.length>1){var h=a.filter(function(t){return"BR"==t.nodeName});if(2==h.length){var p=h[0],d=h[1];p.parentNode&&p.parentNode.parentNode==d.parentNode?d.remove():p.remove()}}(o>-1||n)&&(o>-1&&(this.view.docView.markDirty(o,i),t=this.view,t6||(t6=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&k.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(o,i,s,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(r)||tN(this.view),this.currentSelection.set(r))}},t3.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var r=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(r==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if("childList"!=t.type)return"attributes"==t.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue};for(var n=0;n<t.addedNodes.length;n++)e.push(t.addedNodes[n]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};var o=t.previousSibling,i=t.nextSibling;if(S.ie&&S.ie_version<=11&&t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++){var a=t.addedNodes[s],l=a.previousSibling,c=a.nextSibling;(!l||0>Array.prototype.indexOf.call(t.addedNodes,l))&&(o=l),(!c||0>Array.prototype.indexOf.call(t.addedNodes,c))&&(i=c)}var h=o&&o.parentNode==t.target?D(o)+1:0,p=r.localPosFromDOM(t.target,h,-1),d=i&&i.parentNode==t.target?D(i):t.target.childNodes.length;return{from:p,to:r.localPosFromDOM(t.target,d,1)}};var t6=!1,t5={},t4={};function t7(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function t8(t){t.someProp("handleDOMEvents",function(e){for(var r in e)t.eventHandlers[r]||t.dom.addEventListener(r,t.eventHandlers[r]=function(e){return t9(t,e)})})}function t9(t,e){return t.someProp("handleDOMEvents",function(r){var n=r[e.type];return!!n&&(n(t,e)||e.defaultPrevented)})}function et(t){return{left:t.clientX,top:t.clientY}}function ee(t,e,r,n,o){if(-1==n)return!1;for(var i=t.state.doc.resolve(n),s=function(n){if(t.someProp(e,function(e){return n>i.depth?e(t,r,i.nodeAfter,i.before(n),o,!0):e(t,r,i.node(n),i.before(n),o,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function er(t,e,r){t.focused||t.focus();var n=t.state.tr.setSelection(e);"pointer"==r&&n.setMeta("pointer",!0),t.dispatch(n)}t4.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!ei(t,e)){if(229!=e.keyCode&&t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!S.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey){var r,n,o;t.someProp("handleKeyDown",function(r){return r(t,e)})||(n=e.keyCode,r="",e.ctrlKey&&(r+="c"),e.metaKey&&(r+="m"),e.altKey&&(r+="a"),e.shiftKey&&(r+="s"),o=r,8==n||S.mac&&72==n&&"c"==o?tK(t,-1)||tj(t):46==n||S.mac&&68==n&&"c"==o?tK(t,1)||tP(t):13==n||27==n||(37==n?tI(t,-1,o)||tj(t):39==n?tI(t,1,o)||tP(t):38==n?tV(t,-1,o)||tj(t):40==n?function(t){if(!(!S.safari||t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),r=e.focusNode,n=e.focusOffset;if(r&&1==r.nodeType&&0==n&&r.firstChild&&"false"==r.firstChild.contentEditable){var o=r.firstChild;t_(t,o,!0),setTimeout(function(){return t_(t,o,!1)},20)}}}(t)||tV(t,1,o)||tP(t):o==(S.mac?"m":"c")&&(66==n||73==n||89==n||90==n)))?e.preventDefault():t7(t,"key")}else{var i=Date.now();t.lastIOSEnter=i,t.lastIOSEnterFallbackTimeout=setTimeout(function(){t.lastIOSEnter==i&&(t.someProp("handleKeyDown",function(e){return e(t,j(13,"Enter"))}),t.lastIOSEnter=0)},200)}}},t4.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},t4.keypress=function(t,e){if(!(ei(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||S.mac&&e.metaKey)){if(t.someProp("handleKeyPress",function(r){return r(t,e)})){e.preventDefault();return}var r=t.state.selection;if(!(r instanceof n.U3)||!r.$from.sameParent(r.$to)){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",function(e){return e(t,r.$from.pos,r.$to.pos,o)})||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var en=S.mac?"metaKey":"ctrlKey";t5.mousedown=function(t,e){t.shiftKey=e.shiftKey;var r,o,i,s=ec(t),a=Date.now(),l="singleClick";a-t.lastClick.time<500&&(o=(r=t.lastClick).x-e.clientX)*o+(i=r.y-e.clientY)*i<100&&!e[en]&&("singleClick"==t.lastClick.type?l="doubleClick":"doubleClick"==t.lastClick.type&&(l="tripleClick")),t.lastClick={time:a,x:e.clientX,y:e.clientY,type:l};var c=t.posAtCoords(et(e));c&&("singleClick"==l?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new eo(t,c,e,s)):("doubleClick"==l?function(t,e,r,n){return ee(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",function(r){return r(t,e,n)})}:function(t,e,r,o){return ee(t,"handleTripleClickOn",e,r,o)||t.someProp("handleTripleClick",function(r){return r(t,e,o)})||function(t,e,r){if(0!=r.button)return!1;var o=t.state.doc;if(-1==e)return!!o.inlineContent&&(er(t,n.U3.create(o,0,o.content.size),"pointer"),!0);for(var i=o.resolve(e),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(a.inlineContent)er(t,n.U3.create(o,l+1,l+1+a.content.size),"pointer");else{if(!n.nh.isSelectable(a))continue;er(t,n.nh.create(o,l),"pointer")}return!0}}(t,r,o)})(t,c.pos,c.inside,e)?e.preventDefault():t7(t,"pointer"))};var eo=function(t,e,r,o){var i,s,a=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=r,this.flushed=o,this.selectNode=r[en],this.allowDefault=r.shiftKey,this.delayedSelectionSync=!1,e.inside>-1)i=t.state.doc.nodeAt(e.inside),s=e.inside;else{var l=t.state.doc.resolve(e.pos);i=l.parent,s=l.depth?l.before():0}this.mightDrag=null;var c=o?null:r.target,h=c?t.docView.nearestDesc(c,!0):null;this.target=h?h.dom:null;var p=t.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||p instanceof n.nh&&p.from<=s&&p.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&S.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){a.view.mouseDown==a&&a.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),t7(t,"pointer")};function ei(t,e){return!!t.composing||!!(S.safari&&500>Math.abs(e.timeStamp-t.compositionEndedAt))&&(t.compositionEndedAt=-2e8,!0)}eo.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return tN(t.view)}),this.view.mouseDown=null},eo.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e,r,o,i,s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(et(t))),this.allowDefault||!s?t7(this.view,"pointer"):(e=this.view,r=s.pos,o=s.inside,i=this.selectNode,ee(e,"handleClickOn",r,o,t)||e.someProp("handleClick",function(n){return n(e,r,t)})||(i?function(t,e){if(-1==e)return!1;var r,o,i=t.state.selection;i instanceof n.nh&&(r=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var l=a>s.depth?s.nodeAfter:s.node(a);if(n.nh.isSelectable(l)){o=r&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(er(t,n.nh.create(t.state.doc,o),"pointer"),!0)}(e,o):function(t,e){if(-1==e)return!1;var r=t.state.doc.resolve(e),o=r.nodeAfter;return!!(o&&o.isAtom&&n.nh.isSelectable(o))&&(er(t,new n.nh(r),"pointer"),!0)}(e,o)))?t.preventDefault():0==t.button&&(this.flushed||S.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||S.chrome&&!(this.view.state.selection instanceof n.U3)&&2>=Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to)))?(er(this.view,n.LN.near(this.view.state.doc.resolve(s.pos)),"pointer"),t.preventDefault()):t7(this.view,"pointer")}},eo.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),t7(this.view,"pointer"),0==t.buttons&&this.done()},t5.touchdown=function(t){ec(t),t7(t,"pointer")},t5.contextmenu=function(t){return ec(t)};var es=S.android?5e3:-1;function ea(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout(function(){return ec(t)},e))}function el(t){var e;for(t.composing&&(t.composing=!1,t.compositionEndedAt=((e=document.createEvent("Event")).initEvent("event",!0,!0),e.timeStamp));t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function ec(t,e){if(t.domObserver.forceFlush(),el(t),e||t.docView.dirty){var r=tk(t);return r&&!r.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(r)):t.updateState(t.state),!0}return!1}t4.compositionstart=t4.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,r=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(function(t){return!1===t.type.spec.inclusive})))t.markCursor=t.state.storedMarks||r.marks(),ec(t,!0),t.markCursor=null;else if(ec(t),S.gecko&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length)for(var n=t.root.getSelection(),o=n.focusNode,i=n.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){n.collapse(s,s.nodeValue.length);break}o=s,i=-1}t.composing=!0}ea(t,es)},t4.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,ea(t,20))};var eh=S.ie&&S.ie_version<15||S.ios&&S.webkit_version<604;function ep(t,e,r,n){var i=tH(t,e,r,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",function(e){return e(t,n,i||o.Ji.empty)}))return!0;if(!i)return!1;var s=0==i.openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null,a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}t5.copy=t4.cut=function(t,e){var r=t.state.selection,n="cut"==e.type;if(!r.empty){var o=eh?null:e.clipboardData,i=tU(t,r.content()),s=i.dom,a=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(o),setTimeout(function(){r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}}(t,s),n&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},t4.paste=function(t,e){var r=eh?null:e.clipboardData;r&&ep(t,r.getData("text/plain"),r.getData("text/html"),e)?e.preventDefault():function(t,e){if(t.dom.parentNode){var r=t.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(function(){t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?ep(t,n.value,null,e):ep(t,n.textContent,n.innerHTML,e)},50)}}(t,e)};var ed=function(t,e){this.slice=t,this.move=e},ef=S.mac?"altKey":"ctrlKey";for(var eu in t5.dragstart=function(t,e){var r=t.mouseDown;if(r&&r.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(et(e));if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof n.nh?o.to-1:o.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(n.nh.create(t.state.doc,r.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);s&&s.node.type.spec.draggable&&s!=t.docView&&t.dispatch(t.state.tr.setSelection(n.nh.create(t.state.doc,s.posBefore)))}}var a=t.state.selection.content(),l=tU(t,a),c=l.dom,h=l.text;e.dataTransfer.clearData(),e.dataTransfer.setData(eh?"Text":"text/html",c.innerHTML),e.dataTransfer.effectAllowed="copyMove",eh||e.dataTransfer.setData("text/plain",h),t.dragging=new ed(a,!e[ef])}},t5.dragend=function(t){var e=t.dragging;window.setTimeout(function(){t.dragging==e&&(t.dragging=null)},50)},t4.dragover=t4.dragenter=function(t,e){return e.preventDefault()},t4.drop=function(t,e){var r=t.dragging;if(t.dragging=null,e.dataTransfer){var i=t.posAtCoords(et(e));if(i){var s=t.state.doc.resolve(i.pos);if(s){var a=r&&r.slice;a?t.someProp("transformPasted",function(t){a=t(a)}):a=tH(t,e.dataTransfer.getData(eh?"Text":"text/plain"),eh?null:e.dataTransfer.getData("text/html"),!1,s);var l=r&&!e[ef];if(t.someProp("handleDrop",function(r){return r(t,e,a||o.Ji.empty,l)})){e.preventDefault();return}if(a){e.preventDefault();var c=a?function(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let o=r.content;for(let t=0;t<r.openStart;t++)o=o.firstChild.content;for(let t=1;t<=(0==r.openStart&&r.size?2:1);t++)for(let e=n.depth;e>=0;e--){let r=e==n.depth?0:n.pos<=(n.start(e+1)+n.end(e+1))/2?-1:1,i=n.index(e)+(r>0?1:0),s=n.node(e),a=!1;if(1==t)a=s.canReplace(i,i,o);else{let t=s.contentMatchAt(i).findWrapping(o.firstChild.type);a=t&&s.canReplaceWith(i,i,t[0])}if(a)return 0==r?n.pos:r<0?n.before(e+1):n.after(e+1)}return null}(t.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);var h=t.state.tr;l&&h.deleteSelection();var p=h.mapping.map(c),d=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,f=h.doc;if(d?h.replaceRangeWith(p,p,a.content.firstChild):h.replaceRange(p,p,a),!h.doc.eq(f)){var u=h.doc.resolve(p);if(d&&n.nh.isSelectable(a.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new n.nh(u));else{var m=h.mapping.map(c);h.mapping.maps[h.mapping.maps.length-1].forEach(function(t,e,r,n){return m=n}),h.setSelection(tA(t,u,h.doc.resolve(m)))}t.focus(),t.dispatch(h.setMeta("uiEvent","drop"))}}}}}},t5.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&tN(t)},20))},t5.blur=function(t,e){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),e.relatedTarget&&t.dom.contains(e.relatedTarget)&&t.domObserver.currentSelection.set({}),t.focused=!1)},t5.beforeinput=function(t,e){if(S.chrome&&S.android&&"deleteContentBackward"==e.inputType){var r=t.domChangeCount;setTimeout(function(){if(t.domChangeCount==r&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",function(e){return e(t,j(8,"Backspace"))}))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}},50)}},t4)t5[eu]=t4[eu];function em(t,e){if(t==e)return!0;for(var r in t)if(t[r]!==e[r])return!1;for(var n in e)if(!(n in t))return!1;return!0}var eg=function(t,e){this.spec=e||eS,this.side=this.spec.side||0,this.toDOM=t};eg.prototype.map=function(t,e,r,n){var o=t.mapResult(e.from+n,this.side<0?-1:1),i=o.pos;return o.deleted?null:new ew(i-r,i-r,this)},eg.prototype.valid=function(){return!0},eg.prototype.eq=function(t){return this==t||t instanceof eg&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&em(this.spec,t.spec))};var ev=function(t,e){this.spec=e||eS,this.attrs=t};ev.prototype.map=function(t,e,r,n){var o=t.map(e.from+n,this.spec.inclusiveStart?-1:1)-r,i=t.map(e.to+n,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new ew(o,i,this)},ev.prototype.valid=function(t,e){return e.from<e.to},ev.prototype.eq=function(t){return this==t||t instanceof ev&&em(this.attrs,t.attrs)&&em(this.spec,t.spec)},ev.is=function(t){return t.type instanceof ev};var ey=function(t,e){this.spec=e||eS,this.attrs=t};ey.prototype.map=function(t,e,r,n){var o=t.mapResult(e.from+n,1);if(o.deleted)return null;var i=t.mapResult(e.to+n,-1);return i.deleted||i.pos<=o.pos?null:new ew(o.pos-r,i.pos-r,this)},ey.prototype.valid=function(t,e){var r=t.content.findIndex(e.from),n=r.index,o=r.offset;return o==e.from&&o+t.child(n).nodeSize==e.to},ey.prototype.eq=function(t){return this==t||t instanceof ey&&em(this.attrs,t.attrs)&&em(this.spec,t.spec)};var ew=function(t,e,r){this.from=t,this.to=e,this.type=r},eb={spec:{configurable:!0},inline:{configurable:!0}};ew.prototype.copy=function(t,e){return new ew(t,e,this.type)},ew.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},ew.prototype.map=function(t,e,r){return this.type.map(t,this,e,r)},ew.widget=function(t,e,r){return new ew(t,t,new eg(e,r))},ew.inline=function(t,e,r,n){return new ew(t,e,new ev(r,n))},ew.node=function(t,e,r,n){return new ew(t,e,new ey(r,n))},eb.spec.get=function(){return this.type.spec},eb.inline.get=function(){return this.type instanceof ev},Object.defineProperties(ew.prototype,eb);var ek=[],eS={},eN=function(t,e){this.local=t&&t.length?t:ek,this.children=e&&e.length?e:ek};eN.create=function(t,e){return e.length?eT(e,t,0,eS):eO},eN.prototype.find=function(t,e,r){var n=[];return this.findInner(t??0,e??1e9,n,0,r),n},eN.prototype.findInner=function(t,e,r,n,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&r.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,r,n+l,o)}},eN.prototype.map=function(t,e,r){return this==eO||0==t.maps.length?this:this.mapInner(t,e,0,0,r||eS)},eN.prototype.mapInner=function(t,e,r,n,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,r,n);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,r,n,o,i,s){for(var a=t.slice(),l=function(t,e,r,n){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||t>l+i||(e>=a[s]+i?a[s+1]=-1:r>=o&&(c=n-r-(e-t))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<r.maps.length;c++)r.maps[c].forEach(l);for(var h=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var d=r.map(t[p]+i),f=d-o;if(f<0||f>=n.content.size){h=!0;continue}var u=r.map(t[p+1]+i,-1)-o,m=n.content.findIndex(f),g=m.index,v=m.offset,y=n.maybeChild(g);if(y&&v==f&&v+y.nodeSize==u){var w=a[p+2].mapInner(r,y,d+1,t[p]+i+1,s);w!=eO?(a[p]=f,a[p+1]=u,a[p+2]=w):(a[p+1]=-2,h=!0)}else h=!0}if(h){var b=eT(function(t,e,r,n,o,i,s){for(var a=0;a<t.length;a+=3)-1==t[a+1]&&function t(e,i){for(var a=0;a<e.local.length;a++){var l=e.local[a].map(n,o,i);l?r.push(l):s.onRemove&&s.onRemove(e.local[a].spec)}for(var c=0;c<e.children.length;c+=3)t(e.children[c+2],e.children[c]+i+1)}(t[a+2],e[a]+i+1);return r}(a,t,e||[],r,o,i,s),n,0,s);e=b.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var S=0,N=0;S<b.children.length;S+=3){for(var O=b.children[S];N<a.length&&a[N]<O;)N+=3;a.splice(N,0,b.children[S],b.children[S+1],b.children[S+2])}}return new eN(e&&e.sort(eA),a)}(this.children,i,t,e,r,n,o):i?new eN(i.sort(eA)):eO},eN.prototype.add=function(t,e){return e.length?this==eO?eN.create(t,e):this.addInner(t,e,0):this},eN.prototype.addInner=function(t,e,r){var n,o=this,i=0;t.forEach(function(t,s){var a,l=s+r;if(a=ex(e,t,l)){for(n||(n=o.children.slice());i<n.length&&n[i]<s;)i+=3;n[i]==s?n[i+2]=n[i+2].addInner(t,a,l+1):n.splice(i,0,s,s+t.nodeSize,eT(a,t,l+1,eS)),i+=3}});for(var s=eM(i?eD(e):e,-r),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new eN(s.length?this.local.concat(s).sort(eA):this.local,n||this.children)},eN.prototype.remove=function(t){return 0==t.length||this==eO?this:this.removeInner(t,0)},eN.prototype.removeInner=function(t,e){for(var r=this.children,n=this.local,o=0;o<r.length;o+=3){for(var i=void 0,s=r[o]+e,a=r[o+1]+e,l=0,c=void 0;l<t.length;l++)(c=t[l])&&c.from>s&&c.to<a&&(t[l]=null,(i||(i=[])).push(c));if(i){r==this.children&&(r=this.children.slice());var h=r[o+2].removeInner(i,s+1);h!=eO?r[o+2]=h:(r.splice(o,3),o-=3)}}if(n.length){for(var p=0,d=void 0;p<t.length;p++)if(d=t[p])for(var f=0;f<n.length;f++)n[f].eq(d,e)&&(n==this.local&&(n=this.local.slice()),n.splice(f--,1))}return r==this.children&&n==this.local?this:n.length||r.length?new eN(n,r):eO},eN.prototype.forChild=function(t,e){if(this==eO)return this;if(e.isLeaf)return eN.empty;for(var r,n,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof ev){var c=Math.max(i,l.from)-i,h=Math.min(s,l.to)-i;c<h&&(n||(n=[])).push(l.copy(c,h))}}if(n){var p=new eN(n.sort(eA));return r?new eC([p,r]):p}return r||eO},eN.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof eN)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0},eN.prototype.locals=function(t){return eE(this.localsInner(t))},eN.prototype.localsInner=function(t){if(this==eO)return ek;if(t.inlineContent||!this.local.some(ev.is))return this.local;for(var e=[],r=0;r<this.local.length;r++)this.local[r].type instanceof ev||e.push(this.local[r]);return e};var eO=new eN;eN.empty=eO,eN.removeOverlap=eE;var eC=function(t){this.members=t};function eM(t,e){if(!e||!t.length)return t;for(var r=[],n=0;n<t.length;n++){var o=t[n];r.push(new ew(o.from+e,o.to+e,o.type))}return r}function ex(t,e,r){if(e.isLeaf)return null;for(var n=r+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>r&&s.to<n&&((o||(o=[])).push(s),t[i]=null);return o}function eD(t){for(var e=[],r=0;r<t.length;r++)null!=t[r]&&e.push(t[r]);return e}function eT(t,e,r,n){var o=[],i=!1;e.forEach(function(e,s){var a=ex(t,e,s+r);if(a){i=!0;var l=eT(a,e,r+s+1,n);l!=eO&&o.push(s,s+e.nodeSize,l)}});for(var s=eM(i?eD(t):t,-r).sort(eA),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new eN(s,o):eO}function eA(t,e){return t.from-e.from||t.to-e.to}function eE(t){for(var e=t,r=0;r<e.length-1;r++){var n=e[r];if(n.from!=n.to)for(var o=r+1;o<e.length;o++){var i=e[o];if(i.from==n.from){i.to!=n.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,n.to),eR(e,o+1,i.copy(n.to,i.to)));continue}i.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,i.from),eR(e,o,n.copy(i.from,n.to)));break}}return e}function eR(t,e,r){for(;e<t.length&&eA(r,t[e])>0;)e++;t.splice(e,0,r)}function eF(t){var e=[];return t.someProp("decorations",function(r){var n=r(t.state);n&&n!=eO&&e.push(n)}),t.cursorWrapper&&e.push(eN.create(t.state.doc,[t.cursorWrapper.deco])),eC.from(e)}eC.prototype.map=function(t,e){var r=this.members.map(function(r){return r.map(t,e,eS)});return eC.from(r)},eC.prototype.forChild=function(t,e){if(e.isLeaf)return eN.empty;for(var r=[],n=0;n<this.members.length;n++){var o=this.members[n].forChild(t,e);o!=eO&&(o instanceof eC?r=r.concat(o.members):r.push(o))}return eC.from(r)},eC.prototype.eq=function(t){if(!(t instanceof eC)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},eC.prototype.locals=function(t){for(var e,r=!0,n=0;n<this.members.length;n++){var o=this.members[n].localsInner(t);if(o.length){if(e){r&&(e=e.slice(),r=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}}return e?eE(r?e:e.sort(eA)):ek},eC.from=function(t){switch(t.length){case 0:return eO;case 1:return t[0];default:return new eC(t)}};var eI=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=eP(this),this.markCursor=null,this.cursorWrapper=null,ej(this),this.nodeViews=e$(this),this.docView=ta(this.state.doc,ez(this),eF(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){for(var e in t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new t3(t,function(e,r,i,s){return function(t,e,r,i,s){if(e<0){var a=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,l=tk(t,a);if(l&&!t.state.selection.eq(l)){var c=t.state.tr.setSelection(l);"pointer"==a?c.setMeta("pointer",!0):"key"==a&&c.scrollIntoView(),t.dispatch(c)}return}var h=t.state.doc.resolve(e),p=h.sharedDepth(r);e=h.before(p+1),r=t.state.doc.resolve(r).after(p+1);var d=t.state.selection,f=function(t,e,r){var n=t.docView.parseRange(e,r),i=n.node,s=n.fromOffset,a=n.toOffset,l=n.from,c=n.to,h=t.root.getSelection(),p=null,d=h.anchorNode;if(d&&t.dom.contains(1==d.nodeType?d:d.parentNode)&&(p=[{node:d,offset:h.anchorOffset}],z(h)||p.push({node:h.focusNode,offset:h.focusOffset})),S.chrome&&8===t.lastKeyCode)for(var f=a;f>s;f--){var u=i.childNodes[f-1],m=u.pmViewDesc;if("BR"==u.nodeName&&!m){a=f;break}if(!m||m.size)break}var g=t.state.doc,v=t.someProp("domParser")||o.S4.fromSchema(t.state.schema),y=g.resolve(l),w=null,b=v.parse(i,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:s,to:a,preserveWhitespace:!y.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:tL,context:y});if(p&&null!=p[0].pos){var k=p[0].pos,N=p[1]&&p[1].pos;null==N&&(N=k),w={anchor:k+l,head:N+l}}return{doc:b,sel:w,from:l,to:c}}(t,e,r);if(S.chrome&&t.cursorWrapper&&f.sel&&f.sel.anchor==t.cursorWrapper.deco.from){var u=t.cursorWrapper.deco.type.toDOM.nextSibling,m=u&&u.nodeValue?u.nodeValue.length:1;f.sel={anchor:f.sel.anchor+m,head:f.sel.anchor+m}}var g,v,y=t.state.doc,w=y.slice(f.from,f.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(g=t.state.selection.to,v="end"):(g=t.state.selection.from,v="start"),t.lastKeyCode=null;var b=function(t,e,r,n,o){var i=t.findDiffStart(e,r);if(null==i)return null;var s=t.findDiffEnd(e,r+t.size,r+e.size),a=s.a,l=s.b;if("end"==o){var c=Math.max(0,i-Math.min(a,l));n-=a+c-i}if(a<i&&t.size<e.size){var h=n<=i&&n>=a?i-n:0;i-=h,l=i+(l-a),a=i}else if(l<i){var p=n<=i&&n>=l?i-n:0;i-=p,a=i+(a-l),l=i}return{start:i,endA:a,endB:l}}(w.content,f.doc.content,f.from,g,v);if(!b){if(i&&d instanceof n.U3&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))b={start:d.from,endA:d.to,endB:d.to};else if((S.ios&&t.lastIOSEnter>Date.now()-225||S.android)&&s.some(function(t){return"DIV"==t.nodeName||"P"==t.nodeName})&&t.someProp("handleKeyDown",function(e){return e(t,j(13,"Enter"))})){t.lastIOSEnter=0;return}else{if(f.sel){var k=tW(t,t.state.doc,f.sel);k&&!k.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(k))}return}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&b.start==b.endB&&t.state.selection instanceof n.U3&&(b.start>t.state.selection.from&&b.start<=t.state.selection.from+2?b.start=t.state.selection.from:b.endA<t.state.selection.to&&b.endA>=t.state.selection.to-2&&(b.endB+=t.state.selection.to-b.endA,b.endA=t.state.selection.to)),S.ie&&S.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>f.from&&" \xa0"==f.doc.textBetween(b.start-f.from-1,b.start-f.from+1)&&(b.start--,b.endA--,b.endB--);var N,O=f.doc.resolveNoCache(b.start-f.from),C=f.doc.resolveNoCache(b.endB-f.from),M=O.sameParent(C)&&O.parent.inlineContent;if((S.ios&&t.lastIOSEnter>Date.now()-225&&(!M||s.some(function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))||!M&&O.pos<f.doc.content.size&&(N=n.LN.findFrom(f.doc.resolve(O.pos+1),1,!0))&&N.head==C.pos)&&t.someProp("handleKeyDown",function(e){return e(t,j(13,"Enter"))})){t.lastIOSEnter=0;return}if(t.state.selection.anchor>b.start&&function(t,e,r,n,o){if(!n.parent.isTextblock||r-e<=o.pos-n.pos||tq(n,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(tq(i,!0,!0));return!(!s.parent.isTextblock||s.pos>r||tq(s,!0,!1)<r)&&n.parent.content.cut(n.parentOffset).eq(s.parent.content)}(y,b.start,b.endA,O,C)&&t.someProp("handleKeyDown",function(e){return e(t,j(8,"Backspace"))})){S.android&&S.chrome&&t.domObserver.suppressSelectionUpdates();return}S.chrome&&S.android&&b.toB==b.from&&(t.lastAndroidDelete=Date.now()),S.android&&!M&&O.start()!=C.start()&&0==C.parentOffset&&O.depth==C.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==b.endA&&(b.endB-=2,C=f.doc.resolveNoCache(b.endB-f.from),setTimeout(function(){t.someProp("handleKeyDown",function(e){return e(t,j(13,"Enter"))})},20));var x,D,T,A,E=b.start,R=b.endA;if(M){if(O.pos==C.pos)S.ie&&S.ie_version<=11&&0==O.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout(function(){return tN(t)},20)),x=t.state.tr.delete(E,R),D=y.resolve(b.start).marksAcross(y.resolve(b.endA));else if(b.endA==b.endB&&(A=y.resolve(b.start))&&(T=function(t,e){for(var r,n,i,s=t.firstChild.marks,a=e.firstChild.marks,l=s,c=a,h=0;h<a.length;h++)l=a[h].removeFromSet(l);for(var p=0;p<s.length;p++)c=s[p].removeFromSet(c);if(1==l.length&&0==c.length)n=l[0],r="add",i=function(t){return t.mark(n.addToSet(t.marks))};else{if(0!=l.length||1!=c.length)return null;n=c[0],r="remove",i=function(t){return t.mark(n.removeFromSet(t.marks))}}for(var d=[],f=0;f<e.childCount;f++)d.push(i(e.child(f)));if(o.FK.from(d).eq(t))return{mark:n,type:r}}(O.parent.content.cut(O.parentOffset,C.parentOffset),A.parent.content.cut(A.parentOffset,b.endA-A.start()))))x=t.state.tr,"add"==T.type?x.addMark(E,R,T.mark):x.removeMark(E,R,T.mark);else if(O.parent.child(O.index()).isText&&O.index()==C.index()-(C.textOffset?0:1)){var F=O.parent.textBetween(O.parentOffset,C.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,E,R,F)}))return;x=t.state.tr.insertText(F,E,R)}}if(x||(x=t.state.tr.replace(E,R,f.doc.slice(b.start-f.from,b.endB-f.from))),f.sel){var I=tW(t,x.doc,f.sel);I&&!(S.chrome&&S.android&&t.composing&&I.empty&&(b.start!=b.endB||t.lastAndroidDelete<Date.now()-100)&&(I.head==E||I.head==x.mapping.map(R)-1)||S.ie&&I.empty&&I.head==E)&&x.setSelection(I)}D&&x.ensureMarks(D),t.dispatch(x.scrollIntoView())}(t,e,r,i,s)}),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null),t5)!function(e){var r=t5[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var r=e.target;r!=t.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||t9(t,e)||!t.editable&&e.type in t4||r(t,e)})}(e);S.safari&&t.dom.addEventListener("input",function(){return null}),t8(t)}(this),this.pluginViews=[],this.updatePluginViews()},eJ={props:{configurable:!0},root:{configurable:!0}};function ez(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",function(r){if("function"==typeof r&&(r=r(t.state)),r)for(var n in r)"class"==n?e.class+=" "+r[n]:e[n]||"contenteditable"==n||"nodeName"==n||(e[n]=String(r[n]))}),[ew.node(0,t.state.doc.content.size,e)]}function ej(t){if(t.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:ew.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function eP(t){return!t.someProp("editable",function(e){return!1===e(t.state)})}function e$(t){var e={};return t.someProp("nodeViews",function(t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r])}),e}eJ.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},eI.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&t8(this),this._props=t,this.updateStateInner(t.state,!0)},eI.prototype.setProps=function(t){var e={};for(var r in this._props)e[r]=this._props[r];for(var n in e.state=this.state,t)e[n]=t[n];this.update(e)},eI.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},eI.prototype.updateStateInner=function(t,e){var r,o,i,s=this,a=this.state,l=!1,c=!1;if(t.storedMarks&&this.composing&&(el(this),c=!0),this.state=t,e){var h=e$(this);(function(t,e){var r=0,n=0;for(var o in t){if(t[o]!=e[o])return!0;r++}for(var i in e)n++;return r!=n})(h,this.nodeViews)&&(this.nodeViews=h,l=!0),t8(this)}this.editable=eP(this),ej(this);var p=eF(this),d=ez(this),f=e?"reset":t.scrollToSelection>a.scrollToSelection?"to selection":"preserve",u=l||!this.docView.matchesNode(t.doc,d,p);(u||!t.selection.eq(a.selection))&&(c=!0);var m="preserve"==f&&c&&null==this.dom.style.overflowAnchor&&function(t){for(var e,r,n=t.dom.getBoundingClientRect(),o=Math.max(0,n.top),i=(n.left+n.right)/2,s=o+1;s<Math.min(innerHeight,n.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(!(a==t.dom||!t.dom.contains(a))){var l=a.getBoundingClientRect();if(l.top>=o-20){e=a,r=l.top;break}}}return{refDOM:e,refTop:r,stack:B(t.dom)}}(this);if(c){this.domObserver.stop();var g,v,y,w,b,k=u&&(S.ie||S.chrome)&&!this.composing&&!a.selection.empty&&!t.selection.empty&&(g=a.selection,v=t.selection,y=Math.min(g.$anchor.sharedDepth(g.head),v.$anchor.sharedDepth(v.head)),g.$anchor.start(y)!=v.$anchor.start(y));if(u){var N=S.chrome?this.trackWrites=this.root.getSelection().focusNode:null;(l||!this.docView.update(t.doc,d,p,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ta(t.doc,d,p,this.dom,this)),N&&!this.trackWrites&&(k=!0)}k||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(w=this.docView.domFromPos(this.state.selection.anchor,0),b=this.root.getSelection(),R(w.node,w.offset,b.anchorNode,b.anchorOffset)))?tN(this,k):(tD(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(a),"reset"==f)this.dom.scrollTop=0;else if("to selection"==f){var O=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(t){return t(s)})||(t.selection instanceof n.nh?$(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),O):$(this,this.coordsAtPos(t.selection.head,1),O))}else m&&(r=m.refDOM,o=m.refTop,V(m.stack,0==(i=r?r.getBoundingClientRect().top:0)?0:i-o))},eI.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},eI.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var r=this.pluginViews[e];r.update&&r.update(this,t)}else{this.destroyPluginViews();for(var n=0;n<this.state.plugins.length;n++){var o=this.state.plugins[n];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},eI.prototype.someProp=function(t,e){var r,n=this._props&&this._props[t];if(null!=n&&(r=e?e(n):n))return r;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(r=e?e(s):s))return r}},eI.prototype.hasFocus=function(){return this.root.activeElement==this.dom},eI.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(K)return t.focus(K);var e=B(t);t.focus(null==K?{get preventScroll(){return K={preventScroll:!0},!0}}:void 0),K||(K=!1,V(e,0))}(this.dom),tN(this),this.domObserver.start()},eJ.root.get=function(){var t=this._root;if(null==t){for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e}return t||document},eI.prototype.posAtCoords=function(t){return function(t,e){var r,n,o=t.root;if(o.caretPositionFromPoint)try{var i=o.caretPositionFromPoint(e.left,e.top);i&&(r=i.offsetNode,n=i.offset)}catch{}if(!r&&o.caretRangeFromPoint){var s=o.caretRangeFromPoint(e.left,e.top);s&&(r=s.startContainer,n=s.startOffset)}var a,l=o.elementFromPoint(e.left,e.top+1);if(!l||!t.dom.contains(1!=l.nodeType?l.parentNode:l)){var c=t.dom.getBoundingClientRect();if(!_(e,c)||!(l=function t(e,r,n){var o=e.childNodes.length;if(o&&n.top<n.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(r.top-n.top)/(n.bottom-n.top))-2)),s=i;;){var a=e.childNodes[s];if(1==a.nodeType)for(var l=a.getClientRects(),c=0;c<l.length;c++){var h=l[c];if(_(r,h))return t(a,r,h)}if((s=(s+1)%o)==i)break}return e}(t.dom,e,c)))return null}if(S.safari)for(var h=l;r&&h;h=T(h))h.draggable&&(r=n=null);if(l=(d=(p=l).parentNode)&&/^li$/i.test(d.nodeName)&&e.left<p.getBoundingClientRect().left?d:p,r){if(S.gecko&&1==r.nodeType&&(n=Math.min(n,r.childNodes.length))<r.childNodes.length){var p,d,f,u=r.childNodes[n];"IMG"==u.nodeName&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&n++}r==t.dom&&n==r.childNodes.length-1&&1==r.lastChild.nodeType&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(0==n||1!=r.nodeType||"BR"!=r.childNodes[n-1].nodeName)&&(a=function(t,e,r,n){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)o=s.posBefore;else if(a.right<n.left||a.bottom<n.top)o=s.posAfter;else break}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,r)}(t,r,n,e))}null==a&&(a=function(t,e,r){var n=function t(e,r){for(var n,o,i=2e8,s=0,a=r.top,l=r.top,c=e.firstChild,h=0;c;c=c.nextSibling,h++){var p=void 0;if(1==c.nodeType)p=c.getClientRects();else{if(3!=c.nodeType)continue;p=E(c).getClientRects()}for(var d=0;d<p.length;d++){var f=p[d];if(f.top<=a&&f.bottom>=l){a=Math.max(f.bottom,a),l=Math.min(f.top,l);var u=f.left>r.left?f.left-r.left:f.right<r.left?r.left-f.right:0;if(u<i){n=c,i=u,o=u&&3==n.nodeType?{left:f.right<r.left?f.right:f.left,top:r.top}:r,1==c.nodeType&&u&&(s=h+(r.left>=(f.left+f.right)/2?1:0));continue}}!n&&(r.left>=f.right&&r.top>=f.top||r.left>=f.left&&r.top>=f.bottom)&&(s=h+1)}}return n&&3==n.nodeType?function(t,e){for(var r=t.nodeValue.length,n=document.createRange(),o=0;o<r;o++){n.setEnd(t,o+1),n.setStart(t,o);var i=L(n,1);if(i.top!=i.bottom&&_(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,o):!n||i&&1==n.nodeType?{node:e,offset:s}:t(n,o)}(e,r),o=n.node,i=n.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&r.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,l,e));var m=t.docView.nearestDesc(l,!0);return{pos:a,inside:m?m.posAtStart-m.border:-1}}(this,t)},eI.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),q(this,t,e)},eI.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},eI.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},eI.prototype.posAtDOM=function(t,e,r){void 0===r&&(r=-1);var n=this.docView.posFromDOM(t,e,r);if(null==n)throw RangeError("DOM position not inside the editor");return n},eI.prototype.endOfTextblock=function(t,e){var r,n,o,i;return Y==(r=e||this.state)&&Z==t?Q:(Y=r,Z=t,Q="up"==t||"down"==t?(n=this,o=r.selection,i="up"==t?o.$from:o.$to,G(n,r,function(){for(var e=n.docView.domFromPos(i.pos,"up"==t?-1:1),r=e.node;;){var o=n.docView.nearestDesc(r,!0);if(!o)break;if(o.node.isBlock){r=o.dom;break}r=o.dom.parentNode}for(var s=q(n,i.pos,1),a=r.firstChild;a;a=a.nextSibling){var l=void 0;if(1==a.nodeType)l=a.getClientRects();else{if(3!=a.nodeType)continue;l=E(a,0,a.nodeValue.length).getClientRects()}for(var c=0;c<l.length;c++){var h=l[c];if(h.bottom>h.top&&("up"==t?h.bottom<s.top+1:h.top>s.bottom-1))return!1}}return!0})):function(t,e,r){var n=e.selection.$head;if(!n.parent.isTextblock)return!1;var o=n.parentOffset,i=o==n.parent.content.size,s=t.root.getSelection();return X.test(n.parent.textContent)&&s.modify?G(t,e,function(){var e=s.getRangeAt(0),o=s.focusNode,i=s.focusOffset,a=s.caretBidiLevel;s.modify("move",r,"character");var l=!(n.depth?t.docView.domAfterPos(n.before()):t.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||o==s.focusNode&&i==s.focusOffset;return s.removeAllRanges(),s.addRange(e),null!=a&&(s.caretBidiLevel=a),l}):"left"==r||"backward"==r?!o:i}(this,r,t))},eI.prototype.destroy=function(){this.docView&&(function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],eF(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},eI.prototype.dispatchEvent=function(t){t9(this,t)||!t5[t.type]||!this.editable&&t.type in t4||t5[t.type](this,t)},eI.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(eI.prototype,eJ)},21900:function(t,e,r){var n;t=r.nmd(t),function(o){var i=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,a="object"==typeof r.g&&r.g;(a.global===a||a.window===a||a.self===a)&&(o=a);var l,c,h=/^xn--/,p=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,m=String.fromCharCode;function g(t){throw RangeError(f[t])}function v(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function y(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+v((t=t.replace(d,".")).split("."),e).join(".")}function w(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?(64512&(r=t.charCodeAt(o++)))==56320?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function b(t){return v(t,function(t){var e="";return t>65535&&(t-=65536,e+=m(t>>>10&1023|55296),t=56320|1023&t),e+=m(t)}).join("")}function k(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,r){var n=0;for(t=r?u(t/700):t>>1,t+=u(t/e);t>455;n+=36)t=u(t/35);return u(n+36*t/(t+38))}function N(t){var e,r,n,o,i,s,a,l,c,h,p,d=[],f=t.length,m=0,v=128,y=72;for((n=t.lastIndexOf("-"))<0&&(n=0),o=0;o<n;++o)t.charCodeAt(o)>=128&&g("not-basic"),d.push(t.charCodeAt(o));for(i=n>0?n+1:0;i<f;){for(s=m,a=1,l=36;i>=f&&g("invalid-input"),((c=(e=t.charCodeAt(i++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36)>=36||c>u((2147483647-m)/a))&&g("overflow"),m+=c*a,!(c<(h=l<=y?1:l>=y+26?26:l-y));l+=36)a>u(2147483647/(p=36-h))&&g("overflow"),a*=p;y=S(m-s,r=d.length+1,0==s),u(m/r)>2147483647-v&&g("overflow"),v+=u(m/r),m%=r,d.splice(m++,0,v)}return b(d)}function O(t){var e,r,n,o,i,s,a,l,c,h,p,d,f,v,y,b=[];for(d=(t=w(t)).length,e=128,r=0,i=72,s=0;s<d;++s)(p=t[s])<128&&b.push(m(p));for(n=o=b.length,o&&b.push("-");n<d;){for(a=2147483647,s=0;s<d;++s)(p=t[s])>=e&&p<a&&(a=p);for(a-e>u((2147483647-r)/(f=n+1))&&g("overflow"),r+=(a-e)*f,e=a,s=0;s<d;++s)if((p=t[s])<e&&++r>2147483647&&g("overflow"),p==e){for(l=r,c=36;!(l<(h=c<=i?1:c>=i+26?26:c-i));c+=36)y=l-h,v=36-h,b.push(m(k(h+y%v,0))),l=u(y/v);b.push(m(k(l,0))),i=S(r,f,n==o),r=0,++n}++r,++e}return b.join("")}if(l={version:"1.4.1",ucs2:{decode:w,encode:b},decode:N,encode:O,toASCII:function(t){return y(t,function(t){return p.test(t)?"xn--"+O(t):t})},toUnicode:function(t){return y(t,function(t){return h.test(t)?N(t.slice(4).toLowerCase()):t})}},r.amdO)void 0!==(n=(function(){return l}).call(e,r,e,t))&&(t.exports=n);else if(i&&s){if(t.exports==i)s.exports=l;else for(c in l)l.hasOwnProperty(c)&&(i[c]=l[c])}else o.punycode=l}(this)},23067:t=>{t.exports=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t}},25287:(t,e,r)=>{"use strict";e.decode=e.parse=r(40553),e.encode=e.stringify=r(58529)},33878:(t,e,r)=>{e.publicEncrypt=r(296),e.privateDecrypt=r(78164),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},34648:(t,e,r)=>{"use strict";let n=r(15059),o=r(46275),i=r(81307),s=r(19159),a=t=>null==t,l=Symbol("encodeFragmentIdentifier");function c(t){if("string"!=typeof t||1!==t.length)throw TypeError("arrayFormatSeparator must be single character string")}function h(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function p(t,e){return e.decode?o(t):t}function d(t){let e=t.indexOf("#");return -1!==e&&(t=t.slice(0,e)),t}function f(t){t=d(t);let e=t.indexOf("?");return -1===e?"":t.slice(e+1)}function u(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):e.parseBooleans&&null!==t&&("true"===t.toLowerCase()||"false"===t.toLowerCase())&&(t="true"===t.toLowerCase()),t}function m(t,e){c((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);let r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,n)=>{if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){n[t]=r;return}void 0===n[t]&&(n[t]={}),n[t][e[1]]=r};case"bracket":return(t,r,n)=>{if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),!e){n[t]=r;return}if(void 0===n[t]){n[t]=[r];return}n[t]=[].concat(n[t],r)};case"colon-list-separator":return(t,r,n)=>{if(e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!e){n[t]=r;return}if(void 0===n[t]){n[t]=[r];return}n[t]=[].concat(n[t],r)};case"comma":case"separator":return(e,r,n)=>{let o="string"==typeof r&&r.includes(t.arrayFormatSeparator),i="string"==typeof r&&!o&&p(r,t).includes(t.arrayFormatSeparator);r=i?p(r,t):r;let s=o||i?r.split(t.arrayFormatSeparator).map(e=>p(e,t)):null===r?r:p(r,t);n[e]=s};case"bracket-separator":return(e,r,n)=>{let o=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!o){n[e]=r&&p(r,t);return}let i=null===r?[]:r.split(t.arrayFormatSeparator).map(e=>p(e,t));if(void 0===n[e]){n[e]=i;return}n[e]=[].concat(n[e],i)};default:return(t,e,r)=>{if(void 0===r[t]){r[t]=e;return}r[t]=[].concat(r[t],e)}}}(e),n=Object.create(null);if("string"!=typeof t||!(t=t.trim().replace(/^[?#&]/,"")))return n;for(let o of t.split("&")){if(""===o)continue;let[t,s]=i(e.decode?o.replace(/\+/g," "):o,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?s:p(s,e),r(p(t,e),s,n)}for(let t of Object.keys(n)){let r=n[t];if("object"==typeof r&&null!==r)for(let t of Object.keys(r))r[t]=u(r[t],e);else n[t]=u(r,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((t,e)=>{let r=n[e];return r&&"object"==typeof r&&!Array.isArray(r)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(r):t[e]=r,t},Object.create(null))}e.extract=f,e.parse=m,e.stringify=(t,e)=>{if(!t)return"";c((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);let r=r=>e.skipNull&&a(t[r])||e.skipEmptyString&&""===t[r],n=function(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let o=r.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[h(e,t),"[",o,"]"].join("")]:[...r,[h(e,t),"[",h(o,t),"]=",h(n,t)].join("")]};case"bracket":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[h(e,t),"[]"].join("")]:[...r,[h(e,t),"[]=",h(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[h(e,t),":list="].join("")]:[...r,[h(e,t),":list=",h(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e="bracket-separator"===t.arrayFormat?"[]=":"=";return r=>(n,o)=>void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:(o=null===o?"":o,0===n.length?[[h(r,t),e,h(o,t)].join("")]:[[n,h(o,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,h(e,t)]:[...r,[h(e,t),"=",h(n,t)].join("")]}}(e),o={};for(let e of Object.keys(t))r(e)||(o[e]=t[e]);let i=Object.keys(o);return!1!==e.sort&&i.sort(e.sort),i.map(r=>{let o=t[r];return void 0===o?"":null===o?h(r,e):Array.isArray(o)?0===o.length&&"bracket-separator"===e.arrayFormat?h(r,e)+"[]":o.reduce(n(r),[]).join("&"):h(r,e)+"="+h(o,e)}).filter(t=>t.length>0).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[r,n]=i(t,"#");return Object.assign({url:r.split("?")[0]||"",query:m(f(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:p(n,e)}:{})},e.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0,[l]:!0},r);let n=d(t.url).split("?")[0]||"",o=e.extract(t.url),i=e.parse(o,{sort:!1}),s=Object.assign(i,t.query),a=e.stringify(s,r);a&&(a=`?${a}`);let c=function(t){let e="",r=t.indexOf("#");return -1!==r&&(e=t.slice(r)),e}(t.url);return t.fragmentIdentifier&&(c=`#${r[l]?h(t.fragmentIdentifier,r):t.fragmentIdentifier}`),`${n}${a}${c}`},e.pick=(t,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[l]:!1},n);let{url:o,query:i,fragmentIdentifier:a}=e.parseUrl(t,n);return e.stringifyUrl({url:o,query:s(i,r),fragmentIdentifier:a},n)},e.exclude=(t,r,n)=>{let o=Array.isArray(r)?t=>!r.includes(t):(t,e)=>!r(t,e);return e.pick(t,o,n)}},40553:t=>{"use strict";t.exports=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var c,h,p,d,f=t[l].replace(i,"%20"),u=f.indexOf(r);u>=0?(c=f.substr(0,u),h=f.substr(u+1)):(c=f,h=""),p=decodeURIComponent(c),d=decodeURIComponent(h),Object.prototype.hasOwnProperty.call(o,p)?Array.isArray(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o}},47446:(t,e,r)=>{"use strict";r.r(e),r.d(e,{decode:()=>m,default:()=>w,encode:()=>g,toASCII:()=>y,toUnicode:()=>v,ucs2decode:()=>p,ucs2encode:()=>d});let n=/^xn--/,o=/[^\0-\x7E]/,i=/[\x2E\u3002\uFF0E\uFF61]/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=Math.floor,l=String.fromCharCode;function c(t){throw RangeError(s[t])}function h(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(i,".");let o=t.split("."),s=(function(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r})(o,e).join(".");return n+s}function p(t){let e=[],r=0,n=t.length;for(;r<n;){let o=t.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){let n=t.charCodeAt(r++);(64512&n)==56320?e.push(((1023&o)<<10)+(1023&n)+65536):(e.push(o),r--)}else e.push(o)}return e}let d=t=>String.fromCodePoint(...t),f=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},u=function(t,e,r){let n=0;for(t=r?a(t/700):t>>1,t+=a(t/e);t>455;n+=36)t=a(t/35);return a(n+36*t/(t+38))},m=function(t){let e=[],r=t.length,n=0,o=128,i=72,s=t.lastIndexOf("-");s<0&&(s=0);for(let r=0;r<s;++r)t.charCodeAt(r)>=128&&c("not-basic"),e.push(t.charCodeAt(r));for(let h=s>0?s+1:0;h<r;){let s=n;for(let e=1,o=36;;o+=36){var l;h>=r&&c("invalid-input");let s=(l=t.charCodeAt(h++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:36;(s>=36||s>a((2147483647-n)/e))&&c("overflow"),n+=s*e;let p=o<=i?1:o>=i+26?26:o-i;if(s<p)break;let d=36-p;e>a(2147483647/d)&&c("overflow"),e*=d}let p=e.length+1;i=u(n-s,p,0==s),a(n/p)>2147483647-o&&c("overflow"),o+=a(n/p),n%=p,e.splice(n++,0,o)}return String.fromCodePoint(...e)},g=function(t){let e=[],r=(t=p(t)).length,n=128,o=0,i=72;for(let r of t)r<128&&e.push(l(r));let s=e.length,h=s;for(s&&e.push("-");h<r;){let r=2147483647;for(let e of t)e>=n&&e<r&&(r=e);let p=h+1;for(let d of(r-n>a((2147483647-o)/p)&&c("overflow"),o+=(r-n)*p,n=r,t))if(d<n&&++o>2147483647&&c("overflow"),d==n){let t=o;for(let r=36;;r+=36){let n=r<=i?1:r>=i+26?26:r-i;if(t<n)break;let o=t-n,s=36-n;e.push(l(f(n+o%s,0))),t=a(o/s)}e.push(l(f(t,0))),i=u(o,p,h==s),o=0,++h}++o,++n}return e.join("")},v=function(t){return h(t,function(t){return n.test(t)?m(t.slice(4).toLowerCase()):t})},y=function(t){return h(t,function(t){return o.test(t)?"xn--"+g(t):t})},w={version:"2.1.0",ucs2:{decode:p,encode:d},decode:m,encode:g,toASCII:y,toUnicode:v}},57815:(t,e,r)=>{"use strict";r.d(e,{i5:()=>K,$t:()=>Y,nh:()=>B,k_:()=>Z,hs:()=>te,LN:()=>I,U3:()=>P});var n=r(67271);class o{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class i{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&i.empty)return i.empty}recover(t){let e=0,r=65535&t;if(!this.inverted)for(let t=0;t<r;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*r]+e+(t-(65535&t))/65536}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let n=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>t)break;let c=this.ranges[a+i],h=this.ranges[a+s],p=l+c;if(t<=p){let i=c?t==l?-1:t==p?1:e:e,s=l+n+(i<0?0:h);if(r)return s;let d=t==(e<0?l:p)?null:a/3+(t-l)*65536,f=t==l?2:t==p?1:4;return(e<0?t!=l:t!=p)&&(f|=8),new o(s,f,d)}n+=h-c}return r?t+n:new o(t+n,0,null)}touches(t,e){let r=0,n=65535&e,o=this.inverted?2:1,i=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?r:0);if(s>t)break;let a=this.ranges[e+o];if(t<=s+a&&e==3*n)return!0;r+=this.ranges[e+i]-a}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,o=0;n<this.ranges.length;n+=3){let i=this.ranges[n],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[n+e],c=this.ranges[n+r];t(s,s+l,a,a+c),o+=c-l}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?i.empty:new i(t<0?[0,-t,0]:[0,0,t])}}i.empty=new i([]);class s{constructor(t=[],e,r=0,n=t.length){this.maps=t,this.mirror=e,this.from=r,this.to=n}slice(t=0,e=this.maps.length){return new s(this.maps,this.mirror,t,e)}copy(){return new s(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,r=this.maps.length;e<t.maps.length;e++){let n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){let n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:void 0)}}invert(){let t=new s;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,r){let n=0;for(let r=this.from;r<this.to;r++){let o=this.maps[r].mapResult(t,e);if(null!=o.recover){let e=this.getMirror(r);if(null!=e&&e>r&&e<this.to){r=e,t=this.maps[e].recover(o.recover);continue}}n|=o.delInfo,t=o.pos}return r?t:new o(t,n,null)}}let a=Object.create(null);class l{getMap(){return i.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw RangeError("Invalid input for Step.fromJSON");let r=a[e.stepType];if(!r)throw RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in a)throw RangeError("Duplicate use of step JSON ID "+t);return a[t]=e,e.prototype.jsonID=t,e}}class c{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new c(t,null)}static fail(t){return new c(null,t)}static fromReplace(t,e,r,o){try{return c.ok(t.replace(e,r,o))}catch(t){if(t instanceof n.vI)return c.fail(t.message);throw t}}}function h(t,e,r){let o=[];for(let n=0;n<t.childCount;n++){let i=t.child(n);i.content.size&&(i=i.copy(h(i.content,e,i))),i.isInline&&(i=e(i,r,n)),o.push(i)}return n.FK.fromArray(o)}class p extends l{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new n.Ji(h(e.content,(t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t,o),e.openStart,e.openEnd);return c.fromReplace(t,this.from,this.to,i)}invert(){return new d(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new p(e.pos,r.pos,this.mark)}merge(t){return t instanceof p&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new p(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new p(e.from,e.to,t.markFromJSON(e.mark))}}l.jsonID("addMark",p);class d extends l{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new n.Ji(h(e.content,t=>t.mark(this.mark.removeFromSet(t.marks)),t),e.openStart,e.openEnd);return c.fromReplace(t,this.from,this.to,r)}invert(){return new p(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new d(e.pos,r.pos,this.mark)}merge(t){return t instanceof d&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new d(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new d(e.from,e.to,t.markFromJSON(e.mark))}}l.jsonID("removeMark",d);class f extends l{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return c.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(t))return new f(this.pos,e.marks[r]);return new f(this.pos,this.mark)}}return new u(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new f(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new f(e.pos,t.markFromJSON(e.mark))}}l.jsonID("addNodeMark",f);class u extends l{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return c.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new f(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new u(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new u(e.pos,t.markFromJSON(e.mark))}}l.jsonID("removeNodeMark",u);class m extends l{constructor(t,e,r,n=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=n}apply(t){return this.structure&&v(t,this.from,this.to)?c.fail("Structure replace would overwrite content"):c.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new i([this.from,this.to-this.from,this.slice.size])}invert(t){return new m(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new m(e.pos,Math.max(e.pos,r.pos),this.slice)}merge(t){if(!(t instanceof m)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new m(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new m(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new m(e.from,e.to,n.Ji.fromJSON(t,e.slice),!!e.structure)}}l.jsonID("replace",m);class g extends l{constructor(t,e,r,n,o,i,s=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=n,this.slice=o,this.insert=i,this.structure=s}apply(t){if(this.structure&&(v(t,this.from,this.gapFrom)||v(t,this.gapTo,this.to)))return c.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return c.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?c.fromReplace(t,this.from,this.to,r):c.fail("Content does not fit in gap")}getMap(){return new i([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new g(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),n=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||n<e.pos||o>r.pos?null:new g(e.pos,r.pos,n,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new g(e.from,e.to,e.gapFrom,e.gapTo,n.Ji.fromJSON(t,e.slice),e.insert,!!e.structure)}}function v(t,e,r){let n=t.resolve(e),o=r-e,i=n.depth;for(;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0){let t=n.node(i).maybeChild(n.indexAfter(i));for(;o>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,o--}}return!1}function y(t,e,r,o=r.contentMatch,i=!0){let s=t.doc.nodeAt(e),a=[],l=e+1;for(let e=0;e<s.childCount;e++){let c=s.child(e),h=l+c.nodeSize,p=o.matchType(c.type);if(p){o=p;for(let e=0;e<c.marks.length;e++)r.allowsMarkType(c.marks[e].type)||t.step(new d(l,h,c.marks[e]));if(i&&c.isText&&"pre"!=r.whitespace){let t,e=/\r?\n|\r/g,o;for(;t=e.exec(c.text);)o||(o=new n.Ji(n.FK.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),a.push(new m(l+t.index,l+t.index+t[0].length,o))}}else a.push(new m(l,h,n.Ji.empty));l=h}if(!o.validEnd){let e=o.fillBefore(n.FK.empty,!0);t.replace(l,l,new n.Ji(e,0,0))}for(let e=a.length-1;e>=0;e--)t.step(a[e])}function w(t,e,r,n){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let o=t.mapping.slice(n).map(r+1+i+s.index);t.replaceWith(o,o+1,e.type.schema.linebreakReplacement.create())}}})}function b(t,e,r,n){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function k(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}l.jsonID("replaceAround",g);class S{constructor(t,e,r){this.$from=t,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=n.FK.empty;for(let e=0;e<=t.depth;e++){let r=t.node(e);this.frontier.push({type:r.type,match:r.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=n.FK.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;let l=new n.Ji(i,s,a);return t>-1?new g(r.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||r.pos!=this.$to.pos?new m(r.pos,o.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,n=this.unplaced.openEnd;r<t;r++){let o=e.firstChild;if(e.childCount>1&&(n=0),o.type.spec.isolating&&n<=r){t=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=1==e?t:this.unplaced.openStart;r>=0;r--){let t=null,o=(r?(t=C(this.unplaced.content,r-1).firstChild).content:this.unplaced.content).firstChild;for(let i=this.depth;i>=0;i--){let{type:s,match:a}=this.frontier[i],l,c=null;if(1==e&&(o?a.matchType(o.type)||(c=a.fillBefore(n.FK.from(o),!1)):t&&s.compatibleContent(t.type)))return{sliceDepth:r,frontierDepth:i,parent:t,inject:c};if(2==e&&o&&(l=a.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:i,parent:t,wrap:l};if(t&&a.matchType(t.type))break}}}openMore(){let{content:t,openStart:e,openEnd:r}=this.unplaced,o=C(t,e);return!!o.childCount&&!o.firstChild.isLeaf&&(this.unplaced=new n.Ji(t,e+1,Math.max(r,o.size+e>=t.size-r?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:r}=this.unplaced,o=C(t,e);if(o.childCount<=1&&e>0){let i=t.size-e<=e+o.size;this.unplaced=new n.Ji(N(t,e-1,1),e-1,i?e-1:r)}else this.unplaced=new n.Ji(N(t,e,1),e,r)}placeNodes({sliceDepth:t,frontierDepth:e,parent:r,inject:o,wrap:i}){for(;this.depth>e;)this.closeFrontierNode();if(i)for(let t=0;t<i.length;t++)this.openFrontierNode(i[t]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,h=[],{match:p,type:d}=this.frontier[e];if(o){for(let t=0;t<o.childCount;t++)h.push(o.child(t));p=p.matchFragment(o)}let f=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let t=a.child(c),e=p.matchType(t.type);if(!e)break;(++c>1||0==l||t.content.size)&&(p=e,h.push(function t(e,r,o){if(r<=0)return e;let i=e.content;return r>1&&(i=i.replaceChild(0,t(i.firstChild,r-1,1==i.childCount?o-1:0))),r>0&&(i=e.type.contentMatch.fillBefore(i).append(i),o<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(n.FK.empty,!0)))),e.copy(i)}(t.mark(d.allowedMarks(t.marks)),1==c?l:0,c==a.childCount?f:-1)))}let u=c==a.childCount;u||(f=-1),this.placed=O(this.placed,e,n.FK.from(h)),this.frontier[e].match=p,u&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=a;t<f;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=u?0==t?n.Ji.empty:new n.Ji(N(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new n.Ji(N(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!M(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return -1;let{depth:r}=this.$to,n=this.$to.after(r);for(;r>1&&n==this.$to.end(--r);)++n;return n}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:r,type:n}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),i=M(t,e,n,r,o);if(i){for(let r=e-1;r>=0;r--){let{match:e,type:n}=this.frontier[r],o=M(t,r,n,e,!0);if(!o||o.childCount)continue t}return{depth:e,fit:i,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=O(this.placed,e.depth,e.fit)),t=e.move;for(let r=e.depth+1;r<=t.depth;r++){let e=t.node(r),n=e.type.contentMatch.fillBefore(e.content,!0,t.index(r));this.openFrontierNode(e.type,e.attrs,n)}return t}openFrontierNode(t,e=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=O(this.placed,this.depth,n.FK.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(n.FK.empty,!0);t.childCount&&(this.placed=O(this.placed,this.frontier.length,t))}}function N(t,e,r){return 0==e?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(N(t.firstChild.content,e-1,r)))}function O(t,e,r){return 0==e?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(O(t.lastChild.content,e-1,r)))}function C(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function M(t,e,r,n,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!r.compatibleContent(i.type))return null;let a=n.fillBefore(i.content,!0,s);return a&&!function(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(r,i.content,s)?a:null}function x(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let o=n;o>=0;o--){let n=t.start(o);if(n<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(n==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==n-1)&&r.push(o)}return r}class D extends l{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return c.fail("No node at attribute step's position");let r=Object.create(null);for(let t in e.attrs)r[t]=e.attrs[t];r[this.attr]=this.value;let o=e.type.create(r,null,e.marks);return c.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(o),0,e.isLeaf?0:1))}getMap(){return i.empty}invert(t){return new D(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new D(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new D(e.pos,e.attr,e.value)}}l.jsonID("attr",D);class T extends l{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return c.ok(r)}getMap(){return i.empty}invert(t){return new T(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new T(e.attr,e.value)}}l.jsonID("docAttr",T);let A=class extends Error{};(A=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r}).prototype=Object.create(Error.prototype),A.prototype.constructor=A,A.prototype.name="TransformError";class E{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new s}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new A(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,r=n.Ji.empty){let o=function(t,e,r=e,o=n.Ji.empty){if(e==r&&!o.size)return null;let i=t.resolve(e),s=t.resolve(r);return k(i,s,o)?new m(e,r,o):new S(i,s,o).fit()}(this.doc,t,e,r);return o&&this.step(o),this}replaceWith(t,e,r){return this.replace(t,e,new n.Ji(n.FK.from(r),0,0))}delete(t,e){return this.replace(t,e,n.Ji.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,r){return function(t,e,r,o){if(!o.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),s=t.doc.resolve(r);if(k(i,s,o))return t.step(new m(e,r,o));let a=x(i,t.doc.resolve(r));0==a[a.length-1]&&a.pop();let l=-(i.depth+1);a.unshift(l);for(let t=i.depth,e=i.pos-1;t>0;t--,e--){let r=i.node(t).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;a.indexOf(t)>-1?l=t:i.before(t)==e&&a.splice(1,0,-t)}let c=a.indexOf(l),h=[],p=o.openStart;for(let t=o.content,e=0;;e++){let r=t.firstChild;if(h.push(r),e==o.openStart)break;t=r.content}for(let t=p-1;t>=0;t--){var d;let e=h[t],r=(d=e.type).spec.defining||d.spec.definingForContent;if(r&&!e.sameMarkup(i.node(Math.abs(l)-1)))p=t;else if(r||!e.type.isTextblock)break}for(let e=o.openStart;e>=0;e--){let l=(e+p+1)%(o.openStart+1),d=h[l];if(d)for(let e=0;e<a.length;e++){let h=a[(e+c)%a.length],p=!0;h<0&&(p=!1,h=-h);let f=i.node(h-1),u=i.index(h-1);if(f.canReplaceWith(u,u,d.type,d.marks))return t.replace(i.before(h),p?s.after(h):r,new n.Ji(function t(e,r,o,i,s){if(r<o){let n=e.firstChild;e=e.replaceChild(0,n.copy(t(n.content,r+1,o,i,n)))}if(r>i){let t=s.contentMatchAt(0),r=t.fillBefore(e).append(e);e=r.append(t.matchFragment(r).fillBefore(n.FK.empty,!0))}return e}(o.content,0,o.openStart,l),l,o.openEnd))}}let f=t.steps.length;for(let n=a.length-1;n>=0&&(t.replace(e,r,o),!(t.steps.length>f));n--){let t=a[n];t<0||(e=i.before(t),r=s.after(t))}}(this,t,e,r),this}replaceRangeWith(t,e,r){return function(t,e,r,o){if(!o.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let n=function(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(let t=n.depth-1;t>=0;t--){let e=n.index(t);if(n.node(t).canReplaceWith(e,e,r))return n.before(t+1);if(e>0)return null}if(n.parentOffset==n.parent.content.size)for(let t=n.depth-1;t>=0;t--){let e=n.indexAfter(t);if(n.node(t).canReplaceWith(e,e,r))return n.after(t+1);if(e<n.node(t).childCount)break}return null}(t.doc,e,o.type);null!=n&&(e=r=n)}t.replaceRange(e,r,new n.Ji(n.FK.from(o),0,0))}(this,t,e,r),this}deleteRange(t,e){return function(t,e,r){let n=t.doc.resolve(e),o=t.doc.resolve(r),i=x(n,o);for(let e=0;e<i.length;e++){let r=i[e],s=e==i.length-1;if(s&&0==r||n.node(r).type.contentMatch.validEnd)return t.delete(n.start(r),o.end(r));if(r>0&&(s||n.node(r-1).canReplace(n.index(r-1),o.indexAfter(r-1))))return t.delete(n.before(r),o.after(r))}for(let i=1;i<=n.depth&&i<=o.depth;i++)if(e-n.start(i)==n.depth-i&&r>n.end(i)&&o.end(i)-r!=o.depth-i&&n.start(i-1)==o.start(i-1)&&n.node(i-1).canReplace(n.index(i-1),o.index(i-1)))return t.delete(n.before(i),r);t.delete(e,r)}(this,t,e),this}lift(t,e){return function(t,e,r){let{$from:o,$to:i,depth:s}=e,a=o.before(s+1),l=i.after(s+1),c=a,h=l,p=n.FK.empty,d=0;for(let t=s,e=!1;t>r;t--)e||o.index(t)>0?(e=!0,p=n.FK.from(o.node(t).copy(p)),d++):c--;let f=n.FK.empty,u=0;for(let t=s,e=!1;t>r;t--)e||i.after(t+1)<i.end(t)?(e=!0,f=n.FK.from(i.node(t).copy(f)),u++):h++;t.step(new g(c,h,a,l,new n.Ji(p.append(f),d,u),p.size-d,!0))}(this,t,e),this}join(t,e=1){return function(t,e,r){let o=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-r),a=s.node().type;if(i&&a.inlineContent){let t="pre"==a.whitespace,e=!!a.contentMatch.matchType(i);t&&!e?o=!1:!t&&e&&(o=!0)}let l=t.steps.length;if(!1===o){let n=t.doc.resolve(e+r);b(t,n.node(),n.before(),l)}a.inlineContent&&y(t,e+r-1,a,s.node().contentMatchAt(s.index()),null==o);let c=t.mapping.slice(l),h=c.map(e-r);if(t.step(new m(h,c.map(e+r,-1),n.Ji.empty,!0)),!0===o){let e=t.doc.resolve(h);w(t,e.node(),e.before(),t.steps.length)}}(this,t,e),this}wrap(t,e){return function(t,e,r){let o=n.FK.empty;for(let t=r.length-1;t>=0;t--){if(o.size){let e=r[t].type.contentMatch.matchFragment(o);if(!e||!e.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=n.FK.from(r[t].type.create(r[t].attrs,o))}let i=e.start,s=e.end;t.step(new g(i,s,i,s,new n.Ji(o,0,0),r.length,!0))}(this,t,e),this}setBlockType(t,e=t,r,o=null){return function(t,e,r,o,i){if(!o.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,r,(e,r)=>{var a,l;let c,h,p="function"==typeof i?i(e):i;if(e.isTextblock&&!e.hasMarkup(o,p)&&(a=t.doc,l=t.mapping.slice(s).map(r),h=(c=a.resolve(l)).index(),c.parent.canReplaceWith(h,h+1,o))){let i=null;if(o.schema.linebreakReplacement){let t="pre"==o.whitespace,e=!!o.contentMatch.matchType(o.schema.linebreakReplacement);t&&!e?i=!1:!t&&e&&(i=!0)}!1===i&&b(t,e,r,s),y(t,t.mapping.slice(s).map(r,1),o,void 0,null===i);let a=t.mapping.slice(s),l=a.map(r,1),c=a.map(r+e.nodeSize,1);return t.step(new g(l,c,l+1,c-1,new n.Ji(n.FK.from(o.create(p,null,e.marks)),0,0),1,!0)),!0===i&&w(t,e,r,s),!1}})}(this,t,e,r,o),this}setNodeMarkup(t,e,r=null,o){return function(t,e,r,o,i){let s=t.doc.nodeAt(e);if(!s)throw RangeError("No node at given position");r||(r=s.type);let a=r.create(o,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!r.validContent(s.content))throw RangeError("Invalid content for node type "+r.name);t.step(new g(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new n.Ji(n.FK.from(a),0,0),1,!0))}(this,t,e,r,o),this}setNodeAttribute(t,e,r){return this.step(new D(t,e,r)),this}setDocAttribute(t,e){return this.step(new T(t,e)),this}addNodeMark(t,e){return this.step(new f(t,e)),this}removeNodeMark(t,e){if(!(e instanceof n.CU)){let r=this.doc.nodeAt(t);if(!r)throw RangeError("No node at position "+t);if(!(e=e.isInSet(r.marks)))return this}return this.step(new u(t,e)),this}split(t,e=1,r){return function(t,e,r=1,o){let i=t.doc.resolve(e),s=n.FK.empty,a=n.FK.empty;for(let t=i.depth,e=i.depth-r,l=r-1;t>e;t--,l--){s=n.FK.from(i.node(t).copy(s));let e=o&&o[l];a=n.FK.from(e?e.type.create(e.attrs,a):i.node(t).copy(a))}t.step(new m(e,e,new n.Ji(s.append(a),r,r),!0))}(this,t,e,r),this}addMark(t,e,r){var n;let o,i,s,a;return n=this,o=[],i=[],n.doc.nodesBetween(t,e,(n,l,c)=>{if(!n.isInline)return;let h=n.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),f=Math.min(l+n.nodeSize,e),u=r.addToSet(h);for(let t=0;t<h.length;t++)h[t].isInSet(u)||(s&&s.to==c&&s.mark.eq(h[t])?s.to=f:o.push(s=new d(c,f,h[t])));a&&a.to==c?a.to=f:i.push(a=new p(c,f,r))}}),o.forEach(t=>n.step(t)),i.forEach(t=>n.step(t)),this}removeMark(t,e,r){var o;let i,s;return o=this,i=[],s=0,o.doc.nodesBetween(t,e,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof n.sX){let t=o.marks,e;for(;e=r.isInSet(t);)(l||(l=[])).push(e),t=e.removeFromSet(t)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let r=Math.min(a+o.nodeSize,e);for(let e=0;e<l.length;e++){let n=l[e],o;for(let t=0;t<i.length;t++){let e=i[t];e.step==s-1&&n.eq(i[t].style)&&(o=e)}o?(o.to=r,o.step=s):i.push({style:n,from:Math.max(a,t),to:r,step:s})}}}),i.forEach(t=>o.step(new d(t.from,t.to,t.style))),this}clearIncompatible(t,e,r){return y(this,t,e,r),this}}var R=r(73030);let F=Object.create(null);class I{constructor(t,e,r){this.$anchor=t,this.$head=e,this.ranges=r||[new J(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=n.Ji.empty){let r=e.content.lastChild,o=null;for(let t=0;t<e.openEnd;t++)o=r,r=r.lastChild;let i=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],h=t.mapping.slice(i);t.replaceRange(h.map(l.pos),h.map(c.pos),a?n.Ji.empty:e),0==a&&W(t,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(t,e){let r=t.steps.length,n=this.ranges;for(let o=0;o<n.length;o++){let{$from:i,$to:s}=n[o],a=t.mapping.slice(r),l=a.map(i.pos),c=a.map(s.pos);o?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),W(t,r,e.isInline?-1:1))}}static findFrom(t,e,r=!1){let n=t.parent.inlineContent?new P(t):L(t.node(0),t.parent,t.pos,t.index(),e,r);if(n)return n;for(let n=t.depth-1;n>=0;n--){let o=e<0?L(t.node(0),t.node(n),t.before(n+1),t.index(n),e,r):L(t.node(0),t.node(n),t.after(n+1),t.index(n)+1,e,r);if(o)return o}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new K(t.node(0))}static atStart(t){return L(t,t,0,0,1)||new K(t)}static atEnd(t){return L(t,t,t.content.size,t.childCount,-1)||new K(t)}static fromJSON(t,e){if(!e||!e.type)throw RangeError("Invalid input for Selection.fromJSON");let r=F[e.type];if(!r)throw RangeError(`No selection type ${e.type} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in F)throw RangeError("Duplicate use of selection JSON ID "+t);return F[t]=e,e.prototype.jsonID=t,e}getBookmark(){return P.between(this.$anchor,this.$head).getBookmark()}}I.prototype.visible=!0;class J{constructor(t,e){this.$from=t,this.$to=e}}let z=!1;function j(t){z||t.parent.inlineContent||(z=!0,R.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class P extends I{constructor(t,e=t){j(t),j(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return I.near(r);let n=t.resolve(e.map(this.anchor));return new P(n.parent.inlineContent?n:r,r)}replace(t,e=n.Ji.empty){if(super.replace(t,e),e==n.Ji.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof P&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new $(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new P(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,r=e){let n=t.resolve(e);return new this(n,r==e?n:t.resolve(r))}static between(t,e,r){let n=t.pos-e.pos;if((!r||n)&&(r=n>=0?1:-1),!e.parent.inlineContent){let t=I.findFrom(e,r,!0)||I.findFrom(e,-r,!0);if(!t)return I.near(e,r);e=t.$head}return t.parent.inlineContent||(0==n?t=e:(t=(I.findFrom(t,-r,!0)||I.findFrom(t,r,!0)).$anchor).pos<e.pos!=n<0&&(t=e)),new P(t,e)}}I.jsonID("text",P);class ${constructor(t,e){this.anchor=t,this.head=e}map(t){return new $(t.map(this.anchor),t.map(this.head))}resolve(t){return P.between(t.resolve(this.anchor),t.resolve(this.head))}}class B extends I{constructor(t){let e=t.nodeAfter;super(t,t.node(0).resolve(t.pos+e.nodeSize)),this.node=e}map(t,e){let{deleted:r,pos:n}=e.mapResult(this.anchor),o=t.resolve(n);return r?I.near(o):new B(o)}content(){return new n.Ji(n.FK.from(this.node),0,0)}eq(t){return t instanceof B&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new V(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new B(t.resolve(e.anchor))}static create(t,e){return new B(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}B.prototype.visible=!1,I.jsonID("node",B);class V{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:r}=t.mapResult(this.anchor);return e?new $(r,r):new V(r)}resolve(t){let e=t.resolve(this.anchor),r=e.nodeAfter;return r&&B.isSelectable(r)?new B(e):I.near(e)}}class K extends I{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=n.Ji.empty){if(e==n.Ji.empty){t.delete(0,t.doc.content.size);let e=I.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new K(t)}map(t){return new K(t)}eq(t){return t instanceof K}getBookmark(){return _}}I.jsonID("all",K);let _={map(){return this},resolve:t=>new K(t)};function L(t,e,r,n,o,i=!1){if(e.inlineContent)return P.create(t,r);for(let s=n-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let n=e.child(s);if(n.isAtom){if(!i&&B.isSelectable(n))return B.create(t,r-(o<0?n.nodeSize:0))}else{let e=L(t,n,r+o,o<0?n.childCount:0,o,i);if(e)return e}r+=n.nodeSize*o}return null}function W(t,e,r){let n,o=t.steps.length-1;if(o<e)return;let i=t.steps[o];(i instanceof m||i instanceof g)&&(t.mapping.maps[o].forEach((t,e,r,o)=>{null==n&&(n=o)}),t.setSelection(I.near(t.doc.resolve(n),r)))}class q extends E{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return n.CU.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let r=this.selection;return e&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||n.CU.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,r){let n=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection();{if(null==r&&(r=e),r=r??e,!t)return this.deleteRange(e,r);let o=this.storedMarks;if(!o){let t=this.doc.resolve(e);o=r==e?t.marks():t.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(e,r,n.text(t,o)),this.selection.empty||this.setSelection(I.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function U(t,e){return e&&t?t.bind(e):t}class H{constructor(t,e,r){this.name=t,this.init=U(e.init,r),this.apply=U(e.apply,r)}}let G=[new H("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new H("selection",{init:(t,e)=>t.selection||I.atStart(e.doc),apply:t=>t.selection}),new H("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,r,n)=>n.selection.$cursor?t.storedMarks:null}),new H("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class X{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=G.slice(),e&&e.forEach(t=>{if(this.pluginsByKey[t.key])throw RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new H(t.key,t.spec.state,t))})}}class Y{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=e){let e=this.config.plugins[r];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],r=this.applyInner(t),n=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let s=this.config.plugins[i];if(s.spec.appendTransaction){let a=n?n[i].n:0,l=n?n[i].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,r);if(c&&r.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",t),!n){n=[];for(let t=0;t<this.config.plugins.length;t++)n.push(t<i?{state:r,n:e.length}:{state:this,n:0})}e.push(c),r=r.applyInner(c),o=!0}n&&(n[i]={state:r,n:e.length})}}if(!o)return{state:r,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let e=new Y(this.config),r=this.config.fields;for(let n=0;n<r.length;n++){let o=r[n];e[o.name]=o.apply(t,this[o.name],this,e)}return e}get tr(){return new q(this)}static create(t){let e=new X(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Y(e);for(let n=0;n<e.fields.length;n++)r[e.fields[n].name]=e.fields[n].init(t,r);return r}reconfigure(t){let e=new X(this.schema,t.plugins),r=e.fields,n=new Y(e);for(let e=0;e<r.length;e++){let o=r[e].name;n[o]=this.hasOwnProperty(o)?this[o]:r[e].init(t,n)}return n}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(t=>t.toJSON())),t&&"object"==typeof t)for(let r in t){if("doc"==r||"selection"==r)throw RangeError("The JSON fields `doc` and `selection` are reserved");let n=t[r],o=n.spec.state;o&&o.toJSON&&(e[r]=o.toJSON.call(n,this[n.key]))}return e}static fromJSON(t,e,r){if(!e)throw RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw RangeError("Required config field 'schema' missing");let o=new X(t.schema,t.plugins),i=new Y(o);return o.fields.forEach(o=>{if("doc"==o.name)i.doc=n.bP.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=I.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let n in r){let s=r[n],a=s.spec.state;if(s.key==o.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,n)){i[o.name]=a.fromJSON.call(s,t,e[n],i);return}}i[o.name]=o.init(t,i)}}),i}}class Z{constructor(t){this.spec=t,this.props={},t.props&&function t(e,r,n){for(let o in e){let i=e[o];i instanceof Function?i=i.bind(r):"handleDOMEvents"==o&&(i=t(i,r,{})),n[o]=i}return n}(t.props,this,this.props),this.key=t.key?t.key.key:tt("plugin")}getState(t){return t[this.key]}}let Q=Object.create(null);function tt(t){return t in Q?t+"$"+ ++Q[t]:(Q[t]=0,t+"$")}class te{constructor(t="key"){this.key=tt(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},58529:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,r,n,o){return r=r||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(e(o))+n;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(e(t))}).join(r):i+encodeURIComponent(e(t[o]))}).join(r):o?encodeURIComponent(e(o))+n+encodeURIComponent(e(t)):""}},71436:(t,e,r)=>{var n=r(22770),o=r(83973).Buffer;t.exports=function(t,e){for(var r,i=o.alloc(0),s=0;i.length<e;)r=function(t){var e=o.allocUnsafe(4);return e.writeUInt32BE(t,0),e}(s++),i=o.concat([i,n("sha1").update(t).update(r).digest()]);return i.slice(0,e)}},72216:(t,e,r)=>{"use strict";var n=r(47341),o=r(39357),i=r(46681);function s(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function a(t){var e=t.indexOf("?");return -1===e?"":t.slice(e+1)}function l(t,e){var r=function(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){n[t]=r;return}void 0===n[t]&&(n[t]={}),n[t][e[1]]=r};case"bracket":return function(t,r,n){if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e){if(void 0===n[t]){n[t]=[r];return}}else{n[t]=r;return}n[t]=[].concat(n[t],r)};default:return function(t,e,r){if(void 0===r[t]){r[t]=e;return}r[t]=[].concat(r[t],e)}}}(e=o({arrayFormat:"none"},e)),n=Object.create(null);return"string"==typeof t&&(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),o=e.shift(),s=e.length>0?e.join("="):void 0;s=void 0===s?null:i(s),r(i(o),s,n)}),Object.keys(n).sort().reduce(function(t,e){var r=n[e];return r&&"object"==typeof r&&!Array.isArray(r)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(r):t[e]=r,t},Object.create(null))):n}e.extract=a,e.parse=l,e.stringify=function(t,e){!1===(e=o({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var r=function(t){switch(t.arrayFormat){case"index":return function(e,r,n){return null===r?[s(e,t),"[",n,"]"].join(""):[s(e,t),"[",s(n,t),"]=",s(r,t)].join("")};case"bracket":return function(e,r){return null===r?s(e,t):[s(e,t),"[]=",s(r,t)].join("")};default:return function(e,r){return null===r?s(e,t):[s(e,t),"=",s(r,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map(function(n){var o=t[n];if(void 0===o)return"";if(null===o)return s(n,e);if(Array.isArray(o)){var i=[];return o.slice().forEach(function(t){void 0!==t&&i.push(r(n,t,i.length))}),i.join("&")}return s(n,e)+"="+s(o,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:l(a(t),e)}}},78164:(t,e,r)=>{var n=r(76954),o=r(71436),i=r(23067),s=r(8822),a=r(52084),l=r(22770),c=r(18645),h=r(83973).Buffer;t.exports=function(t,e,r){p=t.padding?t.padding:r?1:4;var p,d,f=n(t),u=f.modulus.byteLength();if(e.length>u||new s(e).cmp(f.modulus)>=0)throw Error("decryption error");d=r?c(new s(e),f):a(e,f);var m=h.alloc(u-d.length);if(d=h.concat([m,d],u),4===p)return function(t,e){var r=t.modulus.byteLength(),n=l("sha1").update(h.alloc(0)).digest(),s=n.length;if(0!==e[0])throw Error("decryption error");var a=e.slice(1,s+1),c=e.slice(s+1),p=i(a,o(c,s)),d=i(c,o(p,r-s-1));if(function(t,e){t=h.from(t),e=h.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));for(var o=-1;++o<n;)r+=t[o]^e[o];return r}(n,d.slice(0,s)))throw Error("decryption error");for(var f=s;0===d[f];)f++;if(1!==d[f++])throw Error("decryption error");return d.slice(f)}(f,d);if(1===p)return function(t,e,r){for(var n=e.slice(0,2),o=2,i=0;0!==e[o++];)if(o>=e.length){i++;break}var s=e.slice(2,o-1);if(("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&i++,s.length<8&&i++,i)throw Error("decryption error");return e.slice(o)}(0,d,r);if(3===p)return d;throw Error("unknown padding")}}}]);