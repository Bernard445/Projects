!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7a9b2f95-c2ce-4dc2-9a52-37dbfbe0c132",e._sentryDebugIdIdentifier="sentry-dbid-7a9b2f95-c2ce-4dc2-9a52-37dbfbe0c132")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"03c050f83997f8f858284f712ef0b0ca3dc661b2"},(self.webpackChunkdisco=self.webpackChunkdisco||[]).push([[39],{77467:function(e,n,t){t.d(n,{Z:function(){return he}});var a=t(954843),r=t(204942),i=t(697798),o=t(810863),l=t(541321),s=t(269865),c=t(108920),d=t(558365),u=t(294184),p=t.n(u),g=(t(667294),t(785893));function m(e){var n=e.testid,t=void 0===n?"CommunitySwitcherListItemTemplate":n,a=e.isActive,i=e.badge,o=e.title,d=e.subtitle,u=e.onClick,m=e.disabled,h=y(),f=(0,c.Z)();return(0,g.jsxs)(s.Z,{testid:t,className:p()(h.item,(0,r.Z)({},h.active,a)),tabIndex:0,onClick:u,disabled:m,children:[i,(0,g.jsxs)("div",{className:h.communityDetails,children:["string"==typeof o?(0,g.jsx)(l.U4,{testid:"".concat(t,".name"),variant:"body-sm-700",setColor:f.palette.text.primary,truncateText:1,children:o}):o,d&&(0,g.jsx)(l.U4,{testid:"".concat(t,".domain"),className:h.domain,variant:"body-xs-500",setColor:f.palette.text.hint,truncateText:1,children:d})]})]})}var h,f=function(){var e=(0,c.Z)(),n=y();return(0,g.jsxs)("div",{className:n.item,children:[(0,g.jsx)(d.Z,{height:48,width:48,variant:"rect",style:{borderRadius:e.measure.borderRadius.big}}),(0,g.jsxs)("div",{children:[(0,g.jsx)(l.Ju,{width:140}),(0,g.jsx)(l.Ju,{width:120})]})]})},y=(0,o.Z)((function(e){return{item:{display:"grid",gridAutoFlow:"column",justifyContent:"start",columnGap:e.spacing(1.5),padding:e.spacing(.5),position:"relative",borderRadius:e.measure.borderRadius.medium,color:e.palette.text.primary,"&:hover":{backgroundColor:"dark"===e.palette.type?e.palette.groovy.neutral[500]:e.palette.groovy.neutral[200]},"&::before":{content:'""',position:"absolute",zIndex:e.zIndex.raise1,backgroundColor:e.palette.primary.main,borderTopRightRadius:e.measure.borderRadius.default,borderBottomRightRadius:e.measure.borderRadius.default,transition:"all 1000ms ease-in-out",left:"-".concat(e.spacing(M.HORIZONTAL_PADDING),"px")},"&:hover:not($active)":{"&::before":{top:"calc(50% - 4px)",width:4,height:8}}},active:{"&::before":{top:"calc(50% - 12px)",width:4,height:24}},domain:{textDecoration:"underline"},communityDetails:{display:"grid",alignItems:"center"}}})),v=(t(675811),t(285245)),b=t(669187),x=t(187351),k=t(240680),j=t(422578),C=t(616550),w=t(425108);function O(e){var n=e.membershipKey,a=e.testid,r=void 0===a?"CommunitySwitcherListItem":a,o=(0,j.useFragment)((void 0!==h||(h=t(675811)).hash&&"a30390d6262f16bb226f8f50341d7909"!==h.hash&&w.error("The definition of 'CommunitySwitcherListItemFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),h),n).organization,l=(0,C.k6)(),s=(0,v.vn)(),c=o.id===(null==s?void 0:s.id),d=Z();return(0,g.jsx)(m,{testid:r,title:o.name,subtitle:(0,k.TV)(o.primaryDomain),isActive:c,onClick:function(){c?l.push((0,C.Gn)(b.ZP.COMMUNITY.HOME.ROOT)):(0,x.XV)(o,s,b.ZP.COMMUNITY.HOME.ROOT)},badge:(0,g.jsx)(i.Z,{organizationKey:o,classes:{badge:d.badge}})})}var S,Z=(0,o.Z)((function(e){return{badge:{borderRadius:e.measure.borderRadius.big,overflow:"hidden"}}})),T=(t(493236),t(10165)),I=t(783358),_=t(4580),P=(t(244311),t(425108));var M,F,N=(0,o.Z)((function(e){return{list:{display:"flex",flexDirection:"column",gap:e.spacing(.5),padding:e.spacing(1.25,M.HORIZONTAL_PADDING)},container:{width:M.WIDTH,display:"grid",gridTemplateRows:"auto auto 1fr auto auto"}}}));(F=M||(M={})).HORIZONTAL_PADDING=1.5,F.WIDTH=296;var R=T.Z.withSkeleton({component:function(){var e=(0,v.vn)(),n=(0,_.Z)("whitelabel"),a=(0,j.useLazyLoadQuery)((void 0!==S||(S=t(493236)).hash&&"db84d14e0b0e91ff0fe33e73cd7b7a30"!==S.hash&&P.error("The definition of 'CommunitySwitcherListQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),S),{}).viewer,r=T.Z.connectionToArray(null==a?void 0:a.organizationMemberships),i=r.findIndex((function(n){return n.organizationId===(null==e?void 0:e.id)})),o=r.splice(i,1)[0],s=!n,c=N();return(0,g.jsxs)("div",{className:c.container,children:[(0,g.jsx)("div",{className:c.list,children:(0,g.jsx)(O,{testid:"CommunitySwitcherListItem.membership-".concat(0),membershipKey:o},o.id)}),r.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.o$,{marginBottom:0,marginTop:0}),(0,g.jsx)("div",{className:c.list,children:r.map((function(e,n){return(0,g.jsx)(O,{testid:"CommunitySwitcherListItem.membership-".concat(n+1),membershipKey:e},e.id)}))})]}),s&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.o$,{marginBottom:0,marginTop:0}),(0,g.jsx)(I.Z,{})]})]})},skeleton:function(){var e=N();return(0,g.jsxs)("div",{className:e.list,children:[(0,g.jsx)(f,{}),(0,g.jsx)(f,{}),(0,g.jsx)(f,{})]})}}),D=t(922261),E=t(963114);function K(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?K(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A,z=(0,o.Z)((function(e){return{badge:{position:"relative",borderRadius:e.measure.borderRadius.medium,overflow:"hidden",boxShadow:"0px 7px 0px -5px ".concat(e.palette.groovy.onDark[300])},paper:{padding:"0 !important",backgroundColor:e.palette.background.paper,boxShadow:e.palette.groovyDepths.insideCard,maxHeight:"85dvh"}}})),U=function(e){var n,t,a,r=e.testid,o=void 0===r?"CommunitySwitcherButton":r,c=e.dropdownPosition,d=e.tooltipPlacement,u=e.classes,p=(0,v.vn)(),m=(0,E.NP)("organization"),h=(0,D.f)().authUser,f=z();if(!p)return null;var y=(0,g.jsx)(i.Z,{testid:"".concat(o,".badge.").concat(p.slug),organizationKey:p,size:40,classes:{badge:f.badge}});return null!=h&&h.isTest?y:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(l.ZX,{testid:"".concat(o,".dropdown"),menuClasses:{paper:f.paper},vertical:null!==(n=null==c?void 0:c.vertical)&&void 0!==n?n:"top",horizontal:null!==(t=null==c?void 0:c.horizontal)&&void 0!==t?t:"right",transformOrigin:null!==(a=null==c?void 0:c.transformOrigin)&&void 0!==a?a:{vertical:0,horizontal:-4},menuButton:function(e){return(0,g.jsx)(s.Z,L(L({},e),{},{testid:"".concat(o,".community-switcher-button"),tooltip:m.plural,tooltipProps:{placement:d},className:null==u?void 0:u.menuButton,children:y}))},children:(0,g.jsx)(R,{})})})},B=t(345139),V=t(150587),Q=t(485116),q=t(459477),W=t(270124),Y=t(787417),G=t(177950),H=t(690752),$=t(457883),X=t(494204),J=t(151948),ee=t(632410),ne=t(660513),te=t(470609),ae=t(393180),re=(t(111170),t(804189)),ie=t(551567),oe=t(330940),le=t(425108);var se=(0,o.Z)((function(e){return{buttonContainer:{position:"relative"},notificationBadge:{position:"absolute",top:-2,right:-2,border:"2px solid ".concat(e.palette.background.default)},closeIcon:{color:e.palette.aiGradient.aiDark},iconButton:{width:40,height:40,padding:0,backgroundImage:"".concat(e.palette.aiGradient.aiLight,", ").concat(e.palette.aiGradient.aiDark),backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",border:"double 1px transparent",borderRadius:9999,"& svg":{width:24,height:24},"&:hover":{transform:"scale(1.1)"}}}})),ce=function(){var e=(0,J.Z)(),n=se(),a=(0,ee.Z)(),r=(0,v.vn)(),i=(0,j.useLazyLoadQuery)((void 0!==A||(A=t(111170)).hash&&"6c50aae02a877baa7687c679edbe62e3"!==A.hash&&le.error("The definition of 'OpenAIBotDrawerButtonQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),A),{id:r.id}).node,o=T.Z.narrowNodeType(i,"Organization"),s=T.Z.connectionToArray(null==o?void 0:o.chatChannels).filter((function(e){return e.isDefaultSuggestion})),c=s[0],d=(0,te.xo)(null==c?void 0:c.externalChannelId),u="active"===(0,oe.Z)();return o&&a?(0,g.jsx)(ne.aV,{children:(0,g.jsx)(l.t2,{content:a.name,disabled:u,placement:"right",children:(0,g.jsx)("div",{className:n.buttonContainer,children:(0,g.jsxs)(ie.Z,{className:n.iconButton,onClick:function(){d&&d.countUnread()>0?e.open(c.id):e.open()},disabled:!u,children:[e.isOpen?(0,g.jsx)(l.De,{className:n.closeIcon,icon:"close"}):(0,g.jsx)(ae.Z,{}),!e.isOpen&&(0,g.jsx)(re.Z,{className:n.notificationBadge,config:{streamChannelIds:s.map((function(e){return e.externalChannelId}))}})]})})})}):null},de=t(255119),ue=t(845689),pe=t(251941),ge=t(188191),me=t(571596);function he(e){var n,t,r,i,o=e.testid,l=void 0===o?"CommunityAppBar":o,s=e.variant,c=void 0===s?"vertical":s,d=e.classes,u=(0,ge.Z)(),m=u.globalSearch,h=u.aiChatBot,f=u.globalAdd,y=(0,v.vn)(),b=(0,me.Z)(y),x=(0,pe.A)(),k=(0,X.Z)(),j=fe({variant:c,isTablet:x,isWide:y.showGlobalTabTitles}),C=(0,pe.d)(),w=(0,oe.Z)(),O=(0,B.y)().shouldHideChecklist;return k?null:"active"!==w?(0,g.jsxs)("div",{className:p()(j.sidebar,j[c],null==d?void 0:d.sidebar),"data-testid":"".concat(l,".container"),children:[(0,g.jsxs)("div",{className:j.topContainer,children:[(0,g.jsx)(U,{testid:l,dropdownPosition:"horizontal"===c?{horizontal:"center",vertical:"top",transformOrigin:{vertical:"bottom",horizontal:"center"}}:void 0,tooltipPlacement:"horizontal"===c?"top":"right",classes:{menuButton:"horizontal"===c?j.menuButtonHorizontal:j.menuButtonVertical}}),((null==y?void 0:y.viewerIsOwnerOrAdmin)||(null===(r=y.viewerMembership)||void 0===r?void 0:r.hasInstructorOrManagerRole)||(null===(i=y.viewerMembership)||void 0===i?void 0:i.hasGroupLeadRole))&&!C&&(0,g.jsx)(Q.Z,{variant:c})]}),"vertical"===c&&(0,g.jsx)("div",{className:j.bottomContainer,children:(0,g.jsx)(de.Z,{dropdownPosition:{horizontal:"right",vertical:"bottom",transformOrigin:{vertical:0,horizontal:-4}}})})]}):(0,g.jsxs)("div",{className:p()(j.sidebar,j[c],null==d?void 0:d.sidebar),"data-testid":"".concat(l,".container"),children:[(0,g.jsxs)("div",{className:j.topContainer,children:[(0,g.jsx)(U,{testid:l,dropdownPosition:"horizontal"===c?{horizontal:"center",vertical:"top",transformOrigin:{vertical:"bottom",horizontal:"center"}}:void 0,tooltipPlacement:"horizontal"===c?"top":"right",classes:{menuButton:"horizontal"===c?j.menuButtonHorizontal:j.menuButtonVertical}}),(0,g.jsx)(W.Z,{variant:c}),y.isProductsEnabled&&(0,g.jsx)(H.Z,{variant:c}),(null==y?void 0:y.isEventsEnabled)&&(0,g.jsx)(Y.Z,{variant:c}),(null==y?void 0:y.isChatEnabled)&&(0,g.jsx)(q.Z,{variant:c}),m&&C&&(0,g.jsx)($.Z,{variant:c}),"horizontal"===c&&(0,g.jsx)(G.Z,{testid:"".concat(l,".notification-center-button"),variant:c}),"horizontal"===c&&(0,g.jsx)(V.Z,{testid:"".concat(l,".bookmarks-button"),variant:c}),((null==y?void 0:y.viewerIsOwnerOrAdmin)||(null===(n=y.viewerMembership)||void 0===n?void 0:n.hasInstructorOrManagerRole)||(null===(t=y.viewerMembership)||void 0===t?void 0:t.hasGroupLeadRole))&&!C&&(0,g.jsx)(Q.Z,{variant:c})]}),"vertical"===c&&(0,g.jsxs)("div",{className:j.bottomContainer,children:[h&&y.isChatBotEnabled&&b.has("chat_bot.interact")&&(0,g.jsx)(ce,{}),!O&&(0,g.jsx)(a.Z,{testid:"CommunityAppBar"}),f&&!C&&(0,g.jsx)(ue.Z,{}),(0,g.jsx)(de.Z,{dropdownPosition:{horizontal:"right",vertical:"bottom",transformOrigin:{vertical:0,horizontal:-4}}})]})]})}var fe=(0,o.Z)((function(e){return{sidebar:{display:"flex",gap:e.spacing(1.5)},vertical:function(n){return{height:"100%",width:n.isWide?100:e.measure.page.communitySwitcherWidth,flexShrink:0,flexDirection:"column",alignItems:"center",justifyContent:"space-between",padding:e.spacing(2.5,2),overflowY:"auto",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none"}},horizontal:{width:"100%",minHeight:56,flexDirection:"row-reverse",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.background.paper,borderTop:e.palette.constants.borderSmall,padding:e.spacing(1.5,0)},topContainer:function(n){var t=n.variant,a=n.isTablet;return{display:"flex",flexDirection:"horizontal"===t?"row":"column",alignItems:"center",gap:e.spacing("horizontal"===t?.25:1.5),justifyContent:"space-evenly",width:a?"unset":"100%"}},bottomContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)},menuButtonHorizontal:{paddingTop:e.spacing(.5),marginTop:e.spacing(-.5)},menuButtonVertical:{marginBottom:e.spacing(.75)}}}))},697798:function(e,n,t){t.d(n,{Z:function(){return h}});var a,r=t(655496),i=(t(505090),t(183495)),o=t(810863),l=t(541321),s=t(108920),c=t(240680),d=t(294184),u=t.n(d),p=t(422578),g=t(785893),m=t(425108);function h(e){var n=e.testid,o=void 0===n?"CommunityBadge":n,d=e.organizationKey,h=e.size,y=void 0===h?48:h,v=e.customClassName,b=e.classes,x=(0,p.useFragment)((void 0!==a||(a=t(505090)).hash&&"3a8c5543551fa6e075262be53ab9ffe6"!==a.hash&&m.error("The definition of 'CommunityBadgeFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),d),k=x.name,j=x.badge,C=(0,s.Z)(),w=f(),O=i.Z.getContrastColor(C,(null==j?void 0:j.color)||C.palette.common.white),S="icon"===(null==j?void 0:j.kind)&&!(null!=j&&j.icon);return(0,g.jsxs)("div",{"data-testid":o,className:u()(w.badge,v),children:[(0,g.jsx)(r.Z,{badgeKey:j,size:y,fallbackColor:C.palette.groovy.neutral[100],className:null==b?void 0:b.badge}),S&&(0,g.jsx)(l.U4,{className:w.acronym,setColor:O,children:(0,c.JJ)(k).slice(0,2)})]})}var f=(0,o.Z)({badge:{position:"relative",width:"max-content"},acronym:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})},505090:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommunityBadgeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Badge",kind:"LinkedField",name:"badge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"kind",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{args:null,kind:"FragmentSpread",name:"BadgeFragment"}],storageKey:null}],type:"Organization",abstractKey:null,hash:"3a8c5543551fa6e075262be53ab9ffe6"};n.default=a},326584:function(e,n,t){t.d(n,{Z:function(){return F}});var a=t(349096),r=t(285245),i=t(820965),o=t(501067),l=t(669187),s=t(189777),c=t(432827),d=t(330940),u=t(868112),p=t(616550),g=t(785893),m=(0,u.Z)((function(){return Promise.resolve().then(t.bind(t,921927))})),h=(0,u.Z)((function(){return t.e(1720).then(t.bind(t,833904))})),f=(0,u.Z)((function(){return t.e(3467).then(t.bind(t,70670))})),y=(0,u.Z)((function(){return t.e(3324).then(t.bind(t,444362))})),v=(0,u.Z)((function(){return t.e(4979).then(t.bind(t,574993))})),b=(0,u.Z)((function(){return t.e(9107).then(t.bind(t,148270))})),x=(0,u.Z)((function(){return Promise.resolve().then(t.bind(t,577879))})),k=(0,u.Z)((function(){return t.e(9569).then(t.bind(t,793915))})),j=(0,u.Z)((function(){return Promise.resolve().then(t.bind(t,180349))})),C=(0,u.Z)((function(){return t.e(2655).then(t.bind(t,272504))})),w=(0,u.Z)((function(){return t.e(6635).then(t.bind(t,956557))})),O=(0,u.Z)((function(){return t.e(4129).then(t.bind(t,876210))})),S=(0,u.Z)((function(){return Promise.all([t.e(6972),t.e(2138),t.e(98),t.e(4467),t.e(4492),t.e(4989),t.e(6966),t.e(6736),t.e(9496),t.e(3506),t.e(4561),t.e(731),t.e(9658),t.e(5647),t.e(8089),t.e(8126),t.e(8469),t.e(7884),t.e(7791),t.e(4796),t.e(6594),t.e(8790),t.e(624),t.e(2166),t.e(4835),t.e(9777),t.e(5991),t.e(6574),t.e(3479),t.e(4980),t.e(4412),t.e(8991),t.e(6273),t.e(4343),t.e(3365),t.e(2360),t.e(1439),t.e(1748),t.e(7841),t.e(8587),t.e(9657),t.e(5702),t.e(1142),t.e(3971),t.e(6381),t.e(457),t.e(6611),t.e(4137),t.e(4362),t.e(5851),t.e(9761),t.e(2935),t.e(3063),t.e(6387),t.e(5538),t.e(1978),t.e(5341),t.e(8212),t.e(1334),t.e(9905)]).then(t.bind(t,227251))})),Z=(0,u.Z)((function(){return Promise.all([t.e(6972),t.e(2138),t.e(98),t.e(4467),t.e(4492),t.e(4989),t.e(6966),t.e(6736),t.e(9496),t.e(3506),t.e(4561),t.e(731),t.e(9658),t.e(5647),t.e(8089),t.e(8126),t.e(8469),t.e(7884),t.e(7791),t.e(4796),t.e(6594),t.e(8790),t.e(624),t.e(2166),t.e(4835),t.e(9777),t.e(5991),t.e(6574),t.e(3479),t.e(4980),t.e(4412),t.e(8991),t.e(6273),t.e(4343),t.e(3365),t.e(2360),t.e(1439),t.e(1748),t.e(7841),t.e(8587),t.e(9657),t.e(5702),t.e(1142),t.e(3971),t.e(6381),t.e(457),t.e(6611),t.e(4137),t.e(4362),t.e(5851),t.e(9761),t.e(2935),t.e(3063),t.e(6387),t.e(5538),t.e(1978),t.e(5341),t.e(8212),t.e(1334),t.e(7715)]).then(t.bind(t,997284))})),T=(0,u.Z)((function(){return t.e(5509).then(t.bind(t,56385))})),I=(0,u.Z)((function(){return Promise.resolve().then(t.bind(t,349096))})),_=(0,u.Z)((function(){return Promise.all([t.e(6972),t.e(2138),t.e(98),t.e(4467),t.e(4492),t.e(4989),t.e(6966),t.e(6736),t.e(9496),t.e(3506),t.e(4561),t.e(731),t.e(9658),t.e(5647),t.e(8089),t.e(8126),t.e(8469),t.e(7884),t.e(7791),t.e(4796),t.e(6594),t.e(8790),t.e(624),t.e(2166),t.e(4835),t.e(9777),t.e(5991),t.e(6574),t.e(3479),t.e(4980),t.e(4412),t.e(8991),t.e(6273),t.e(4343),t.e(3365),t.e(2360),t.e(1439),t.e(1748),t.e(7841),t.e(8587),t.e(9657),t.e(5702),t.e(1142),t.e(3971),t.e(6381),t.e(457),t.e(6611),t.e(4137),t.e(4362),t.e(5851),t.e(9761),t.e(2935),t.e(3063),t.e(6387),t.e(5538),t.e(1978),t.e(5341),t.e(8212),t.e(1334),t.e(8674)]).then(t.bind(t,866702))})),P=(0,u.Z)((function(){return t.e(184).then(t.bind(t,586391))})),M=(0,u.Z)((function(){return t.e(25).then(t.bind(t,38315))}));function F(){var e=(0,p.TH)(),n=(0,r.vn)(),t=(0,d.Z)();return"active"!==t?(0,g.jsx)(j,{standing:t}):(0,g.jsx)(s.Z,{metaDetailsForSharing:{title:n.name,url:window.location.href,description:n.description||"",coverPhoto:n.cover||""},metaTitle:n.name,children:(0,g.jsxs)(p.rs,{children:[(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.WEBVIEW.BOOKMARKS,exact:!0,permission:"content.read",entityKey:n,children:(0,g.jsx)(h,{type:"bookmarks"})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.WEBVIEW.PROFILE,exact:!0,permission:"members.read",entityKey:n,children:(0,g.jsx)(h,{type:"profileSettings"})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.WEBVIEW.QUIZ,exact:!0,permission:"web_forms.read",entityKey:n,children:(0,g.jsx)(h,{type:"quiz"})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.WEBVIEW.ASSIGNMENT.SUBMISSION,exact:!0,permission:"assignments.read",entityKey:n,children:(0,g.jsx)(y,{})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.WEBVIEW.EDITOR,exact:!0,permission:"content.read",entityKey:n,children:(0,g.jsx)(f,{})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.WEBVIEW.BRAIN_SEARCH,exact:!0,permission:"content.read",entityKey:n,children:(0,g.jsx)(v,{})}),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.WEBVIEW.MEMBER_ONBOARDING,exact:!0,children:(0,g.jsx)(c.Z,{})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.MEMBERS.LIST,exact:!0,permission:"organization_members.read",entityKey:n,children:(0,g.jsx)(w,{})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.MEMBER_DIRECTORY,exact:!0,permission:"apps.read",entityKey:n,children:(0,g.jsx)(w,{})}),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.EXPERIENCES.ROOT,permission:"organization_experiences.read",entityKey:n,children:(0,g.jsx)(T,{})},"route:=".concat(l.ZP.COMMUNITY.EXPERIENCES.ROOT)),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.COLLECTION.DETAIL,permission:"collections.read",entityKey:n,children:(0,g.jsx)(_,{})},"route:=".concat(l.ZP.COMMUNITY.COLLECTION.DETAIL)),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.GROUP_DIRECTORY.DETAIL,permission:"apps.read",entityKey:n,children:(0,g.jsx)(M,{})},"route:=".concat(l.ZP.COMMUNITY.GROUP_DIRECTORY.DETAIL)),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.EVENTS_CALENDAR.ROOT,permission:"organization_events.read",entityKey:n,children:(0,g.jsx)(x,{})},"route:=".concat(l.ZP.COMMUNITY.EVENTS_CALENDAR.ROOT)),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.EVENTS.APP,permission:"organization_events.read",entityKey:n,children:(0,g.jsx)(x,{isCommunityEventsApp:!0})},"route:=".concat(l.ZP.COMMUNITY.EVENTS.APP)),(0,g.jsx)(p.AW,{path:l.ZP.COMMUNITY.SHARE.OCCURRENCE.ROOT,children:(0,g.jsx)(k,{})},"route:=".concat(l.ZP.COMMUNITY.SHARE.OCCURRENCE.ROOT)),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.DIRECT_MESSAGES.ROOT,children:(0,g.jsx)(C,{})},"routes:=".concat(l.ZP.COMMUNITY.DIRECT_MESSAGES.ROOT)),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.CHAT.CHANNEL,entityKey:n,permission:"chat.read",metaTitle:"".concat(n.name," - Channels"),children:(0,g.jsx)(S,{})}),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.THREADS.DETAIL_ROOT,exact:!0,children:(0,g.jsx)(a.ThreadPageContentSkeleton,{})},"routes:=".concat(l.ZP.COMMUNITY.THREADS.DETAIL_ROOT)),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.THREADS.DETAIL_EMPTY,exact:!0,children:(0,g.jsx)(m,{state:"threads"})},"routes:=".concat(l.ZP.COMMUNITY.THREADS.DETAIL_EMPTY)),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.THREADS.DETAIL,children:(0,g.jsx)(I,{})},"routes:=".concat(l.ZP.COMMUNITY.THREADS.DETAIL)),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.THREADS.ROOT,children:(0,g.jsx)(O,{})},"routes:=".concat(l.ZP.COMMUNITY.THREADS.ROOT)),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL_ROOT,exact:!0,children:(0,g.jsx)(a.ThreadPageContentSkeleton,{})},"routes:=".concat(l.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL_ROOT)),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL_EMPTY,exact:!0,children:(0,g.jsx)(m,{state:"dm"})},"routes:=".concat(l.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL_EMPTY)),(0,g.jsx)(i.Z,{path:l.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL,children:(0,g.jsx)(Z,{})},"routes:=".concat(l.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL)),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.FEED.POSTS.LIST,permission:"apps.read",entityKey:n,children:(0,g.jsx)(b,{})},"route:=".concat(l.ZP.COMMUNITY.FEED.POSTS.LIST)),(0,g.jsx)(o.Z,{path:l.ZP.COMMUNITY.DASHBOARD_APP.DETAIL,permission:"apps.read",entityKey:n,children:(0,g.jsx)(P,{})},"route:=".concat(l.ZP.COMMUNITY.DASHBOARD_APP.DETAIL)),(0,g.jsx)(p.AW,{children:(0,g.jsxs)(p.rs,{children:[(0,g.jsx)(p.l_,{from:"/people/profile/:profileId",to:e.pathname.replace("/people/profile","/members")}),(0,g.jsx)(p.l_,{from:"/experiences/all",to:l.ZP.COMMUNITY.EXPERIENCES.COURSES.ALL}),(0,g.jsx)(p.l_,{from:"/experiences/upcoming",to:l.ZP.COMMUNITY.EXPERIENCES.COURSES.UPCOMING}),(0,g.jsx)(p.l_,{from:"/experiences/past",to:l.ZP.COMMUNITY.EXPERIENCES.COURSES.PAST}),(0,g.jsx)(p.l_,{to:l.ZP.COMMUNITY.HOME.ROOT})]})})]})})}},675811:function(e,n,t){t.r(n);t(244311);var a,r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommunitySwitcherListItemFragment",selections:[{alias:null,args:null,concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,concreteType:"Badge",kind:"LinkedField",name:"badge",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"kind",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{args:null,kind:"FragmentSpread",name:"BadgeFragment"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"primaryDomain",storageKey:null},{args:null,kind:"FragmentSpread",name:"CommunityBadgeFragment"}],storageKey:null}],type:"OrganizationMembership",abstractKey:null};r.hash="a30390d6262f16bb226f8f50341d7909",n.default=r},493236:function(e,n,t){t.r(n);t(244311);var a,r,i,o={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommunitySwitcherListQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:r=[{kind:"Literal",name:"direction",value:"DESC"},{kind:"Literal",name:"field",value:"creation_datetime"}],concreteType:"OrganizationMembershipNodeConnection",kind:"LinkedField",name:"organizationMemberships",plural:!1,selections:[{alias:null,args:null,concreteType:"OrganizationMembershipNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"OrganizationMembership",kind:"LinkedField",name:"node",plural:!1,selections:[a,i={alias:null,args:null,kind:"ScalarField",name:"organizationId",storageKey:null},{args:null,kind:"FragmentSpread",name:"CommunitySwitcherListItemFragment"}],storageKey:null}],storageKey:null}],storageKey:'organizationMemberships(direction:"DESC",field:"creation_datetime")'}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CommunitySwitcherListQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,{alias:null,args:r,concreteType:"OrganizationMembershipNodeConnection",kind:"LinkedField",name:"organizationMemberships",plural:!1,selections:[{alias:null,args:null,concreteType:"OrganizationMembershipNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"OrganizationMembership",kind:"LinkedField",name:"node",plural:!1,selections:[a,i,{alias:null,args:null,concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,concreteType:"Badge",kind:"LinkedField",name:"badge",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"kind",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emoji",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUrl",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"primaryDomain",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'organizationMemberships(direction:"DESC",field:"creation_datetime")'}],storageKey:null}]},params:{cacheID:"72f38cc04ea8753751b9e913d02f4e8b",id:null,metadata:{},name:"CommunitySwitcherListQuery",operationKind:"query",text:"query CommunitySwitcherListQuery {\n  viewer {\n    id\n    organizationMemberships(field: creation_datetime, direction: DESC) {\n      edges {\n        node {\n          id\n          organizationId\n          ...CommunitySwitcherListItemFragment\n        }\n      }\n    }\n  }\n}\n\nfragment BadgeFragment on Badge {\n  kind\n  color\n  icon\n  emoji\n  mediaUrl\n}\n\nfragment CommunityBadgeFragment on Organization {\n  name\n  badge {\n    id\n    kind\n    icon\n    color\n    ...BadgeFragment\n  }\n}\n\nfragment CommunitySwitcherListItemFragment on OrganizationMembership {\n  organization {\n    id\n    name\n    slug\n    badge {\n      id\n      kind\n      icon\n      color\n      ...BadgeFragment\n    }\n    primaryDomain\n    ...CommunityBadgeFragment\n  }\n}\n"}};o.hash="db84d14e0b0e91ff0fe33e73cd7b7a30",n.default=o},111170:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"OpenAIBotDrawerButtonQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"kinds",value:["chat_bot"]}],concreteType:"ChatChannelNodeConnection",kind:"LinkedField",name:"chatChannels",plural:!1,selections:[{alias:null,args:null,concreteType:"ChatChannelNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ChatChannel",kind:"LinkedField",name:"node",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDefaultSuggestion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"externalChannelId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'chatChannels(kinds:["chat_bot"])'}],type:"Organization",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"OpenAIBotDrawerButtonQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,l,o],storageKey:null}]},params:{cacheID:"86a3da3d22bb6082da7bf8e8e050abb7",id:null,metadata:{},name:"OpenAIBotDrawerButtonQuery",operationKind:"query",text:"query OpenAIBotDrawerButtonQuery(\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ... on Organization {\n      chatChannels(kinds: [chat_bot]) {\n        edges {\n          node {\n            id\n            isDefaultSuggestion\n            externalChannelId\n          }\n        }\n      }\n    }\n    id\n  }\n}\n"}};s.hash="6c50aae02a877baa7687c679edbe62e3",n.default=s},347776:function(e,n,t){var a=t(204942),r=t(145987),i=t(393180),o=t(810863),l=t(317145),s=t(14492),c=t(294184),d=t.n(c),u=t(785893),p=["testid","message","buttons","noIcon","classes"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var m=(0,o.Z)((function(e){return{banner:{gap:e.spacing(1),padding:e.spacing(1.5),background:"".concat("dark"===e.palette.type?e.palette.aiGradient.bluePurpleDark:e.palette.aiGradient.aiLight," padding-box, ").concat(e.palette.aiGradient.bluePurple02," border-box"),border:"1px solid transparent"},icon:{width:"24px",height:"24px"}}}));n.Z=function(e){var n=e.testid,t=e.message,o=e.buttons,c=e.noIcon,h=e.classes,f=(0,r.Z)(e,p),y=m();return(0,u.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({testid:n,variant:"copilot",classes:{banner:d()(y.banner,null==h?void 0:h.banner),icon:y.icon,buttons:null==h?void 0:h.buttons},icon:c?void 0:(0,u.jsx)(i.Z,{width:24,height:24}),message:"string"==typeof t?(0,u.jsx)(l.Z,{variant:"heading-xs-700",children:t}):t,buttons:o},f))}},111740:function(e,n,t){var a=t(204942),r=t(145987),i=t(393180),o=t(810863),l=t(92839),s=t(541321),c=t(108920),d=t(294184),u=t.n(d),p=t(785893),g=["children","variant","size","transparentBg"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=(0,o.Z)((function(e){return{container:function(n){var t=n.variant,a=n.transparentBg;return h(h({background:e.palette.aiGradient.bluePurple03},(0,l.Z)("outlined"===t,{border:"1px solid transparent",borderRadius:e.measure.borderRadius.medium,background:"linear-gradient(".concat(e.palette.background.paper," 0 0) padding-box, ").concat("dark"===e.palette.type?e.palette.aiGradient.bluePurple02:e.palette.aiGradient.bluePurple03," border-box"),"& > span, p, svg":{backgroundImage:"dark"===e.palette.type?e.palette.aiGradient.bluePurple02:e.palette.aiGradient.bluePurple03,backgroundClip:"text",textFillColor:"transparent"}})),(0,l.Z)("outlined"===t&&a,{background:"transparent",border:"none","&:hover":{backgroundColor:"".concat(e.palette.groovy.neutral[200]," !important")}}))}}}));n.Z=function(e){var n=e.children,t=e.variant,a=void 0===t?"contained":t,o=e.size,l=void 0===o?"small":o,d=e.transparentBg,m=(0,r.Z)(e,g),y=f({variant:a,transparentBg:d}),v=(0,c.Z)();return(0,p.jsx)(s.v2,h(h({spinnerColor:"outlined"===a?v.palette.aiColors.blue:void 0},m),{},{leftIcon:function(){if(e.noIcon)return;return"outlined"===a?(0,p.jsx)(i.Z,{}):"stars"}(),className:u()(y.container,m.className),size:l,children:n}))}},135030:function(e,n,t){var a=t(178889),r=t(934702),i=t(810863),o=t(294184),l=t.n(o),s=t(785893);var c=(0,i.Z)((function(e){return{root:{borderRadius:"50%",display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},medium:{minHeight:24,minWidth:24,height:24,width:24,padding:e.spacing(.25)},small:{minHeight:18,minWidth:18,height:18,width:18,padding:e.spacing(.25)},icon:{width:"100%",height:"100%",display:"block"},checked:{background:"dark"===e.palette.type?e.palette.aiGradient.bluePurple02:e.palette.aiGradient.bluePurple03,color:"dark"===e.palette.type?e.palette.common.black:e.palette.common.white},unchecked:{backgroundColor:e.palette.background.paper,border:"1.5px solid ".concat(e.palette.divider)},error:{backgroundColor:e.palette.error.main,color:"dark"===e.palette.type?e.palette.common.black:e.palette.common.white}}}));n.Z=function(e){var n=e.hasError,t=e.isChecked,i=e.size,o=void 0===i?"medium":i,d=e.testid,u=void 0===d?"AICheck":d,p=c();return n?(0,s.jsx)("div",{"data-testid":u,className:l()(p.root,p.error,p[o]),children:(0,s.jsx)(r.default,{className:p.icon})}):(0,s.jsx)("div",{"data-testid":u,className:l()(p.root,p[o],t?p.checked:p.unchecked),children:t?(0,s.jsx)(a.default,{className:p.icon}):null})}},413636:function(e,n,t){var a=t(810863),r=t(317145),i=t(294184),o=t.n(i),l=t(785893);var s=(0,a.Z)((function(e){return{container:{display:"flex",minHeight:"26px",alignItems:"center",borderRadius:e.measure.borderRadius.xl,padding:e.spacing(0,1),background:"dark"===e.palette.type?e.palette.aiGradient.bluePurpleDark:e.palette.aiGradient.bluePurpleLight,width:"fit-content"}}}));n.Z=function(e){var n=e.testid,t=void 0===n?"AIChip":n,a=e.name,i=e.className,c=s();return(0,l.jsx)("div",{className:o()(c.container,i),children:(0,l.jsx)(r.Z,{testid:t,variant:"body-xs-500",children:a})})}},624377:function(e,n,t){var a=t(941444),r=t(541321),i=t(785893);n.Z=function(){return(0,i.jsx)(r.Lj,{icon:(0,i.jsx)(a.Z,{}),height:28,width:28})}},211689:function(e,n,t){var a=t(220735),r=t(541321),i=t(785893);n.Z=function(){return(0,i.jsx)(r.Lj,{icon:(0,i.jsx)(a.Z,{}),height:28,width:28})}},127369:function(e,n,t){var a=t(204942),r=t(145987),i=t(3959),o=t(810863),l=t(541321),s=t(757336),c=(t(667294),t(785893)),d=["showBadge","testid","onEnterPress"];function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,o.Z)((function(e){return{aiInput:{backgroundColor:e.palette.groovy.neutral[100],boxShadow:e.palette.groovyDepths.xs,border:"solid 1px ".concat(e.palette.groovy.neutral[200]),"&:hover:not(.Mui-focused)":{borderColor:e.palette.groovy.purple["dark"===e.palette.type?600:300],backgroundColor:e.palette.background.paper},"&.Mui-focused":{borderColor:"transparent",borderRadius:e.measure.borderRadius.big,boxShadow:"0px 0px 0px 3px ".concat(e.palette.groovy.purple["dark"===e.palette.type?600:200]),backgroundImage:"linear-gradient(".concat(e.palette.background.paper,", ").concat(e.palette.background.paper,"), ").concat(e.palette.aiGradient.aiDark),backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box"}},space:{"& svg":{width:20,height:20},padding:e.spacing(0,1,0,0),marginBottom:e.spacing(-2)}}}));n.Z=(0,s.Pi)((function(e,n){var t=e.showBadge,a=void 0===t||t,o=e.testid,s=e.onEnterPress,u=(0,r.Z)(e,d),m=g();return(0,c.jsx)(l.z6,p(p({ref:n,minHeight:"24px"},u),{},{classes:{root:m.aiInput},"data-testid":o,padding:"10px 12px",multiline:!0,autoFocus:!0,startAdornment:a&&(0,c.jsx)("div",{className:m.space,children:(0,c.jsx)(i.Z,{size:20})}),onKeyDown:function(e){"Tab"===e.key&&!e.shiftKey&&!e.currentTarget.value&&u.placeholder&&u.onChange&&(e.preventDefault(),u.onChange({target:{value:u.placeholder}})),"Enter"!==e.key||e.nativeEvent.isComposing||e.shiftKey||!s||(e.preventDefault(),s(e))}}))}),{forwardRef:!0})},345381:function(e,n,t){var a=t(245031),r=t(541321),i=t(785893);n.Z=function(){return(0,i.jsx)(r.Lj,{icon:(0,i.jsx)(a.Z,{})})}},899824:function(e,n,t){var a=t(810863),r=t(317145),i=t(294184),o=t.n(i),l=t(785893);var s=(0,a.Z)((function(e){return{container:{borderRadius:e.measure.borderRadius.default,padding:e.spacing(0,1),background:"dark"===e.palette.type?e.palette.aiGradient.bluePurpleDark:e.palette.aiGradient.bluePurpleLight}}}));n.Z=function(e){var n=e.name,t=e.className,a=s();return(0,l.jsx)("div",{className:o()(a.container,t),children:(0,l.jsx)(r.Z,{variant:"body-xs-600",children:n})})}},317145:function(e,n,t){var a=t(204942),r=t(145987),i=t(810863),o=t(579266),l=t(541321),s=t(785893),c=["children","disabled"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=(0,i.Z)((function(e){return{root:function(n){return u({},n.disabled?{color:"var(--groovy-grey-300)"}:{backgroundImage:"dark"===e.palette.type?e.palette.aiGradient.bluePurple02:e.palette.aiGradient.bluePurple03,backgroundClip:"text",textFillColor:"transparent"})}}}));n.Z=function(e){var n=e.children,t=e.disabled,a=(0,r.Z)(e,c),i=p({disabled:t});return(0,s.jsx)(l.U4,u(u({},a),{},{classes:(0,o.Z)({root:i.root},a.classes),children:n}))}},31976:function(e,n,t){var a=t(204942),r=t(145987),i=t(810863),o=t(541321),l=t(609043),s=t(785893),c=["children","className","shouldDisplaySpinner","leftIcon","textVariant","emphasized"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=(0,i.Z)((function(e){return{root:function(n){var t=n.shouldDisplaySpinner;return{padding:e.spacing(.5),backgroundImage:t?e.palette.aiGradient.bluePurple03:"dark"===e.palette.type?e.palette.aiGradient.bluePurple02:e.palette.aiGradient.bluePurple03,backgroundClip:"text",textFillColor:t?"rgba(255, 255, 255, 0.5)":"transparent"}},icon:function(n){var t=n.emphasized;return{"& svg":{color:e.palette.groovy.blue[t?500:300]}}},spinnerWrapper:function(){return{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}}}));n.Z=function(e){var n=e.children,t=e.className,a=e.shouldDisplaySpinner,i=e.leftIcon,d=e.textVariant,g=e.emphasized,m=(0,r.Z)(e,c),h=p({shouldDisplaySpinner:a,emphasized:g}),f=a?(0,s.jsx)("div",{className:h.spinnerWrapper,children:(0,s.jsx)(l.Z,{size:"mini"})}):void 0;return(0,s.jsx)(o.GY,u(u({},m),{},{className:t,classes:{root:h.root},leftIcon:f||i,leftIconClassname:h.icon,rightIconClassname:h.icon,textVariant:null!=d?d:void 0,children:n}))}},590340:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"channelId"}],kind:"Fragment",metadata:null,name:"useCanTriggerAIMessageSuggestionQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"channelId"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"viewerPermissions",storageKey:null}],type:"ChatChannel",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useCanTriggerAIMessageSuggestionQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[o,i,{kind:"InlineFragment",selections:[l],type:"ChatChannel",abstractKey:null}],storageKey:null}]},params:{cacheID:"3c97e1f9a452ede4674e117d7a76b9a6",id:null,metadata:{},name:"useCanTriggerAIMessageSuggestionQuery",operationKind:"query",text:"query useCanTriggerAIMessageSuggestionQuery(\n  $channelId: ID!\n) {\n  node(id: $channelId) {\n    __typename\n    ... on ChatChannel {\n      id\n      __typename\n      viewerPermissions\n    }\n    id\n  }\n}\n"}};s.hash="840fa21d675bef0a8b3b5d4907716107",n.default=s},173964:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"feedId"}],kind:"Fragment",metadata:null,name:"useCanTriggerAIPostSuggestionQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"feedId"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"viewerPermissions",storageKey:null}],type:"Feed",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useCanTriggerAIPostSuggestionQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,o,{kind:"InlineFragment",selections:[l],type:"Feed",abstractKey:null}],storageKey:null}]},params:{cacheID:"80ddef5411a9aabdbdca6123c8aba36a",id:null,metadata:{},name:"useCanTriggerAIPostSuggestionQuery",operationKind:"query",text:"query useCanTriggerAIPostSuggestionQuery(\n  $feedId: ID!\n) {\n  node(id: $feedId) {\n    __typename\n    ... on Feed {\n      __typename\n      id\n      viewerPermissions\n    }\n    id\n  }\n}\n"}};s.hash="6946873f064f182ba7d591b9339efe09",n.default=s},908608:function(e,n,t){var a,r=t(10165),i=(t(590340),t(188191)),o=t(4580),l=t(422578),s=t(425108);n.Z=function(e){var n=e.channelId,c=(0,o.Z)("ai_inline_prompts"),d=(0,i.Z)().aiInlinePrompts,u=(0,l.useLazyLoadQuery)((void 0!==a||(a=t(590340)).hash&&"840fa21d675bef0a8b3b5d4907716107"!==a.hash&&s.error("The definition of 'useCanTriggerAIMessageSuggestionQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{channelId:n}).node;return!(!c||!d)&&(!!r.Z.isNodeType(u,"ChatChannel")&&u.viewerPermissions.includes("chat.manage"))}},604143:function(e,n,t){var a,r=t(10165),i=(t(173964),t(188191)),o=t(4580),l=t(422578),s=t(425108);n.Z=function(e){var n=e.feedId,c=(0,i.Z)().aiInlinePrompts,d=(0,o.Z)("ai_inline_prompts"),u=(0,l.useLazyLoadQuery)((void 0!==a||(a=t(173964)).hash&&"6946873f064f182ba7d591b9339efe09"!==a.hash&&s.error("The definition of 'useCanTriggerAIPostSuggestionQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{feedId:n}).node;return!!r.Z.isNodeType(u,"Feed")&&(!(!d||!c)&&u.viewerPermissions.includes("posts.create"))}},255119:function(e,n,t){t.d(n,{Z:function(){return M}});var a=t(827981),r=t(285245),i=t(69722),o=t(922261),l=t(753688),s=t(963114),c=t(187351),d=t(265578),u=t(356677),p=t(810863),g=t(204942),m=t(145987),h=t(276979),f=t(541321),y=t(704024),v=t(294184),b=t.n(v),x=t(667294),k=t(785893),j=["onClick","classes"];function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=(0,p.Z)({avatar:{"&:hover":{transform:"scale(1.1)"}},userButton:{position:"relative",textAlign:"left"},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:"40px",height:"40px"}}),S=function(e){var n=e.onClick,t=e.classes,a=(0,m.Z)(e,j),r=(0,o.f)().authUser,i=O();return(0,k.jsx)(f.t2,{content:"Profile",placement:"right",children:(0,k.jsx)(y.Z,w(w({className:b()(i.userButton,"fs-mask"),onClick:n},a),{},{children:(0,k.jsx)("div",{className:b()(i.avatarContainer,null==t?void 0:t.avatarContainer),children:(0,k.jsx)(h.Z,{userKey:r,size:40,testid:"AuthenticatedUserDropdown.UserAvatar",placeholderClassName:i.avatar})})}))})},Z=t(418046),T=t(162083),I=t(330940);function _(e){var n,t=e.className,p=e.classes,g=e.dropdownPosition,m=e.logoutOnly,h=void 0!==m&&m,y=(0,o.f)({required:!0}).authUser,v=(0,r.vn)(),x=P(),j=(0,l.P)("profileSettings"),C=(0,c.NW)(),w=(0,s.NP)("admin_member"),O=(0,i.R6)(),_="active"===(0,I.Z)(),M=(0,l.P)("profileSettings"),F=(0,a.a)(),N=!!v&&Boolean(v.viewerMembership),R=(null==O?void 0:O.viewerIsManagerOrInstructor)||(null==v?void 0:v.viewerPermissions.has("members.manage"))&&_&&!(0,c.qB)(location.pathname);return(0,k.jsx)("div",{className:b()(x.dropdownContainer,t),children:(0,k.jsxs)(f.ZX,{menuButton:function(e){var n=e.onClick;return(0,k.jsx)(S,{onClick:n,"data-testid":"AuthenticatedUserDropdownButton",classes:{avatarContainer:null==p?void 0:p.avatarContainer}})},menuClasses:{paper:x.dropdownStyles},horizontal:null!==(n=null==g?void 0:g.horizontal)&&void 0!==n?n:500,vertical:null==g?void 0:g.vertical,transformOrigin:null==g?void 0:g.transformOrigin,children:[!h&&N&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(T.Z,{testid:"AuthenticatedUserDropdown.profile-settings",onClick:function(){j.open({drawerProfileId:y.id,profileSettingsTab:"profile"})},icon:(0,k.jsx)(u.default,{width:24,height:24}),title:"My Profile"}),(null==v?void 0:v.viewerPermissions.has("test_users.manage"))&&(0,k.jsx)(Z.Z,{children:function(e){var n=e.onClick;return(0,k.jsx)(T.Z,{testid:"AuthenticatedUserDropdown.test-users",onClick:n,icon:(0,k.jsx)(f.De,{icon:"iconsax.coin"}),title:"Test Members",rightIcon:(0,k.jsx)(f.De,{icon:"chevron",rotate:"90"})})}}),R&&(0,k.jsx)(T.Z,{testid:"AuthenticatedUserDropdown.view-as-member",onClick:C,icon:(0,k.jsx)(f.De,{icon:"eye"}),title:"Preview as ".concat(w.singular)}),(0,k.jsx)(T.Z,{testid:"AuthenticatedUserDropdown.notification-preferences",onClick:function(){M.open({drawerProfileId:y.id,profileSettingsTab:"notifications"})},icon:(0,k.jsx)(f.De,{icon:"bell"}),title:"Notification Preferences"})]}),(0,k.jsx)(T.Z,{testid:"AuthenticatedUserDropdown.logout",onClick:F,icon:(0,k.jsx)(d.default,{width:24,height:24}),title:"Sign Out"})]})})}var P=(0,p.Z)((function(e){return{dropdownContainer:{position:"relative"},dropdownStyles:{backgroundColor:e.palette.background.paper,boxShadow:e.palette.groovyDepths.insideCard,borderRadius:e.measure.borderRadius.big}}})),M=x.memo(_)},669586:function(e,n,t){t.d(n,{K:function(){return d}});var a=t(204942),r=t(810863),i=t(459374),o=t(294184),l=t.n(o),s=(t(667294),t(785893));var c=(0,r.Z)((function(e){return{container:function(n){var t=n.size,a=n.shape,r=n.isTestUser;return{display:"block",aspectRatio:1,width:t,height:t,borderRadius:"circle"===a?"50%":"4px",border:"".concat(d(t),"px solid ").concat(r?"dark"===e.palette.type?e.palette.common.white:e.palette.common.black:e.palette.common.white)}},avatar:function(n){var t=n.size;return{width:"100%",height:"100%",borderRadius:"circle"===n.shape?"50%":"4px",border:n.isTestUser?"".concat(d(t),"px solid ").concat("dark"===e.palette.type?e.palette.common.black:e.palette.common.white):void 0}},dropShadow:{boxShadow:e.palette.groovyDepths.insideCard}}}));function d(e){return e<32?1:e<64?1.5:2}n.Z=function(e){var n=e.alt,t=e.src,r=e.className,o=e.placeholder,d=e.size,u=e.dropShadow,p=void 0!==u&&u,g=e.shape,m=void 0===g?"circle":g,h=e.isTestUser,f=c({size:d||24,shape:m,isTestUser:h});return t?(0,s.jsx)("div",{className:l()(f.container,"avatar",r,(0,a.Z)({},f.dropShadow,p)),children:(0,s.jsx)(i.Z,{alt:n,src:t,className:f.avatar})}):(0,s.jsx)(s.Fragment,{children:o})}},971889:function(e,n,t){var a=t(204942),r=t(10165),i=(t(276979),t(810863)),o=t(669586),l=t(541321),s=t(108920),c=t(294184),d=t.n(c),u=(t(667294),t(236377)),p=t.n(u),g=t(785893);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=(0,i.Z)((function(e){return{avatarPlaceholder:function(n){var t=n.backgroundColor,a=n.size,r=n.color,i=n.fontSize,l=n.isTestUser;return{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t,borderRadius:"50%",aspectRatio:"1/1",width:a,height:a,border:"".concat((0,o.K)(a),"px solid ").concat(l?"dark"===e.palette.type?e.palette.common.white:e.palette.common.black:e.palette.common.white),"& span, & p":h(h(h(h({},e.typography["body-xs"]),e.typography.modifiers.fontWeight[500]),e.typography.modifiers.textTransform.uppercase),{},{fontSize:i,color:"".concat(r," !important")})}},innerAvatarPlaceholder:function(n){var t=n.size;return{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",width:"100%",height:"100%",border:"".concat((0,o.K)(t),"px solid ").concat("dark"===e.palette.type?e.palette.common.black:e.palette.common.white)}},dropShadow:{boxShadow:e.palette.groovyDepths.insideCard}}}));n.ZP=function(e){var n=e.testid,t=e.text,i=e.textClassName,o=e.className,c=e.backgroundColor,u=e.color,m=e.uuid,y=e.isTestUser,v=e.dropShadow,b=void 0!==v&&v,x=e.size,k=void 0===x?24:x,j=function(e,n){var t={20:{fontSize:"8px"},24:{fontSize:"10px"},32:{fontSize:"14px"},40:{fontSize:"18px"},48:{fontSize:"22px"},64:{fontSize:"28px"},96:{fontSize:"44px"},120:{fontSize:"56px"}},a=function(e){var n=(0,s.Z)(),t=[n.palette.groovy.red[400],n.palette.groovy.green[500],n.palette.groovy.blue[400],n.palette.groovy.purple[400],n.palette.groovy.grey[700],"#419095",n.palette.groovy.orange[400],n.palette.groovy.grey[600],n.palette.groovy.yellow[400],"#0D60AC"];return t[function(e){var n="default";if(e)try{n=r.Z.rawId(e)}catch(t){n=e}var t=p()(n);return Math.floor(10*t())}(e)]}(n);return h({backgroundColor:a},t[e])}(k,m),C=(0,s.Z)(),w=f(h(h({},j),{},{size:k,backgroundColor:c||j.backgroundColor,color:u||C.palette.common.white,isTestUser:y})),O=(0,g.jsx)(l.U4,{"data-testid":"".concat(n,".text"),className:i,children:t});return(0,g.jsx)("div",{className:d()(w.avatarPlaceholder,o,(0,a.Z)({},w.dropShadow,b)),children:y?(0,g.jsx)("div",{className:d()(w.innerAvatarPlaceholder),children:O}):O})}},164873:function(e,n,t){var a=t(204942),r=t(888586),i=t(810863),o=t(541321),l=t(294184),s=t.n(l),c=t(757336),d=(t(667294),t(616550)),u=t(54333),p=t(785893),g=(0,c.Pi)((function(e){var n=e.label,t=e.testid,i=e.defaultPath,l=e.color,c=e.marginBottom,g=e.className,h=e.underline,f=e.icon,y=e.hideLabel,v=void 0!==y&&y,b=(0,d.k6)(),x=(0,r.v)(),k=m({color:l,marginBottom:c});return(0,p.jsxs)(o.GY,{"data-testid":t,className:s()(k.backButton,g,(0,a.Z)({},k.underline,h)),onClick:function(){x.length>=2?b.goBack():b.push(i)},color:l,children:[f||(0,p.jsx)(u.default,{width:24,height:24,className:k.chevronIcon}),!v&&(n||"Back")]})})),m=(0,i.Z)((function(e){return{backButton:function(n){var t=n.color,a=n.marginBottom;return{marginBottom:null!=a?a:e.spacing(4),padding:"0",color:t||e.palette.groovy.neutral[300],display:"flex",alignItems:"center",borderRadius:0,height:"16px","& .MuiButton-label":{color:t||e.palette.groovy.neutral[300]}}},chevronIcon:function(n){var t=n.color;return{transform:"rotate(270deg)",marginBottom:e.spacing(.33),"& path":{color:t||e.palette.groovy.neutral[300]}}},underline:function(n){var t=n.color;return{borderBottom:"1px solid ".concat(t||e.palette.groovy.neutral[300])}}}}));n.Z=g},684047:function(e,n,t){t.d(n,{A:function(){return d}});var a=t(810863),r=t(558365),i=t(210001),o=t(294184),l=t.n(o),s=(t(667294),t(785893));var c=(0,a.Z)((function(e){return{container:{borderTopLeftRadius:e.measure.borderRadius.big,borderTopRightRadius:e.measure.borderRadius.big,borderBottomRightRadius:e.measure.borderRadius.big,borderBottomLeftRadius:e.measure.borderRadius.big,position:"relative",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",paddingTop:i.hJ}}})),d=function(e){var n=e.className,t=c();return(0,s.jsx)(r.Z,{className:l()(t.container,n),variant:"rect",style:{width:"100%",height:"175px"}})};n.Z=function(e){var n=e.coverPhoto,t=e.testid,a=void 0===t?"BannerImage":t,r=e.className,i=c();return(0,s.jsx)("div",{"data-testid":a,className:l()(i.container,r),style:{backgroundImage:n?"url(".concat(n,")"):void 0}})}},416708:function(e,n,t){var a=t(204942),r=t(145987),i=t(870070),o=t(810863),l=t(541321),s=t(785893),c=["to","color","children","title","disabledColor","iconPosition"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=(0,o.Z)((function(e){return{title:function(n){return{"&, &:visited":{color:n.color||e.palette.primary.main}}},externalIcon:function(n){var t=n.color;return{marginTop:e.spacing(.25),"& path":{color:t||e.palette.primary.main},"& > path:nth-child(2)":{color:t||e.palette.primary.main}}},disabled:function(n){var t=n.disabledColor;return{"& .MuiButton-label > a":{color:t||e.palette.groovy.neutral[300]},"& svg":{"& path":{color:t||e.palette.groovy.neutral[300]},"& > path:nth-child(2)":{color:t||e.palette.groovy.neutral[300]}}}}}}));n.Z=function(e){var n=e.to,t=e.color,a=e.children,o=e.title,d=e.disabledColor,g=e.iconPosition,m=void 0===g?"left":g,h=(0,r.Z)(e,c),f=p({color:t,disabledColor:d});return(0,s.jsxs)(l.GY,u(u({color:t,leftIcon:"left"===m?(0,s.jsx)(i.default,{className:f.externalIcon}):void 0,rightIcon:"right"===m?(0,s.jsx)(i.default,{className:f.externalIcon}):void 0,classes:{disabled:f.disabled},to:n,target:"_blank",linkClassname:f.title},h),{},{children:[o,a]}))}},40142:function(e,n,t){t.d(n,{C:function(){return A},Z:function(){return z}});var a,r,i=t(115861),o=t(204942),l=t(386854),s=t(145987),c=t(887757),d=t.n(c),u=t(285245),p=t(479159),g=t(669187),m=t(378444),h=t(407176),f=(t(681355),t(10165)),y=(t(752457),t(713921),t(935329),t(52270)),v=t(445033),b=t(541321),x=t(852541),k=t(757336),j=t(422578),C=t(295791),w=t(244311),O=t(785893),S=t(425108);var Z=(0,k.Pi)((function(e){var n=e.testid,r=e.isOpen,o=e.onClose,l=e.occurrenceQueryRef,s=(0,u.vn)(),c=(0,j.usePreloadedQuery)(A,l).node,g=(0,p.V)((void 0!==a||(a=t(752457)).hash&&"9721e2fa53a33f1357288c4093534bc7"!==a.hash&&S.error("The definition of 'RecurringEventConfirmAttendanceModalMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{confirmAttendanceTo:"single"},{requireChangeToSubmit:!1}),m=f.Z.narrowNodeType(c,"Occurrence");if(!m)return null;var k=f.Z.connectionToArray(m.event.occurrences).filter((function(e){return!e.isComplete})),Z=k.length,T=k.filter((function(e){return e.atCapacity})).length;return(0,O.jsx)(b.SH,{testid:"".concat(n,".recurring-event.confirm-attendance-modal"),isOpen:r,title:"Confirm Attendance",modalContentLabel:"Confirm Attendance",onClose:o,buttons:!0,body:(0,O.jsxs)(y.Z,{onSubmit:function(){return I.apply(this,arguments)},buttons:(0,O.jsx)(y.Z.SubmitButton,{form:g,testid:"".concat(n,".recurring-event.confirm-attendance-modal.submit-button"),children:"Confirm Attendance"}),children:[(0,O.jsx)(b.U4,{variant:"body-sm",color:"text.secondary",marginBottom:1.75,children:"This event is part of a recurring event. Confirm attendance to:"}),(0,O.jsxs)(x.Z,{value:g.state.confirmAttendanceTo,onChange:function(e){g.state.confirmAttendanceTo=e.target.value},children:[(0,O.jsx)(b.uW,{testid:"RecurringEventConfirmAttendanceModal.Radio.this-event",label:"This event only.",value:"single",variant:"simple",marginBottom:0}),(0,O.jsx)(b.uW,{testid:"RecurringEventConfirmAttendanceModal.Radio.all-events",label:"All upcoming events (".concat(Z,") in the series."),value:"all",variant:"simple",marginBottom:0}),T>0&&"all"===g.state.confirmAttendanceTo&&(0,O.jsx)(b.kz,{marginTop:2.5,severity:"info",message:"".concat(T,"/").concat(Z," events are at max capacity. You can confirm attendance to these events later if the host increases the capacity.")})]})]})});function I(){return(I=(0,i.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.submit("single"===g.state.confirmAttendanceTo?{occurrenceId:m.id}:{eventId:m.event.id});case 3:if(n=e.sent,n.didSave){e.next=7;break}return e.abrupt("return");case 7:(0,w.commitLocalUpdate)(h.Z,(function(e){var n=e.get(s.id);n&&C.Z.getConnections(n,"RSVPToAllOrganizationEventsButton_occurrences").forEach((function(e){return e.invalidateRecord()}))})),(0,v.HE)({message:"You confirmed attendance. Check your email for more details!",testid:"RecurringEventConfirmAttendanceModal.success-toast"}),o(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,v.p)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}}));void 0!==r||(r=t(430485)).hash&&"23c934953d72b5c6bc26071414499837"!==r.hash&&S.error("The definition of 'RecurringEventConfirmAttendanceModalFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.");t(441207);var T,I,_,P=t(963457),M=t(724104),F=t(982879),N=t(667294),R=t(616550),D=t(425108),E=["occurrenceKey","testid","text","className","hideIcon","iconOnly","enableAutoRSVP","enableRecurringEventConfirmModal"];function K(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?K(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A=(void 0!==T||(T=t(713921)).hash&&"1174d36666f2df5f2397e0fbd9a619f0"!==T.hash&&D.error("The definition of 'RSVPToEventButtonModalPreloadedQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),T);var z=(0,k.Pi)((function(e){var n=e.occurrenceKey,a=e.testid,r=void 0===a?"RSVPToEventButton":a,o=e.text,c=e.className,f=e.hideIcon,y=e.iconOnly,x=e.enableAutoRSVP,k=void 0!==x&&x,S=e.enableRecurringEventConfirmModal,T=void 0!==S&&S,K=(0,s.Z)(e,E),z=(0,u.vn)(),U=(0,M.Z)(),B=U.isOpen,V=U.onClose,Q=U.onOpen,q=(0,P.Z)((function(e){return e.breakpoints.down("md")})),W=(0,R.TH)(),Y=(0,R.k6)(),G=(0,j.useFragment)((void 0!==I||(I=t(441207)).hash&&"3ba45c05c277b2b06a8916c009ef83a5"!==I.hash&&D.error("The definition of 'RSVPToEventButtonFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),I),n),H="draft"===G.status,$=(0,j.useQueryLoader)(A),X=(0,l.Z)($,2),J=X[0],ee=X[1],ne=(0,p.V)((void 0!==_||(_=t(935329)).hash&&"22a46baa81299c7a50d10e275508cfcd"!==_.hash&&D.error("The definition of 'RSVPToEventButtonMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),_),{}),te=(0,F.Kx)(),ae=te.rsvp,re=te.rsvpToEventId;(0,N.useEffect)((function(){k&&(ae||re)&&Y.replace({pathname:g.ZP.AUTO_RSVP,search:"id=".concat(ae||re,"&redirectUrl=").concat(encodeURIComponent(W.pathname+W.search.split("&rsvp")[0].split("&rsvpToEventId")[0]))})}),[ae,re,G.id,G.event.id,k]);var ie=function(){if(G.atCapacity)return"At Capacity";if(G.hasViewerRSVPd)return q?"Sent":"Email Sent!";return o||"Attend"}(),oe=H||G.hasViewerRSVPd||ne.isSubmitting||G.atCapacity;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.t2,{disabled:!H,content:"Publish event before confirming attendance",children:y?(0,O.jsx)(b.I4,{testid:"".concat(r,".add-event-to-calendar"),color:"grey",variant:"outlined",onClick:se,disabled:oe,className:c,shouldDisplaySpinner:ne.isSubmitting,children:le()}):(0,O.jsx)(b.v2,L(L({testid:"".concat(r,".add-event-to-calendar"),leftIcon:le(),color:"grey",variant:"outlined",onClick:se,disabled:oe,className:c,shouldDisplaySpinner:ne.isSubmitting},K),{},{children:ie}))}),B&&J&&(0,O.jsx)(Z,{testid:r,isOpen:B,onClose:V,occurrenceQueryRef:J})]});function le(){if(!f)return G.hasViewerRSVPd?(0,O.jsx)(b.De,{icon:"iconsax.custom-check"}):(0,O.jsx)(m.default,{})}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,i.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopPropagation(),!G.event.isRecurring||!T){e.next=6;break}return de(),Q(),e.abrupt("return");case 6:return e.next=8,ne.submit({occurrenceId:G.id});case 8:if(t=e.sent,t.didSave){e.next=12;break}return e.abrupt("return");case 12:(0,w.commitLocalUpdate)(h.Z,(function(e){var n=e.get(z.id);n&&C.Z.getConnections(n,"RSVPToAllOrganizationEventsButton_occurrences").forEach((function(e){return e.invalidateRecord()}))})),(0,v.HE)({message:"You confirmed attendance. Check your email for more details!",testid:"RSVPToEventButton.success-toast"});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){J||ee({id:G.id})}}))},441207:function(e,n,t){t.r(n);t(244311);var a,r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RSVPToEventButtonFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasViewerRSVPd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capacity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"atCapacity",storageKey:null},{alias:null,args:null,concreteType:"Event",kind:"LinkedField",name:"event",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isRecurring",storageKey:null}],storageKey:null}],type:"Occurrence",abstractKey:null};r.hash="3ba45c05c277b2b06a8916c009ef83a5",n.default=r},713921:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"RSVPToEventButtonModalPreloadedQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,concreteType:"Event",kind:"LinkedField",name:"event",plural:!1,selections:[o,{alias:null,args:null,concreteType:"OccurrenceNodeConnection",kind:"LinkedField",name:"occurrences",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Occurrence",kind:"LinkedField",name:"node",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"isComplete",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"atCapacity",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Occurrence",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"RSVPToEventButtonModalPreloadedQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,o,{kind:"InlineFragment",selections:[l],type:"Occurrence",abstractKey:null}],storageKey:null}]},params:{cacheID:"1800751c4a8164ae4b1aa0cb6da32c62",id:null,metadata:{},name:"RSVPToEventButtonModalPreloadedQuery",operationKind:"query",text:"query RSVPToEventButtonModalPreloadedQuery(\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ... on Occurrence {\n      id\n      event {\n        id\n        occurrences {\n          edges {\n            node {\n              id\n              isComplete\n              atCapacity\n            }\n          }\n        }\n      }\n    }\n    id\n  }\n}\n"}};s.hash="1174d36666f2df5f2397e0fbd9a619f0",n.default=s},935329:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s,c={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"RSVPToEventButtonMutation",selections:[{alias:"response",args:r=[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"RSVPToEventResponse",kind:"LinkedField",name:"rsvpToEvent",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeConnection",kind:"LinkedField",name:"occurrences",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Occurrence",kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"hasViewerRSVPd",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"atCapacity",storageKey:null},l={alias:null,args:null,concreteType:"OccurrenceRSVPNodeConnection",kind:"LinkedField",name:"rsvps",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},s={alias:null,args:null,concreteType:"ValidationError",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"RSVPToEventButtonMutation",selections:[{alias:"response",args:r,concreteType:"RSVPToEventResponse",kind:"LinkedField",name:"rsvpToEvent",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeConnection",kind:"LinkedField",name:"occurrences",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Occurrence",kind:"LinkedField",name:"node",plural:!1,selections:[i,o,l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},s],storageKey:null}]},params:{cacheID:"c7cac738a95243a7e4d53e90412a2cfd",id:null,metadata:{},name:"RSVPToEventButtonMutation",operationKind:"mutation",text:"mutation RSVPToEventButtonMutation(\n  $input: RSVPToEventInput!\n) {\n  response: rsvpToEvent(input: $input) {\n    occurrences {\n      edges {\n        node {\n          hasViewerRSVPd\n          atCapacity\n          rsvps {\n            totalCount\n          }\n          id\n        }\n      }\n    }\n    errors {\n      field\n      message\n    }\n  }\n}\n"}};c.hash="22a46baa81299c7a50d10e275508cfcd",n.default=c},430485:function(e,n,t){t.r(n);t(244311);var a,r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecurringEventConfirmAttendanceModalFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Event",kind:"LinkedField",name:"event",plural:!1,selections:[a,{alias:null,args:null,concreteType:"OccurrenceNodeConnection",kind:"LinkedField",name:"occurrences",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Occurrence",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isComplete",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"atCapacity",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Occurrence",abstractKey:null};r.hash="23c934953d72b5c6bc26071414499837",n.default=r},752457:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s,c={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"RecurringEventConfirmAttendanceModalMutation",selections:[{alias:"response",args:r=[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"RSVPToEventResponse",kind:"LinkedField",name:"rsvpToEvent",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeConnection",kind:"LinkedField",name:"occurrences",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Occurrence",kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"hasViewerRSVPd",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"atCapacity",storageKey:null},l={alias:null,args:null,concreteType:"OccurrenceRSVPNodeConnection",kind:"LinkedField",name:"rsvps",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},s={alias:null,args:null,concreteType:"ValidationError",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"field",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"RecurringEventConfirmAttendanceModalMutation",selections:[{alias:"response",args:r,concreteType:"RSVPToEventResponse",kind:"LinkedField",name:"rsvpToEvent",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeConnection",kind:"LinkedField",name:"occurrences",plural:!1,selections:[{alias:null,args:null,concreteType:"OccurrenceNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Occurrence",kind:"LinkedField",name:"node",plural:!1,selections:[i,o,l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},s],storageKey:null}]},params:{cacheID:"a82fb67fb18168f3ec297c5efa151bbb",id:null,metadata:{},name:"RecurringEventConfirmAttendanceModalMutation",operationKind:"mutation",text:"mutation RecurringEventConfirmAttendanceModalMutation(\n  $input: RSVPToEventInput!\n) {\n  response: rsvpToEvent(input: $input) {\n    occurrences {\n      edges {\n        node {\n          hasViewerRSVPd\n          atCapacity\n          rsvps {\n            totalCount\n          }\n          id\n        }\n      }\n    }\n    errors {\n      field\n      message\n    }\n  }\n}\n"}};c.hash="9721e2fa53a33f1357288c4093534bc7",n.default=c},850275:function(e,n,t){t.d(n,{Z:function(){return g}});var a=t(204942),r=t(386854),i=t(810863),o=t(294184),l=t.n(o),s=t(667294),c=(t(893220),t(408549)),d=t(785893);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e){var n=e.children,t=e.className,a=e.classes,i=e.swiperPaginationTop,o=void 0===i?0:i,c=e.config,u=c.initialSlide,g=void 0===u?0:u,h=c.slidesPerView,f=c.centeredSlides,y=void 0===f||f,v=c.breakpoints,b=c.navigation,x=c.pagination,k=void 0!==x&&x,j=c.totalCount,C=c.currentSliceSize,w=c.setParentCarouselState,O=c.partialNavigation,S=void 0!==O&&O,Z=(0,s.useState)(null),T=(0,r.Z)(Z,2),I=T[0],_=T[1],P=!!I,M=m({swiperPaginationTop:o});return(0,s.useEffect)((function(){if(P&&(S||!b||b.nextEl&&b.prevEl)){if(Object.assign(I,p(p({initialSlide:g,navigation:b},void 0===h?{breakpoints:{0:{slidesPerView:v?v[0].slidesPerView:1},600:{slidesPerView:v?v[600].slidesPerView:1.5},1280:{slidesPerView:v?v[1280].slidesPerView:2.7},1366:{slidesPerView:v?v[1366].slidesPerView:3.2},1536:{slidesPerView:v?v[1536].slidesPerView:3.6},1920:{slidesPerView:v?v[1920].slidesPerView:4.5}}}:{slidesPerView:h}),{},{centeredSlides:y,slidesPerGroup:1,centeredSlidesBounds:!0,watchSlidesProgress:!0,centerInsufficientSlides:!1,simulateTouch:!1,touchEventsTarget:"container",breakpointsBase:"window",on:{breakpoint:F,progress:F,slidesLengthChange:F,activeIndexChange:F,reachBeginning:F,reachEnd:F}})),k&&(I.pagination={clickable:!0}),!I.swiper)return I.initialize();I.swiper.update(),b&&(I.swiper.navigation.destroy(),I.swiper.navigation.init(),I.swiper.navigation.update())}}),[h,v,b,k,j,C,P]),(0,d.jsx)("swiper-container",{ref:function(e){return _(e)},class:l()(M.swiper,t,null==a?void 0:a.swiper),init:!1,"events-prefix":"swiper",navigation:Boolean(b),pagination:k,children:n});function F(e){_((function(n){return p(p({},n),{},{swiper:e})})),null==w||w(p({},e))}}(0,c.z2)();var m=(0,i.Z)((function(e){return{swiper:function(n){var t=n.swiperPaginationTop;return{"--swiper-pagination-top":"".concat(t,"px"),"&:host .swiper-wrapper":{alignItems:"stretch"},"& swiper-slide":{height:"auto",display:"flex",flexDirection:"column","& > *":{height:"100%",margin:e.spacing(1,1,2)}}}}}}))},483905:function(e,n,t){t.d(n,{Z:function(){return o}});var a=t(294184),r=t.n(a),i=t(785893);function o(e){var n=e.index,t=e.children,a=e.className;return(0,i.jsx)("swiper-slide",{class:r()("index-".concat(n),a),children:t})}},435979:function(e,n,t){var a,r=t(655496),i=t(810863),o=(t(21636),t(422578)),l=(t(244311),t(785893)),s=t(425108);var c=(0,i.Z)({relativeParent:{position:"relative"}});n.Z=function(e){var n=e.appKey,i=e.badgeSize,d=void 0===i?24:i,u=e.className,p=e.isSelected,g=void 0!==p&&p,m=e.isSideBar,h=void 0!==m&&m,f=c(),y=(0,o.useFragment)((void 0!==a||(a=t(21636)).hash&&"843b50fa5eefccb832a77d4d732701ba"!==a.hash&&s.error("The definition of 'ChatChannelBadgeFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),n);return y.chatChannel&&y.badge?(0,l.jsx)("div",{className:f.relativeParent,children:(0,l.jsx)(r.Z,{isSideBar:h,isSelected:g,badgeKey:y.badge,size:d,className:u})}):null}},21636:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannelBadgeFragment",selections:[{alias:null,args:null,concreteType:"Badge",kind:"LinkedField",name:"badge",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BadgeFragment"}],storageKey:null},{alias:null,args:null,concreteType:"ChatChannel",kind:"LinkedField",name:"chatChannel",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null}],storageKey:null}],type:"ProductApp",abstractKey:null,hash:"843b50fa5eefccb832a77d4d732701ba"};n.default=a},8839:function(e,n,t){var a,r,i=t(204942),o=t(386854),l=t(725827),s=t(544044),c=t(963114),d=t(470609),u=t(622556),p=t(810863),g=t(92839),m=t(908608),h=t(886102),f=t(676527),y=t(906601),v=t(294215),b=t(407796),x=t(164344),k=t(627061),j=t(457932),C=t(580944),w=t(363367),O=t(921927),S=t(297136),Z=t(791097),T=t(596428),I=t(318507),_=t(107679),P=t(278349),M=(t(854049),t(92939),t(541321)),F=t(667294),N=t(422578),R=(t(423274),t(427225)),D=t(53721),E=t(112239),K=t(785893),L=t(425108);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function U(){var e=(0,E.fr)().message.user;return e?(0,K.jsx)(v.Z,{user:e}):null}function B(e){var n,a=e.chatChannelKey,i=Q(),o=(0,c.NP)("admin_member"),p=(0,N.useFragment)((void 0!==r||(r=t(92939)).hash&&"846251ceb201cdc55d2f8f46bd252fcc"!==r.hash&&L.error("The definition of 'ChatChannel_EmptyStateIndicatorFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),a),g=(0,m.Z)({channelId:(null==p?void 0:p.id)||""}),h=(0,d.xo)(null==p?void 0:p.externalChannelId),f=Boolean(null==h?void 0:h.state.messages.length);return g&&!f?null!=p&&null!==(n=p.app)&&void 0!==n&&n.customAppDescription?(0,K.jsx)("div",{className:i.emptyState,children:(0,K.jsx)(M.MJ,{testid:"ChatChannel.empty-state.create-message-with-ai",icon:(0,K.jsx)(u.Z,{}),title:"No messages yet. Be the first to kick-start discussions.",subtitle:"With Disco AI, receive personalized prompt suggestions and help your ".concat(o.plural," get the conversation going."),buttons:(0,K.jsx)(y.Z,{channelId:p.id})})}):(0,K.jsx)(s.r,{children:(0,K.jsx)("div",{className:i.emptyState,children:(0,K.jsx)(M.MJ,{testid:"ChatChannel.empty-state.add-description",icon:(0,K.jsx)(u.Z,{}),title:"Start chatting or add a channel description for Disco AI's customized help",subtitle:"With Disco AI, receive personalized prompt suggestions and help your ".concat(o.plural," get the conversation going."),buttons:(0,K.jsx)(l.Z,{appKey:p.app,children:function(e){return(0,K.jsx)(M.v2,z(z({},e),{},{leftIcon:"add",children:"Channel Description"}))}})})})}):(0,K.jsx)(O.default,{state:f?"thread":"page"})}var V=(0,p.Z)((function(e){return{channel:function(n){var t=n.isMainThread;return{height:"100%",width:"100%",padding:0,"& .str-chat":{marginTop:0,height:"100%","& .emoji-mart-emoji":{height:"20px"},"&__message-mention":{cursor:"pointer"},"&, & *":{fontFamily:e.typography.fontFamily},"&__container":{display:"flex",flexDirection:"column",height:"100%"},"&__message-replies-count-button":{color:e.palette.primary.main},"&__reverse-infinite-scroll":{paddingTop:0},"&__message-text-inner":{maxWidth:"none"},"&__message-team-form-footer button":{marginLeft:e.spacing(2),cursor:"pointer"},"&__virtual-list":{padding:e.spacing(0,1),backgroundColor:e.palette.background.paper,"&--thread":{padding:0},"div &-message-wrapper":{padding:0}},"&__list-notifications":{margin:0},"&__message-notification, &__unread-messages-notification":{backgroundColor:"".concat(e.palette.primary.main," !important"),color:"".concat(e.palette.primary.contrastText," !important")},"&__message-notification":{display:"none",".str-chat__virtual-list ol:not(:empty) ~ .str-chat__list-notifications &":{display:"block"}},"&__parent-message-li":{border:"none !important"},"& ol":{paddingLeft:e.spacing(2)},"&__li":{margin:0,"&:hover":{backgroundColor:"dark"===e.palette.type?e.palette.groovy.onDark[500]:e.palette.groovy.neutral[200],borderRadius:e.measure.borderRadius.big},"& .message__name-and-date":{display:"none","& time":z(z({},e.typography["body-sm"]),{},{fontSize:"12px",color:e.palette.groovy.grey[400],textTransform:"uppercase"})},"&--top, &--middle, &--bottom, &--single":{margin:0,"& > div:first-child":{margin:0}},"&--top > div:first-child":{padding:e.spacing(1.5),margin:e.spacing(1)},"&--middle > div:first-child":{padding:e.spacing(.25,1.5)},"&--bottom > div:first-child":{padding:e.spacing(.25,1.5,.5)},"&--bottom":{paddingBottom:0},"&--single":{padding:0},"&--bottom, &--middle":{"& .avatar":{height:"0",border:"none",flexShrink:0},"& .avatar-placeholder":{height:"0 !important",background:"transparent",border:"none"},"& .avatar-placeholder > p:first-child":{display:"none"}},"&--top, &--single":{"& .message__name-and-date":{display:"flex"}}},"&__thread-header":{background:e.palette.background.paper,"&:hover":{background:e.palette.groovy.neutral[100]}},"&__thread":(0,i.Z)({maxWidth:t?"100%":"45%",padding:0,borderRadius:0,overflow:"initial",borderLeft:t?"none":e.palette.constants.borderSmall,"& .str-chat__virtual-list":{padding:t?0:e.spacing(0,1),overflowY:"initial","&-message-wrapper":{padding:0},"& .str-chat__virtual-list-message-wrapper":{padding:e.spacing(0,0,0,.75),"&:first-of-type":{paddingLeft:e.spacing(.75)}}},"&-list":(0,i.Z)({backgroundColor:e.palette.background.paper,padding:e.spacing(0,1,4,1),height:"100dvh","& > .message-container":{padding:e.spacing(0,2)}},e.breakpoints.down("xs"),{paddingLeft:e.spacing(1.5)})},e.breakpoints.down("xs"),z({position:"absolute",margin:0,top:0,left:0,width:"100%",height:"100%",maxWidth:"none",zIndex:e.zIndex.chatBar,borderRadius:e.measure.borderRadius.big,backgroundColor:e.palette.background.paper},(0,g.Z)(t,{position:"relative",zIndex:"unset",top:"unset",left:"unset"}))),"&__channel":z({},(0,g.Z)(t,{maxHeight:"none"})),"& .str-chat__modal":{backgroundColor:"rgba(0, 0, 0, 0.75) !important"},"& .str-chat__gallery-image":{backgroundColor:"transparent","& img":{borderRadius:"16px"}},"& .str-chat__modal__inner":{padding:0,background:"none"},"& .image-gallery-content":{width:"70vw",height:"70vh",backgroundColor:"rgba(255, 255, 255, 0.5)",borderRadius:e.measure.borderRadius.big,"& .image-gallery-index":{borderRadiusTopRight:e.measure.borderRadius.big},"& .image-gallery-slide-wrapper":{height:"100%","& .image-gallery-swipe, & .image-gallery-slides, & .image-gallery-slide":{width:"100%",height:"100%",display:"flex",alignItems:"center",borderRadius:e.measure.borderRadius.large,background:"none","& img":{objectFit:"contain",width:"100%",height:"100%"}}},"&.fullscreen":{width:"100vw",height:"100vh"}},"&__suggestion-list-container":{borderRadius:e.measure.borderRadius.big,color:"unset",background:e.palette.background.default,border:"1px solid #E4E4E7",boxShadow:e.palette.groovyDepths.raisedBoxShadow,padding:e.spacing(1.5),"& .str-chat__suggestion-list .str-chat__suggestion-item--selected":{backgroundColor:e.palette.background.default}}}}}}})),Q=(0,p.Z)({emptyState:{height:"100%",display:"flex"}});n.Z=function(e){var n=e.children,r=e.mainThread,i=e.testid,l=void 0===i?"ChatChannel":i,s=e.chatChannelKey,c=(0,d.ag)().isConnected,u=V({isMainThread:Boolean(r)}),p=(0,F.useState)(),g=(0,o.Z)(p,2),m=g[0],y=g[1],v=(0,F.useState)(),O=(0,o.Z)(v,2),E=O[0],A=O[1],Q=(0,N.useFragment)((void 0!==a||(a=t(854049)).hash&&"bedd200d57517e5f5c0aa4ca41611b78"!==a.hash&&L.error("The definition of 'ChatChannelFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),s),q=(0,d.xo)(Q.externalChannelId),W=(0,F.useCallback)((function(e,n){e.stopPropagation(),y(n),A(e.target)}),[y]);return q?c?(0,K.jsxs)("div",{className:u.channel,"data-testid":l,children:[(0,K.jsx)(P.Z,{children:(0,K.jsxs)(R.$,{channel:q,Avatar:U,DateSeparator:b.Z,VirtualMessage:function(e){return(0,K.jsx)(x.Z,z(z({},e),{},{chatChannelKey:Q}))},SendButton:C.Z,TypingIndicator:function(){return null},UnreadMessagesSeparator:function(){return null},MessageDeleted:function(){return null},ReactionsList:D.Y,QuotedMessage:k.Z,QuotedMessagePreview:j.Z,Attachment:h.Z,EmptyStateIndicator:function(e){return(0,K.jsx)(B,z(z({},e),{},{chatChannelKey:Q}))},TriggerProvider:_.Z,onMentionsClick:W,ThreadHeader:r?function(){return null}:T.Z,ThreadStart:I.Z,MessageRepliesCountButton:Z.Z,EditMessageInput:function(e){return(0,K.jsx)(w.Z,z(z({},e),{},{chatChannelKey:Q}))},enrichURLForPreview:!0,children:[n,(0,K.jsx)(S.Z,{streamChannel:q})]})}),m&&E&&(0,K.jsx)(f.Z,{clickedUser:m,clickedUserTarget:E,setClickedUser:y})]}):null:(0,K.jsx)(M.Zy,{absoluteCenter:!0})}},906601:function(e,n,t){var a=t(204942),r=t(386854),i=(t(655979),t(111740)),o=t(509645),l=t(128032),s=t(4580),c=t(785893);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.channelId,t=e.template,a=void 0===t?"default":t,d=e.children,p=(0,s.Z)("ai_inline_prompts"),g=(0,l.t)(),m=(0,r.Z)(g,2),h=m[0],f=h.aiGid,y=h.aiTemplate,v=m[1];return p?(0,c.jsx)(o.p,{onClick:function(){v({aiGid:n,aiTemplate:"inactive"===a?"inactive":"default"})},stopPropagation:!0,spinnerProps:{fullWidth:!1},disabled:f===n,shouldDisplaySpinner:f===n&&y===a,children:d||function(e){return(0,c.jsx)(i.Z,u(u({},e),{},{children:"Create Message with AI"}))}}):null}},297136:function(e,n,t){var a=t(241451),r=t(386854),i=t(285245),o=t(128032),l=t(667294),s=(t(423274),t(437495)),c=t(983156),d=t(785893);n.Z=function(e){var n=e.streamChannel,t=(0,o.t)(),u=(0,r.Z)(t,2),p=u[0],g=p.streamMsgId,m=p.openThread,h=u[1],f=(0,s.uz)(),y=f.jumpToMessage,v=f.openThread,b=(0,i.vn)(),x=(0,c.mx)().client,k=(0,l.useRef)(null);return(0,l.useEffect)((function(){g&&"disco-chat-bot"!==n.type&&y(g)}),[g]),(0,l.useEffect)((function(){k.current&&m&&"true"===m.toLowerCase()&&k.current.click()}),[g,m]),(0,l.useEffect)((function(){var e;if("disco-chat-bot"===n.type&&0!==n.state.unreadCount){var t=null===(e=b.viewerMembership)||void 0===e?void 0:e.streamChatUserId;if(t){var r=n.state.read[t].last_read,i=(0,a.Z)(n.state.messages).sort((function(e,n){return e.created_at.getTime()-n.created_at.getTime()})).find((function(e){return e.created_at>r}));i&&h({cbMsgId:i.id})}}}),[n]),(0,d.jsx)("button",{ref:k,style:{display:"none"},onClick:function(e){if(!m||!g||!n.id)return;x.search({id:{$eq:n.id}},{id:{$eq:g}},{limit:1}).then((function(n){var t=n.results[0].message;v(t,e)}))}})}},479986:function(e,n,t){t.d(n,{Z:function(){return T}});var a,r=t(386854),i=t(669187),o=t(204942),l=t(145987),s=t(655496),c=t(697798),d=t(285245),u=(t(681355),t(10165)),p=t(810863),g=(t(144940),t(541321)),m=t(162083),h=t(108920),f=t(422578),y=(t(244311),t(785893)),v=t(425108),b=["autoFocusInput","testid","propertyToUseForValue","onChange"];function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=(0,p.Z)((function(e){return{product:{display:"flex",alignItems:"center",marginTop:e.spacing(.25),gap:e.spacing(1)}}}));var C=u.Z.withSkeleton({component:function(e){var n=e.autoFocusInput,r=void 0===n||n,i=e.testid,o=void 0===i?"ChatChannelSelect":i,p=e.propertyToUseForValue,x=void 0===p?"externalChannelId":p,C=e.onChange,w=(0,l.Z)(e,b),O=j(),S=(0,h.Z)(),Z=(0,d.vn)(),T=(0,f.useLazyLoadQuery)((void 0!==a||(a=t(144940)).hash&&"667d5114bb0685f43c7fbab0c2625830"!==a.hash&&v.error("The definition of 'ChatChannelSelectQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{id:Z.id}).organization,I=u.Z.connectionToArray(null==T?void 0:T.chatChannels).map((function(e){return{app:e.app,product:e.product,channel:e}}));return(0,y.jsx)(g.sf,k(k({testid:"".concat(o,".select"),placeholder:"Select a channel"},w),{},{onChange:function(e){C(e)},options:I.map((function(e){var n=e.app;return{value:e.channel[x],title:n.customAppTitle,color:S.palette.groovy.grey[300],searchable:[n.customAppTitle]}})),renderOption:function(e){var n=I.find((function(n){return n.channel[x]===e.value}));return n?(0,y.jsx)(m.Z,{testid:"".concat(o,".option.add.").concat(e.title),title:"#".concat(e.title),subtitle:n.product?(0,y.jsxs)("div",{className:O.product,children:[n.product.badge&&(0,y.jsx)(s.Z,{badgeKey:n.product.badge,size:24}),(0,y.jsx)(g.U4,{variant:"body-xs-500",color:"text.secondary",children:n.product.name})]}):(0,y.jsxs)("div",{className:O.product,children:[(0,y.jsx)(c.Z,{testid:"".concat(o,".badge.").concat(Z.slug),organizationKey:Z,size:24}),(0,y.jsx)(g.U4,{variant:"body-xs-500",color:"text.secondary",children:Z.name})]})}):null},autoFocusInput:r,filterOptions:{maxVisible:100}}))},skeleton:function(){return(0,y.jsx)(g.sS,{})}}),w=t(757336),O=t(667294),S=t(616550),Z=t(52270),T=(0,w.Pi)((function(e){var n=e.isOpen,t=e.onClose,a=(0,O.useState)(null),o=(0,r.Z)(a,2),l=o[0],s=o[1],c=(0,S.k6)();return(0,y.jsx)(g.SH,{isOpen:n,onClose:t,modalContentLabel:"new conversation modal",maxWidth:"560px",title:"New Channel Message",testid:"NewChannelMessageModal",buttons:!0,body:(0,y.jsx)(Z.Z,{testid:"NewChannelMessageModal.Form",isSubmitAllowed:Boolean(l),onSubmit:function(){if(!l)return;t();var e=l;if(location.pathname.includes(e))return;c.push((0,S.Gn)(i.ZP.COMMUNITY.CHAT.CHANNEL,{channelId:e}))},buttons:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.v2,{color:"grey",variant:"outlined",onClick:t,children:"Cancel"}),(0,y.jsx)(Z.Z.SubmitButton,{form:{disabled:!l,isSubmitting:!1},testid:"NewChannelMessageModal.SubmitButton",children:"Start Message"})]}),children:(0,y.jsx)(C,{value:l,onChange:function(e){s(e)},propertyToUseForValue:"id",autoFocusInput:!0})})})}))},608126:function(e,n,t){var a=t(115861),r=t(386854),i=t(887757),o=t.n(i),l=t(724104),s=t(667294),c=t(437495),d=t(983156),u=t(785893);n.Z=function(e){var n=e.messageId,t=(0,c.uz)().openThread,i=(0,l.Z)(),p=i.isOpen,g=i.onOpen,m=(0,s.useState)(!1),h=(0,r.Z)(m,2),f=h[0],y=h[1],v=(0,d.mx)().client,b=(0,s.useRef)(null);return(0,s.useEffect)((function(){v&&b.current&&t&&!p&&!f&&b.current.click()}),[t,p,v,f]),(0,u.jsx)("button",{ref:b,style:{display:"none"},onClick:function(e){return x.apply(this,arguments)}});function x(){return(x=(0,a.Z)(o().mark((function e(a){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&v&&!p&&!f){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.prev=3,e.next=6,v.getMessage(n);case 6:r=e.sent,t(r.message,a),g();case 9:return e.prev=9,y(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})))).apply(this,arguments)}}},854049:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannelFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"externalChannelId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ChatChannel_EmptyStateIndicatorFragment"},{args:null,kind:"FragmentSpread",name:"ChatChannelMessageFragment"},{args:null,kind:"FragmentSpread",name:"ChatChannelEditMessageFragment"}],type:"ChatChannel",abstractKey:null,hash:"bedd200d57517e5f5c0aa4ca41611b78"};n.default=a},92939:function(e,n,t){t.r(n);t(244311);var a,r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannel_EmptyStateIndicatorFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"externalChannelId",storageKey:null},{alias:null,args:null,concreteType:"ProductApp",kind:"LinkedField",name:"app",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"customAppDescription",storageKey:null},{args:null,kind:"FragmentSpread",name:"ChatChannelSettingsModalButtonFragment"}],storageKey:null}],type:"ChatChannel",abstractKey:null};r.hash="846251ceb201cdc55d2f8f46bd252fcc",n.default=r},669050:function(e,n,t){var a=t(10165),r=t(810863),i=t(163102),o=t(134956),l=t(686394),s=t(269865),c=t(294184),d=t.n(c),u=t(667294),p=t(785893),g=(0,r.Z)((function(e){return{container:{border:0,display:"flex",flexDirection:"column",flexShrink:0},list:{display:"flex"},item:{height:"80px",display:"flex",alignItems:"center",borderRadius:e.measure.borderRadius.medium,flexShrink:0,position:"relative",width:"400px"},containerButton:{backgroundColor:"transparent",opacity:1,width:"100%","& button":{opacity:.4}}}}));n.Z=a.Z.withSkeleton({component:function(e){var n=e.type,t=e.entityId,a=e.handleRemove,r=g(),c=(0,i.Z)(),m=l.Df[n],h=u.createElement(m.Component,{entityId:t});return(0,p.jsx)("div",{className:r.container,children:(0,p.jsx)("div",{className:d()(c.hoverable,r.list),children:(0,p.jsxs)("div",{className:r.item,children:[(0,p.jsx)(s.Z,{className:r.containerButton,disabled:!0,children:h}),a&&(0,p.jsx)(o.v,{id:t,handleRemove:a})]},t)})})},skeleton:function(){return null}})},886102:function(e,n,t){var a=t(204942),r=t(810863),i=t(667294),o=t(219530),l=t(852429),s=t(785893);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u=(0,r.Z)((function(e){return{galleryContainer:{width:"100%",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"},"& .str-chat__gallery":{display:"flex !important",flexDirection:"row !important",flexWrap:"nowrap !important",gap:e.spacing(1),padding:0,margin:0,width:"100%","& > *":{margin:"0 !important",padding:"0 !important"}},"& .str-chat__gallery--square":{gridTemplateColumns:"none !important"},"& .str-chat__gallery-two-rows":{gridTemplateRows:"none !important"},"& .str-chat__gallery-image, & .str-chat__gallery-placeholder":{width:"150px !important",height:"150px !important",margin:"0 !important",padding:"0 !important",borderRadius:e.measure.borderRadius.medium,cursor:"pointer",border:"none",flexShrink:0,"&:hover":{opacity:.9}},"& .str-chat__gallery-placeholder":{position:"relative",backgroundSize:"cover !important",backgroundPosition:"center !important","&::before":{content:'""',position:"absolute",inset:0,backgroundColor:"rgba(0, 0, 0, 0.4)",borderRadius:e.measure.borderRadius.medium},"& p":{position:"relative",color:"white",margin:0,fontSize:e.typography.body1.fontSize,fontWeight:e.typography.fontWeightMedium}},"& .str-chat__base-image":{width:"100% !important",height:"100% !important",objectFit:"cover",borderRadius:e.measure.borderRadius.medium}},singleImageContainer:{display:"block",width:"100%",height:"auto",overflow:"hidden",textAlign:"left"},singleImageWrapper:{display:"inline-block","& img":{width:"auto !important",height:"auto !important",maxWidth:"300px",maxHeight:"100%",borderRadius:e.measure.borderRadius.large}},modalImage:{"& .str-chat__modal__inner .image-gallery":{maxWidth:"100%",maxHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:e.measure.borderRadius.large},"& .str-chat__modal__inner .image-gallery-slide":{display:"flex !important",justifyContent:"center",alignItems:"center",maxWidth:"100%",maxHeight:"100%",borderRadius:e.measure.borderRadius.large,background:"none"},"& .str-chat__modal__inner .image-gallery-image":{maxWidth:"100% !important",maxHeight:"100% !important",width:"auto !important",height:"auto !important",objectFit:"contain !important"},"& .str-chat__modal":{backgroundColor:"rgba(0, 0, 0, 0.75) !important"}}}}));n.Z=function(e){var n=u(),t=(0,i.useRef)([]);if(e.attachments&&e.attachments.some((function(e){return"image"===e.type}))){var a=e.attachments.filter((function(e){return"image"===e.type})).map((function(e){return{image_url:e.image_url,thumb_url:e.thumb_url,previewUrl:e.image_url}}));if(a.length>1)return(0,s.jsx)("div",{className:n.galleryContainer,children:(0,s.jsx)(o.r,{images:a,innerRefs:t})});if(1===a.length)return(0,s.jsx)("div",{className:"".concat(n.singleImageContainer," ").concat(n.modalImage),children:(0,s.jsx)("div",{className:n.singleImageWrapper,children:(0,s.jsx)(l.P,d({},e))})})}return(0,s.jsx)(l.P,d({},e))}},354384:function(e,n,t){t.d(n,{e:function(){return l}});var a=t(810863),r=t(541321),i=t(898921),o=t(785893),l=function(e){var n=e.name,t=e.url,a=e.size,l=s();return(0,o.jsxs)(o.Fragment,{children:[n&&(0,o.jsx)("div",{className:l.fileType,children:(0,o.jsx)(r.U4,{variant:"body-md-600-uppercase",color:"text.primary",children:(0,i.tH)(n)})}),t&&(0,o.jsxs)("a",{href:t,download:!0,className:l.text,children:[(0,o.jsx)(r.U4,{variant:"body-md-600",truncateText:1,children:n||"File"}),a&&(0,o.jsx)(r.U4,{variant:"body-xs-500",color:"text.secondary",children:(0,i.k_)(a,1)})]})]})},s=(0,a.Z)((function(e){return{fileType:{height:"48px",width:"48px",borderRadius:e.measure.borderRadius.medium,backgroundColor:e.palette.background.default,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.spacing(1),flexShrink:0},text:{textAlign:"start",display:"flex",flexDirection:"column",minWidth:0}}}))},676527:function(e,n,t){var a,r=t(10165),i=t(651140),o=(t(311933),t(667294),t(422578)),l=(t(244311),t(423274),t(785893)),s=t(425108);n.Z=r.Z.withSkeleton({component:function(e){var n=e.clickedUser,c=e.setClickedUser,d=e.clickedUserTarget,u=(0,o.useLazyLoadQuery)((void 0!==a||(a=t(311933)).hash&&"4f824a6113f57b11cdb852af4cac4488"!==a.hash&&s.error("The definition of 'ChatChannelClickedUserPopoverQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{id:r.Z.toGlobalId("OrganizationMembership",n.organization_membership_id)}).organizationMembership;return null!=u&&u.memberId?(0,l.jsx)(i.Z,{userId:u.memberId,anchorEl:d,onClose:function(){c(void 0)}}):null},skeleton:function(){return null}})},311933:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"ChatChannelClickedUserPopoverQuery",selections:[{alias:"organizationMembership",args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"memberId",storageKey:null}],type:"OrganizationMembership",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatChannelClickedUserPopoverQuery",selections:[{alias:"organizationMembership",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,o],storageKey:null}]},params:{cacheID:"f153e5c310cce20bd410e7c94246315e",id:null,metadata:{},name:"ChatChannelClickedUserPopoverQuery",operationKind:"query",text:"query ChatChannelClickedUserPopoverQuery(\n  $id: ID!\n) {\n  organizationMembership: node(id: $id) {\n    __typename\n    id\n    ... on OrganizationMembership {\n      memberId\n    }\n  }\n}\n"}};l.hash="4f824a6113f57b11cdb852af4cac4488",n.default=l},453119:function(e,n,t){var a=t(753688),r=(t(681355),t(6584)),i=t(396538),o=t(785893);n.Z=function(e){var n,t=e.users,l=e.totalUsers,s=e.avatarSize,c=void 0===s?24:s,d=e.className,u=e.channelId,p=e.countVariant,g=e.listOnly,m=1===t.length&&(null===(n=t[0])||void 0===n?void 0:n.id),h=(0,a.P)("chatChannelSettings");return(0,o.jsx)(o.Fragment,{children:m&&!g?(0,o.jsx)(i.Z,{stopPropagation:!0,userId:m,children:function(e){return(0,o.jsx)(r.Z,{testid:"ChatChannelAvatarStack",users:t,className:d,avatarSize:c,onClick:e.onClick,viewUserTooltip:{content:"".concat(t[0].firstName," ").concat(t[0].lastName),dataPrivate:!0},stackSize:1})}}):u?(0,o.jsx)(r.Z,{testid:"ChatChannelAvatarStack",users:t,totalUsers:l,className:d,avatarSize:c,onClick:function(){h.open({chatChannelId:u,chatChannelSettingsTab:"members"})},countVariant:p}):null})}},294215:function(e,n,t){t(470609);var a=t(10165),r=t(859194),i=t(785893);n.Z=function(e){var n=e.user;return(0,i.jsx)(r.Z,{className:"str-chat__avatar",placeholderClassName:"str-chat__avatar",user:{id:a.Z.toGlobalId("User",n.disco_user_id),first_name:n.first_name,last_name:n.last_name,avatar:n.avatar,name:n.name,is_test_user:n.is_disco_test_user||!1},testid:"avatar"})}},407796:function(e,n,t){var a=t(810863),r=t(541321),i=t(108920),o=t(451085),l=t(311242),s=t(850429),c=t(323402),d=t(785893);var u=(0,a.Z)((function(e){return{container:{position:"relative","&:hover":{backgroundColor:e.palette.background.paper}},date:{backgroundColor:e.palette.background.paper,padding:e.spacing(.5,2,.75),border:e.palette.constants.borderSmall,borderRadius:e.spacing(3),position:"absolute",left:"50%",top:"50%",transform:"translateY(-50%) translateX(-50%)"}}}));n.Z=function(e){var n=e.date,t=e.unread,a=(0,l.Z)(),p=u(),g=(0,i.Z)();return(0,d.jsxs)("div",{className:p.container,children:[(0,d.jsx)(r.o$,{color:t?g.palette.groovy.red[300]:void 0,thickness:2,marginTop:2.5,marginBottom:2.5}),(0,d.jsx)(r.U4,{noWrap:!0,variant:"body-xs-600",className:p.date,children:function(){var e="Today";t?e="New":(0,o.Z)(n)||(e=(0,c.eP)({timeZone:a,format:s.zT.DATE_WITH_WEEK_DAY})(n));return e}()})]})}},116741:function(e,n,t){var a,r=t(10165),i=(t(276979),t(194350),t(810863)),o=t(453119),l=(t(492079),t(541321)),s=t(422578),c=(t(244311),t(785893)),d=t(425108);var u=(0,i.Z)((function(e){return{channelNameGroup:{display:"flex",alignItems:"center",gap:e.spacing(1.5)}}}));n.Z=function(e){var n=e.channelKey,i=e.textColor,p=e.textVariant,g=e.avatarSize,m=e.testid,h=void 0===m?"DirectMessageHeader":m,f=u(),y=(0,s.useFragment)((void 0!==a||(a=t(492079)).hash&&"b0a74c6d206a97b8b82323e3f1b454de"!==a.hash&&d.error("The definition of 'DirectMessageHeaderFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),n),v=r.Z.connectionToArray(y.chatChannelMembers).map((function(e){return e.user})),b=v.map((function(e){return e.fullName})).join(", ");return(0,c.jsxs)("div",{className:f.channelNameGroup,children:[(0,c.jsx)(o.Z,{users:v,channelId:y.id,countVariant:"placeholder",avatarSize:g||40}),(0,c.jsx)(l.U4,{variant:p||"body-md-600",testid:"".concat(h,".header-title.").concat(b),color:i,children:b})]})}},492079:function(e,n,t){t.r(n);t(244311);var a,r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DirectMessageHeaderFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Literal",name:"excludeViewer",value:!0},{kind:"Literal",name:"first",value:5}],concreteType:"ChatChannelMemberNodeConnection",kind:"LinkedField",name:"chatChannelMembers",plural:!1,selections:[{alias:null,args:null,concreteType:"ChatChannelMemberNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ChatChannelMember",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastName",storageKey:null},{args:null,kind:"FragmentSpread",name:"ProfileAvatarFragment"},{args:null,kind:"FragmentSpread",name:"ProfileListModalListItemFragment"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"chatChannelMembers(excludeViewer:true,first:5)"}],type:"ChatChannel",abstractKey:null};r.hash="b0a74c6d206a97b8b82323e3f1b454de",n.default=r},164344:function(e,n,t){t.d(n,{L:function(){return Pe},Z:function(){return Re}});var a=t(204942),r=t(386854),i=t(446683),o=t(33162),l=(t(470609),t(383248)),s=t(773280),c=t(924238),d=t(810863),u=t(10165),p=t(859194),g=t(396538),m=t(92839),h=t(241451),f=t(115861),y=t(887757),v=t.n(y),b=t(285245),x=t(69722),k=t(934702),j=t(363748),C=t(541321),w=t(611797),O=t(667294),S=(t(423274),t(785893)),Z=function(e){var n,t,a,i=e.attachment,o=e.message,l=e.client,s=T(),c=(0,O.useState)(!1),d=(0,r.Z)(c,2),u=d[0],p=d[1],g=(0,b.vn)(),m=(0,x.R6)(),y=null!==(n=null===(t=i.title_link)||void 0===t?void 0:t.replace(/\/$/,""))&&void 0!==n?n:"",Z=Array.isArray(o.previewLinksToHide)?o.previewLinksToHide:[];return Z.includes("".concat(y,"/"))||Z.includes(y)||!i.image_url&&!i.title&&!i.text||i.og_scrape_url&&(0,j.d)(null!==(a=i.title_link)&&void 0!==a?a:"",g,m)?null:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:s.linkPreviewContainer,children:[(0,S.jsx)(C.I4,{height:20,width:20,svgStyles:{height:11,width:11},onClick:function(){return p(!0)},className:s.icon,children:(0,S.jsx)(k.default,{})}),(0,S.jsxs)("div",{className:s.linkPreview,children:[("image"===i.type||"video"===i.type||"audio"===i.type)&&i.image_url&&(0,S.jsx)("img",{src:i.image_url,alt:i.title,className:s.imageThumbnail},i.id),(0,S.jsxs)("div",{className:s.linkPreviewText,children:[i.title&&(0,S.jsx)(C.U4,{variant:"body-md-600",children:i.title}),i.text&&(0,S.jsx)(C.U4,{variant:"body-sm",children:i.text}),(0,S.jsx)(C.U4,{variant:"body-sm",color:"groovy.neutral.400",children:i.og_scrape_url})]})]})]}),(0,S.jsx)(w.Z,{testid:"closeLinkPreview",isOpen:u,confirmationButtonProps:{onClick:function(){p(!1),function(){I.apply(this,arguments)}()},children:"Yes, remove it"},onClose:function(){return p(!1)},modalContentLabel:"Remove Link Preview",title:"Remove preview?",description:"Are you sure you want to remove this link preview?"})]});function I(){return(I=(0,f.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.partialUpdateMessage(o.id,{set:{previewLinksToHide:[].concat((0,h.Z)(Z),[null!==(n=i.title_link)&&void 0!==n?n:""])}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},T=(0,d.Z)((function(e){return{linkPreviewContainer:{position:"relative"},linkPreview:{display:"flex",flexDirection:"column",borderLeft:"2px solid ".concat(e.palette.divider),paddingLeft:e.spacing(1.5),gap:e.spacing(2)},linkPreviewText:{display:"flex",flexDirection:"column",gap:e.spacing(.5)},imageThumbnail:{borderRadius:e.measure.borderRadius.medium,width:"280px",height:"150px",objectFit:"cover",alignItems:"center",justifyContent:"center",display:"flex"},icon:{position:"absolute",left:"-30px",top:"-5px"}}})),I=t(354384),_=(t(956998),t(791097)),P=t(108920);var M=(0,d.Z)((function(e){return{container:{marginLeft:e.spacing(1.5),padding:e.spacing(1.5,0,1.5,0)},messagePlaceholder:function(n){return{display:"flex",justifyContent:"start",alignItems:n.hasThread?"start":"center",gap:e.spacing(1.5),fontSize:"15px"}},avatarPlaceholder:{display:"flex",alignItems:"center",justifyContent:"center",height:"45px",maxHeight:"100%",borderRadius:"15px",backgroundColor:e.palette.grey[50],dropShadow:{boxShadow:e.palette.groovyDepths.insideCard}},replyContainer:{marginBottom:e.spacing(2)}}})),F=function(e){var n=e.message,t=e.threadList,a=e.handleReply,r=M({hasThread:!t&&!!n.reply_count}),i=(0,P.Z)();return(0,S.jsx)("div",{className:r.container,children:(0,S.jsxs)("div",{className:r.messagePlaceholder,children:[(0,S.jsx)("div",{className:r.avatarPlaceholder,children:(0,S.jsx)(C.De,{width:45,icon:"trash"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)(C.U4,{color:"dark"===i.palette.type?"primary.contrastText":"groovy.grey.600",children:"This message was deleted."}),!t&&!!n.reply_count&&(0,S.jsx)("div",{className:r.replyContainer,children:(0,S.jsx)(_.Z,{onClick:function(e){return a(e)},reply_count:n.reply_count})})]})]})})},N=t(623120),R=t(922261),D=t(963114),E=t(276979),K=t(771052),L=t(393180),A=t(347776),z=t(111740),U=t(899824),B=t(317145),V=t(31976),Q=t(624785),q=t(676527),W=t(387029);var Y=(0,d.Z)({link:{cursor:"pointer"}}),G=function(e){var n,t=e.name,a=e.streamUserId,i=(0,W.JN)().members,o=Y(),l=null==i||null===(n=i[a])||void 0===n?void 0:n.user,s=(0,O.useState)(),c=(0,r.Z)(s,2),d=c[0],u=c[1],p=(0,O.useState)(),g=(0,r.Z)(p,2),m=g[0],h=g[1];return l?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(C.U4,{className:o.link,onClick:function(e){e.stopPropagation(),u(l),h(e.target)},variant:"body-sm-700",color:"groovy.blue.400",component:"span",children:"@".concat(t)}),d&&m&&(0,S.jsx)(q.Z,{clickedUser:d,setClickedUser:u,clickedUserTarget:m})]}):(0,S.jsx)(C.U4,{variant:"body-sm",component:"span",children:t})},H=t(335576);var $,X,J=(0,d.Z)((function(e){return{markdown:{"& span, & p":{fontSize:"14px",color:e.palette.text.primary}}}})),ee=function(e){var n=e.message,t=J();return(0,S.jsx)("div",{className:t.markdown,children:(0,S.jsx)(H.Z,{options:{overrides:{a:{component:Q.Z},ChatChannelUserMarkdown:{component:G}}},children:n})})},ne=(t(617402),t(261886),t(422578)),te=t(112239),ae=t(425108);var re=(0,d.Z)((function(e){return{root:{display:"flex",gap:e.spacing(1),padding:e.spacing(1.5),marginLeft:e.spacing(5.5),borderRadius:Number(e.measure.borderRadius.big)-1},banner:{display:"flex",gap:e.spacing(1),flexDirection:"column",alignItems:"flex-start"},bannerButtonContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},bannerButtons:{display:"flex",gap:e.spacing(1),alignItems:"center"},suggestedResponse:{display:"flex",maxWidth:"100%",width:"100%"},suggestedResponseMessage:{minWidth:"90%",maxWidth:"100%",marginLeft:e.spacing(2)},tag:{display:"flex",gap:e.spacing(1),alignItems:"center"},messageSender:{display:"flex",gap:e.spacing(1),alignItems:"center"},postingAsYouTag:{borderRadius:e.measure.borderRadius.big}}})),ie=function(e){var n=e.threadId,a=e.inThread,o=void 0!==a&&a,l=e.botMessageKey,s=(0,R.f)({required:!0}).authUser,c=re(),d=(0,D.NP)("organization_admin"),u=(0,te.fr)().handleOpenThread,p=(0,i.hP)({threadId:n}).selectSuggestion,g=(0,O.useRef)(null),m=(0,O.useState)(!1),h=(0,r.Z)(m,2),f=h[0],y=h[1];(0,O.useEffect)((function(){var e=setTimeout((function(){var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}),y(!1)}),100);return function(){return clearTimeout(e)}}),[f,g]);var v=(0,ne.useFragment)((void 0!==$||($=t(617402)).hash&&"7a7aade140b9e091bc57de27b6fc1706"!==$.hash&&ae.error("The definition of 'ChatChannelBotSuggestedMessageFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),$),l),b=(0,ne.useMutation)((void 0!==X||(X=t(261886)).hash&&"cfb92a5abac113bd7adf96b7786d7c07"!==X.hash&&ae.error("The definition of 'ChatChannelBotSuggestedMessage_DismissBotSuggestionMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),X)),x=(0,r.Z)(b,2),k=x[0],j=x[1];return v.suggestedMessage?o?(0,S.jsx)(A.Z,{noIcon:!0,classes:{banner:c.banner,buttons:c.bannerButtonContainer},message:(0,S.jsxs)("div",{className:c.suggestedResponse,children:[(0,S.jsx)(E.Z,{size:32,userKey:s}),(0,S.jsxs)("div",{className:c.suggestedResponseMessage,children:[(0,S.jsxs)("div",{className:c.messageSender,children:[(0,S.jsx)(C.U4,{variant:"body-md-600",children:s.fullName}),(0,S.jsx)(U.Z,{className:c.postingAsYouTag,name:"Posting as you"})]}),(0,S.jsx)(ee,{message:v.suggestedMessage})]})]}),buttons:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:c.tag,children:[(0,S.jsx)(L.Z,{width:24,height:24}),(0,S.jsx)(B.Z,{variant:"body-md-600",children:"Suggested Response"})]}),(0,S.jsxs)("div",{className:c.bannerButtons,children:[(0,S.jsx)(C.t2,{content:"Dismiss this suggestion for all ".concat(d.plural),children:(0,S.jsx)(C.v2,{shouldDisplaySpinner:j,size:"small",variant:"outlined",color:"grey",onClick:function(){k({variables:{id:v.id}})},children:"Dismiss"})}),(0,S.jsx)(C.t2,{content:"You will be able to edit the message before sending",children:(0,S.jsx)(z.Z,{size:"small",onClick:p,noIcon:!0,children:"Edit & Use"})})]})]})}):(0,S.jsx)("div",{className:c.root,children:(0,S.jsx)(C.t2,{content:"See SideKick Response",children:(0,S.jsx)("span",{children:(0,S.jsx)(V.Z,{leftIcon:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(K.Z,{width:24,height:24}),(0,S.jsx)(L.Z,{width:24,height:24})]}),textVariant:"body-md-600",onClick:function(e){u(e),y(!0)},children:"Suggested Response"})})})}):null},oe=t(137102),le=t(756370),se=t(37313),ce=t(323600),de=t(445033);function ue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ue(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ge=(0,d.Z)((function(e){return{iconButton:{"& svg":{color:"dark"===e.palette.type?e.palette.groovy.grey[100]:e.palette.groovy.grey[400]},"&:hover":{backgroundColor:"transparent"}},list:{paddingLeft:"0 !important",gap:e.spacing(.5),display:"flex",flexWrap:"wrap",alignItems:"center","& li":{listStyle:"none"}}}}));function me(e){var n=e.count,t=void 0===n?3:n,a=ge();return(0,S.jsx)("ol",{className:a.list,children:(0,h.Z)(new Array(t)).map((function(e,n){return(0,S.jsx)("li",{children:(0,S.jsx)(C.G7,{width:42})},n)}))})}var he,fe=function(){var e=(0,te.fr)(),n=e.message,t=e.handleReaction,a=(0,W.JN)().channel,i=ge(),o=(0,O.useState)(!1),l=(0,r.Z)(o,2),s=l[0],c=l[1],d=(0,O.useRef)(!1),u=n.latest_reactions||[],p=(n.own_reactions||[]).map((function(e){return e.type})),g=u.reduce((function(e,n){var t=n.type;return t&&(e[t]=(e[t]||0)+1),e}),{}),m=(0,O.useCallback)((function(e){t(e,void 0)}),[t]);return s?(0,S.jsx)(me,{count:Object.keys(g).length||3}):0===Object.keys(g).length?null:(0,S.jsxs)("ol",{className:i.list,children:[Object.keys(g).sort().map((function(e){return(0,S.jsx)("li",{children:(0,S.jsx)(se.Z,{variant:"reaction-list",emoji:e,reacted:p.includes(e),reactionCount:g[e],reactions:u.filter((function(n){return n.type===e})),loadReactions:h})},e)})),(0,S.jsx)("li",{children:(0,S.jsx)(ce.Z,{onEmojiSelect:m,classes:i.iconButton})})]});function h(){return y.apply(this,arguments)}function y(){return(y=(0,f.Z)(v().mark((function e(){var t,r,i,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.current){e.next=2;break}return e.abrupt("return");case 2:d.current=!0,c(!0),e.prev=4,t=Object.values(g).reduce((function(e,n){return e+n}),0),r=[],i=0;case 8:return e.next=10,a.getReactions(n.id||"",{limit:300,offset:i});case 10:o=e.sent,r=r.concat(o.reactions),i+=300;case 13:if(i<t){e.next=8;break}case 14:a.state._updateMessage({id:n.id},(function(e){return pe(pe({},e),{},{latest_reactions:r})})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),(0,le.AX)(e.t0),(0,de.p)("Unable to get reactions, please try again later");case 21:return e.prev=21,d.current=!1,c(!1),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[4,17,21,25]])})))).apply(this,arguments)}},ye=t(193106),ve=t(686394),be=t(850429),xe=t(294184),ke=t.n(xe),je=t(540239),Ce=t(386527),we=t(427490),Oe=t(31073),Se=t(983156),Ze=t(910758),Te=t(425108);function Ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function _e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ie(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ie(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Pe=["occurrence","contentUsage","product","survey"];function Me(e){var n,a,d=e.additionalMessageInputProps,m=e.clearEditingState,h=e.editing,f=e.handleOpenThread,y=e.handleRetry,v=e.message,b=e.threadList,x=e.firstOfGroup,k=e.chatChannelKey,j=(0,je.yM)(),w=j.EditMessageInput,T=void 0===w?Ce.w:w,_=j.MessageRepliesCountButton,M=void 0===_?we.u:_,R=j.MessageTimestamp,D=void 0===R?Oe.i:R,E="failed"===v.status,K=Boolean(v.pinned),L=(0,o.M$)(),A=L.isInDrawer,z=L.closeDrawer,U=(0,O.useState)(!1),B=(0,r.Z)(U,2),V=B[0],Q=B[1],q=(0,O.useState)(v.attachments),W=(0,r.Z)(q,2),Y=W[0],G=W[1],H=(0,O.useState)(void 0),$=(0,r.Z)(H,2),X=$[0],J=$[1],ee=(0,O.useState)(!1),te=(0,r.Z)(ee,2),ae=te[0],re=te[1],le=null==Y?void 0:Y.filter((function(e){return("video"===e.type||"image"===e.type)&&!e.og_scrape_url})),se=new Set,ce=null==Y?void 0:Y.filter((function(e){return e.title_link})).filter((function(e){var n,t,a,r=null!==(n=null===(t=e.title_link)||void 0===t?void 0:t.replace(/\/$/,""))&&void 0!==n?n:"";return!se.has(null!=r?r:"")&&!se.has("".concat(r,"/"))&&(se.add(null!==(a=e.title_link)&&void 0!==a?a:""),!0)})),de=(0,ne.useFragment)((void 0!==he||(he=t(956998)).hash&&"eb98a28c6ab0d6da23c8e6f9b7601d40"!==he.hash&&Te.error("The definition of 'ChatChannelMessageFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),he),k),ue=(0,O.useCallback)((function(e){"left"===e&&le?J(le[(le.findIndex((function(e){return e===X}))-1+le.length)%le.length]):"right"===e&&le&&J(le[(le.findIndex((function(e){return e===X}))+1)%le.length])}),[le,X]);(0,O.useEffect)((function(){var e=function(e){"ArrowLeft"===e.key?ue("left"):"ArrowRight"===e.key&&ue("right")};return!0===ae&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[ue,ae]);var pe=Fe({isFailedMessage:E,isPinnedMessage:K,isInDrawer:A}),ge=(0,P.Z)(),me=(0,O.useRef)(null),xe=(0,Se.mx)().client,Ie=(0,i.hP)({threadId:v.id,disabled:Boolean(v.parent_id)}).botSuggestion;if((0,O.useEffect)((function(){var e=(0,ye.Xr)(v.attachments);G(e)}),[v.attachments]),v.deleted_at||"deleted"===v.type)return(0,S.jsx)(F,{message:v,threadList:b,handleReply:Re});var Me=v.user;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:pe.container,"data-testid":"ChatChannelSimpleMessage.container",onClick:Ne,onMouseEnter:function(){Q(!0)},onMouseLeave:function(){Q(!1)},onKeyDown:Ne,role:"button",tabIndex:0,children:[K&&(0,S.jsxs)("div",{className:pe.pinnedContainer,children:[(0,S.jsx)(C.De,{icon:"pin",active:!0,color:ge.palette.primary.main,paddingRight:1,height:24,width:24}),(0,S.jsx)(C.U4,{variant:"body-sm-600",color:"primary.main",children:v.pinned_by?"Pinned by ".concat(v.pinned_by.name):"Pinned"})]}),!h&&(0,S.jsxs)("div",{ref:me,className:pe.messageContainer,children:[Me&&(0,S.jsx)(S.Fragment,{children:x?(0,S.jsx)(g.Z,{testid:"ChatChannelMessageAvatar",className:pe.baseButton,userId:u.Z.toGlobalId("User",Me.disco_user_id),children:(0,S.jsx)(p.Z,{placeholderClassName:"avatar-placeholder",user:{id:u.Z.toGlobalId("User",Me.disco_user_id),first_name:Me.first_name,last_name:Me.last_name,avatar:Me.avatar,is_test_user:Me.is_disco_test_user||!1},size:40})}):(0,S.jsx)("div",{className:pe.profilePlaceholder})}),(0,S.jsxs)("div",{"data-testid":"message-inner",className:pe.message,children:[(0,S.jsxs)("div",{className:ke()(pe.nameAndDate,"message__name-and-date"),children:[null!==(n=v.user)&&void 0!==n&&n.name?(0,S.jsx)(g.Z,{testid:"ChatChannelMessageUserName",customAnchor:me.current,userId:u.Z.toGlobalId("User",v.user.disco_user_id),children:function(e){var n;return(0,S.jsx)(C.GY,_e(_e({},e),{},{children:(0,S.jsx)(C.U4,{variant:"body-md-600",display:"inline",marginRight:1,children:(null==v||null===(n=v.user)||void 0===n?void 0:n.name)&&v.user.name})}))}}):null,(0,S.jsx)(D,{format:be.zT.SHORT_TIME_FORMAT,customClass:pe.timestamp})]}),!e.disableOptions&&V&&(0,S.jsx)(oe.Z,{chatChannelKey:de}),(0,S.jsx)(N.Y,{message:v,customInnerClass:pe.messageText}),null==ce?void 0:ce.map((function(e){return(0,S.jsx)(Z,{attachment:e,client:xe,message:v},e.id)})),null!=Y&&Y.length?(0,S.jsxs)(S.Fragment,{children:[1===(null==le?void 0:le.length)&&"video"===le[0].type?(0,S.jsx)("video",{src:le[0].asset_url,title:le[0].title,style:{border:0,width:440,height:300,borderRadius:12},controls:!0}):(0,S.jsxs)("div",{className:pe.imageContainer,children:[null==le?void 0:le.map((function(e){return(0,S.jsxs)(S.Fragment,{children:["image"===e.type&&(0,S.jsx)("span",{onClick:function(){J(e),re(!0)},role:"button",tabIndex:0,onKeyPress:function(e){"Enter"!==e.key&&" "!==e.key||re(!0)},children:(0,S.jsx)("img",{src:e.image_url,alt:e.title,className:pe.imageThumbnail},e.id)}),"video"===e.type&&(0,S.jsx)("div",{className:pe.video,children:(0,S.jsxs)("span",{onClick:function(){J(e),re(!0)},role:"button",tabIndex:0,onKeyPress:function(e){"Enter"!==e.key&&" "!==e.key||re(!0)},className:pe.videoContainer,children:[(0,S.jsx)("div",{className:pe.overlay}),(0,S.jsx)("video",{src:e.asset_url,className:pe.thumbnail,onClick:function(){re(!0)}}),(0,S.jsx)(l.default,{className:pe.playIcon})]})})]})})),ae&&(0,S.jsx)(C.SH,{isOpen:!0,onClose:function(){return re(!1)},testid:"photoPreviewModal",title:(null==X?void 0:X.fallback)||(null==X?void 0:X.title),modalContentLabel:"photoPreviewModal",body:(0,S.jsxs)(S.Fragment,{children:[(null!==(a=null==le?void 0:le.length)&&void 0!==a?a:0)>1&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(C.I4,{onClick:function(){ue("left")},height:40,width:40,svgStyles:{height:20,width:20},className:pe.modalLeftArrow,children:(0,S.jsx)(s.default,{})}),(0,S.jsx)(C.I4,{onClick:function(){ue("right")},height:40,width:40,svgStyles:{height:20,width:20},classes:{root:ke()(pe.modalRightArrow)},children:(0,S.jsx)(c.default,{})})]}),"image"===(null==X?void 0:X.type)?(0,S.jsx)("img",{src:null==X?void 0:X.image_url,alt:null==X?void 0:X.title,className:pe.image},null==X?void 0:X.id):(0,S.jsx)("video",{src:null==X?void 0:X.asset_url,controls:!0,className:pe.modalVideo})]}),classes:{container:pe.mediaContainer,body:pe.mediaBody}})]}),Y.some((function(e){return"file"===e.type||"occurrence"===e.type||"contentUsage"===e.type||"product"===e.type||"survey"===e.type||"pathway"===e.type||"audio"===e.type}))&&(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:pe.fileContainer,children:[Y.filter((function(e){return("file"===e.type||"audio"===e.type)&&!e.og_scrape_url})).map((function(e){return(0,S.jsx)("div",{className:pe.file,children:(0,S.jsx)(I.e,{name:e.title,url:e.asset_url,size:e.file_size})},e.id)})),Y.filter((function(e){return e.type&&Pe.includes(e.type)})).map((function(e){return n=ve.Df[e.type],t=e.text,a=O.createElement(n.Component,{entityId:t}),(0,S.jsx)(O.Fragment,{children:a},t);var n,t,a}))]})})]}):null,(0,S.jsx)(fe,{}),!b&&!!v.reply_count&&(0,S.jsx)("div",{className:pe.replyContainer,children:(0,S.jsx)(M,{onClick:function(e){return Re(e)},reply_count:v.reply_count})})]})]})]},v.id),Ie&&!h&&(0,S.jsx)(ie,{botMessageKey:Ie,inThread:b,threadId:v.id}),h&&(0,S.jsx)(Ze.R,_e({clearEditingState:m,Input:T,message:v},d))]});function Ne(){E&&y(v)}function Re(e){z&&z(),f(e)}}var Fe=(0,d.Z)((function(e){return{baseButton:{padding:"0px"},container:function(n){var t=n.isFailedMessage,r=n.isPinnedMessage,i=n.isInDrawer;return _e(_e({display:"flex",outline:"none",borderRadius:e.measure.borderRadius.big,transition:"all 0.2s ease","&:hover":{backgroundColor:e.palette.groovy.neutral[100]}},(0,m.Z)(r,{backgroundColor:i?e.palette.background.paper:"dark"===e.palette.type?e.palette.groovy.grey[700]:e.palette.primary.light,borderRadius:e.measure.borderRadius.big,flexDirection:"column",marginBottom:i?e.spacing(1):"".concat(e.spacing(1),"px !important")})),{},{cursor:t?"pointer":"default","& .str-chat__avatar":_e({width:"40px",height:"40px",flex:"0 0 40px",marginRight:e.spacing(2)},(0,m.Z)(r,{visibility:"visible",height:"40px !important"})),"& .str-chat__message-mention":{color:e.palette.primary.main,fontSize:"15px"},"& .str-chat__message-text-inner":(0,a.Z)({color:e.palette.groovy.grey[700],padding:0,borderRadius:0,border:"none",backgroundColor:"transparent",minHeight:"auto","& p":_e({},e.typography["body-sm"])},e.breakpoints.down("xs"),{maxWidth:"none"}),"& .str-chat__message-attachment--img":{borderRadius:e.measure.borderRadius.medium,border:"1px solid ".concat(e.palette.groovy.grey[200]),height:"80px",width:"80px",objectFit:"cover",alignItems:"center",justifyContent:"center",display:"flex",marginRight:e.spacing(1.5)},"& .str-chat__message-attachment":{maxWidth:"100%"},"& .str-chat__gallery":{justifyContent:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:e.spacing(.5),"&--square":{backgroundColor:"transparent"}},"& .str-chat__message-url-link":{whiteSpace:"unset",wordBreak:"break-all"},"& .str-chat_player-wrapper":{height:"80px",width:"80px",paddingTop:0},"& .str-chat__message-attachment--card--no-image":{height:"unset"},"& .str-chat__message-attachment-card":(0,a.Z)({marginTop:0,width:"fit-content","&--url":{textTransform:"unset"},"&--header":{height:"unset",width:"unset",maxHeight:"175px","& img":{width:"auto",height:"auto",margin:"auto"}}},e.breakpoints.up("sm"),{"&--image":{display:"flex",alignItems:"center"}})})},image:{height:"100%",width:"100%",minWidth:"0",objectFit:"contain"},modalVideo:{height:"100%",width:"100%",minWidth:"0",objectFit:"contain"},modalRightArrow:{border:"1px solid",height:"40px",width:"40px",backgroundColor:e.palette.background.paper,position:"absolute",top:"50%",right:"36px",transform:"translateY(-50%)"},modalLeftArrow:{border:"1px solid",height:"40px",width:"40px",backgroundColor:e.palette.background.paper,position:"absolute",top:"50%",left:"36px",transform:"translateY(-50%)"},mediaBody:{height:"100%",minWidth:0},mediaContainer:{width:e.measure.modalMaxWidth.large,height:"100%",position:"relative"},replyContainer:{marginBottom:e.spacing(1)},nameAndDate:function(n){var t=n.isPinnedMessage;return _e({display:"flex",alignItems:"center",flexWrap:"wrap",gap:e.spacing(1)},(0,m.Z)(t,{display:"flex !important"}))},timestamp:_e(_e({},e.typography["body-sm"]),{},{fontSize:"12px",color:e.palette.groovy.grey[400],textTransform:"uppercase"}),message:{minWidth:"90%",maxWidth:"100%",marginLeft:e.spacing(1.5),width:"100%",display:"flex",flexDirection:"column",gap:e.spacing(1.5)},messageContainer:{display:"flex",maxWidth:"100%",width:"100%",position:"relative","& .str-chat__message-attachment":{maxHeight:"unset","& .str-chat__message-attachment-card":{display:"flex",flexWrap:"wrap",width:"100%","& .str-chat__message-attachment-card--header img":{maxWidth:"100%"}}}},pinnedContainer:{display:"flex",padding:e.spacing(.5,0,1,0),alignItems:"center"},messageText:{"& ul":{marginLeft:e.spacing(2)},wordBreak:"normal",overflowWrap:"anywhere","& > * > pre":{whiteSpace:"pre-wrap"}},file:{height:"80px",width:"400px",display:"flex",alignItems:"center",borderRadius:e.measure.borderRadius.big,border:"1px solid",flexShrink:0,position:"relative",backgroundColor:e.palette.background.paper,boxShadow:e.palette.groovyDepths.xs,borderColor:e.palette.divider,padding:e.spacing(2)},imageThumbnail:{borderRadius:e.measure.borderRadius.medium,border:"1px solid ".concat(e.palette.groovy.neutral[200]),height:"80px",width:"80px",objectFit:"cover",alignItems:"center",justifyContent:"center",display:"flex",cursor:"pointer"},fileContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",gap:e.spacing(1.5)},imageContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",gap:e.spacing(1.5)},profilePlaceholder:{width:"40px",height:"0px",flexShrink:0},video:{display:"flex",height:"80px",width:"80px",position:"relative",cursor:"pointer"},thumbnail:{borderRadius:e.measure.borderRadius.big,height:"100%",width:"100%",objectFit:"cover",alignItems:"center",justifyContent:"center",display:"flex"},playIcon:{position:"absolute",top:"50%",left:"50%",zIndex:2,transform:"translateY(-50%) translateX(-50%)"},videoContainer:{position:"relative"},overlay:{position:"absolute",borderRadius:e.measure.borderRadius.medium,inset:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.2)",zIndex:1,pointerEvents:"none"}}})),Ne=O.memo(Me,(function(e,n){return e.threadList!==n.threadList}));var Re=function(e){var n=(0,te.fr)();return(0,S.jsx)(Ne,_e(_e({},n),e))}},623120:function(e,n,t){t.d(n,{Y:function(){return j}});var a=t(204942),r=t(810863),i=t(769689),o=(t(470609),t(886102)),l=t(294215),s=t(386010),c=(t(423274),t(112239)),d=t(21681),u=t(437495),p=t(785893),g=function(){var e,n,t=(0,c.fr)("QuotedMessage"),a=t.isMyMessage,r=t.message,i=(0,d.Ht)("QuotedMessage").userLanguage,g=(0,u.uz)("QuotedMessage").jumpToMessage,m=r.quoted_message;if(!m)return null;var h=(null===(e=m.i18n)||void 0===e?void 0:e["".concat(i,"_text")])||m.text,f=m.attachments.length?m.attachments[0]:null;return h||f?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:(0,s.Z)("str-chat__quoted-message-preview quoted-message",{mine:a()}),onClickCapture:function(e){e.stopPropagation(),e.preventDefault(),g(m.id)},children:[m.user&&(0,p.jsx)(l.Z,{user:m.user}),(0,p.jsxs)("div",{className:"quoted-message-inner str-chat__quoted-message-bubble",children:[f&&(0,p.jsx)(o.Z,{attachments:[f]}),(0,p.jsx)("div",{children:h})]})]}),null!==(n=r.attachments)&&void 0!==n&&n.length&&r.quoted_message?(0,p.jsx)(o.Z,{attachments:r.attachments}):null]}):null},m=t(294184),h=t.n(m),f=t(667294),y=t(540239),v=t(549238),b=t(52127);function x(e){var n,t=e.customInnerClass,r=e.customWrapperClass,o=void 0===r?"":r,l=e.message,s=e.theme,u=void 0===s?"simple":s,m=(0,y.yM)("MessageText").QuotedMessage,f=void 0===m?g:m,x=(0,c.fr)("MessageText"),j=x.message,C=x.onMentionsClickMessage,w=x.onMentionsHoverMessage,O=x.unsafeHTML,S=x.renderText,Z=void 0===S?v.IY:S,T=(0,d.Ht)("MessageText"),I=T.t,_=T.userLanguage,P=l||j,M=(0,b.ue)(P),F=(0,i.Z)(P,_,Z),N=k(),R=o||"str-chat__message-text",D=t||"str-chat__message-text-inner str-chat__message-".concat(u,"-text-inner");return F||P.quoted_message?(0,p.jsx)("div",{className:R,tabIndex:0,style:{outline:"none"},children:(0,p.jsxs)("div",{className:h()(D,N.text,(n={},(0,a.Z)(n,"str-chat__message-".concat(u,"-text-inner--has-attachment"),M),(0,a.Z)(n,"str-chat__message-".concat(u,"-text-inner--is-emoji"),(0,b.Kh)(P.text)&&!P.quoted_message),n)),"data-testid":"message-text-inner-wrapper",onClick:C,onMouseOver:w,children:[P.quoted_message&&(0,p.jsx)(f,{}),"error"===P.type&&(0,p.jsx)("div",{className:"str-chat__".concat(u,"-message--error-message str-chat__message--error-message"),children:I("Error · Unsent")}),"failed"===P.status&&(0,p.jsx)("div",{className:"str-chat__".concat(u,"-message--error-message str-chat__message--error-message"),children:403===P.errorStatusCode?I("Message Failed · Unauthorized"):I("Message Failed · Click to try again")}),O&&P.html?(0,p.jsx)("div",{dangerouslySetInnerHTML:{__html:P.html}}):(0,p.jsx)("div",{className:"fs-mask",children:F})]})}):null}var k=(0,r.Z)((function(e){return{text:{color:e.palette.text.primary,display:"flex",flexDirection:"column",gap:e.spacing(1.5)}}})),j=f.memo(x)},956998:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannelMessageFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"ChatChannelMessageOptionsFragment"}],type:"ChatChannel",abstractKey:null,hash:"eb98a28c6ab0d6da23c8e6f9b7601d40"};n.default=a},624785:function(e,n,t){var a=t(204942),r=t(669893),i=t(681389),o=t(396538),l=t(810863),s=t(541321),c=t(459374),d=t(785893);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,l.Z)((function(e){return{profileButton:{cursor:"pointer",fontWeight:700},anchor:{color:e.palette.groovy.blue[400],fontWeight:500},tooltipContent:{display:"flex",alignItems:"center",gap:e.spacing(1)},tooltipLogo:{width:24,height:24,borderRadius:e.measure.borderRadius.default}}}));n.Z=function(e){var n=e.children,t=e.href,a=g(),l=function(){try{var e=new URL(t).searchParams.get("drawerProfileId");return e?decodeURIComponent(e):null}catch(e){return null}}();return l?(0,d.jsx)(o.Z,{userId:l,children:function(e){return(0,d.jsx)(s.U4,p(p({},e),{},{className:a.profileButton,color:"groovy.blue.400",display:"inline",children:n}))}}):(0,d.jsx)(s.t2,{content:function(){switch(t.includes("drawerProfileId")?"disco_profile":t.match(/\/p\/.*\/chat\/.*\?streamMsgId=.*/)?"disco_thread":t.match(/slack.com\/archives\/.*\/p.*thread_ts=.*/)?"slack_thread":t.includes("slack.com/team/")?"slack_link":"other"){case"slack_thread":return(0,d.jsxs)("div",{className:a.tooltipContent,children:[(0,d.jsx)(c.Z,{className:a.tooltipLogo,src:i.Z}),(0,d.jsx)(s.U4,{variant:"body-xs-600",children:"Slack Thread"})]});case"slack_link":return(0,d.jsxs)("div",{className:a.tooltipContent,children:[(0,d.jsx)(c.Z,{className:a.tooltipLogo,src:i.Z}),(0,d.jsx)(s.U4,{variant:"body-xs-600",children:"Slack Link"})]});case"disco_thread":return(0,d.jsxs)("div",{className:a.tooltipContent,children:[(0,d.jsx)(c.Z,{className:a.tooltipLogo,src:r.Z}),(0,d.jsx)(s.U4,{variant:"body-xs-600",children:"Disco Thread"})]});default:return null}}(),children:(0,d.jsx)("a",{className:a.anchor,href:t,target:"_blank",rel:"noopener noreferrer",children:n})})}},617402:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannelBotSuggestedMessageFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"suggestedMessage",storageKey:null}],type:"BotQueuedMessage",abstractKey:null,hash:"7a7aade140b9e091bc57de27b6fc1706"};n.default=a},261886:function(e,n,t){t.r(n);t(244311);var a,r,i,o={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"ChatChannelBotSuggestedMessage_DismissBotSuggestionMutation",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:"DismissBotSuggestionResponse",kind:"LinkedField",name:"dismissBotSuggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"BotQueuedMessage",kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatChannelBotSuggestedMessage_DismissBotSuggestionMutation",selections:[{alias:null,args:r,concreteType:"DismissBotSuggestionResponse",kind:"LinkedField",name:"dismissBotSuggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"BotQueuedMessage",kind:"LinkedField",name:"node",plural:!1,selections:[i,{alias:null,args:null,filters:null,handle:"deleteRecord",key:"",kind:"ScalarHandle",name:"id"}],storageKey:null}],storageKey:null}]},params:{cacheID:"d0e42c3dfb9699b7ecb15e296fc5cc0c",id:null,metadata:{},name:"ChatChannelBotSuggestedMessage_DismissBotSuggestionMutation",operationKind:"mutation",text:"mutation ChatChannelBotSuggestedMessage_DismissBotSuggestionMutation(\n  $id: ID!\n) {\n  dismissBotSuggestion(id: $id) {\n    node {\n      id\n    }\n  }\n}\n"}};o.hash="cfb92a5abac113bd7adf96b7786d7c07",n.default=o},769689:function(e,n,t){t.d(n,{Z:function(){return h}});var a=t(241451),r=t(624785),i=t(667294),o=t(178434),l=t(690630),s=(t(77346),function(e){return function(){var n=e.find((function(e){return"channel"===e.name})),t=RegExp("@channel","g"),a=function(e){return(0,l.u)("element",{properties:{},tagName:"mention",mentionedGroup:{name:"channel"}},[(0,l.u)("text",e)])};return function(e){n&&(0,o.n)(e,[t,a])}}}),c=t(810863),d=t(541321),u=t(785893);var p=(0,c.Z)({userMention:{cursor:"pointer"}}),g=function(e){var n=e.children,t=e.node,a=t.mentionedUser,r=t.mentionedGroup,i=p();return a?(0,u.jsx)(d.U4,{variant:"body-md-700",color:"primary.main",className:i.userMention,"data-user-id":a.id,component:"span",children:n}):r?(0,u.jsx)(d.U4,{variant:"body-md-700",color:"primary.main",component:"span",children:n}):null},m=(t(423274),t(549238));function h(e,n){var t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.IY,l=(null===(t=e.i18n)||void 0===t?void 0:t["".concat(n,"_text")])||e.text,c=function(n){return e.mentioned_groups?[s(e.mentioned_groups)].concat((0,a.Z)(n)):n};return(0,i.useMemo)((function(){if(!l)return null;var n=l;return n.includes("‎")||(n=n.replace(/\n\n/g,"\n\n").replace(/\n(?!\n)/g,"  \n")),o(n,e.mentioned_users,{customMarkDownRenderers:{link:r.Z,mention:g},getRehypePlugins:c})}),[e.mentioned_users,l,e.mentioned_groups])}},627061:function(e,n,t){var a=t(810863),r=t(623120),i=t(276061),o=t(294184),l=t.n(o),s=t(112239),c=t(785893),d=(0,a.Z)((function(e){return{quotedMessage:{display:"flex",alignItems:"flex-start",borderLeft:"dark"===e.palette.type?"2px solid ".concat(e.palette.groovy.neutral[400]):"2px solid ".concat(e.palette.groovy.grey[200]),paddingLeft:e.spacing(1),flexDirection:"column",gap:e.spacing(1.5),position:"relative",color:e.palette.groovy.grey[400]},quoteAttachments:{display:"flex",gap:e.spacing(1.5),flexWrap:"wrap"},quotedMessageText:{"& .str-chat__message-text-inner":{"& p":{margin:0,fontSize:"".concat(e.typography["body-md"].fontSize," !important"),color:"dark"===e.palette.type?"".concat(e.palette.groovy.neutral[600]," !important"):e.palette.groovy.grey[500]}},"& div":{color:"dark"===e.palette.type?"".concat(e.palette.groovy.neutral[600]," !important"):e.palette.groovy.grey[500]},"& .str-chat__message-url-link":{color:"dark"===e.palette.type?e.palette.groovy.neutral[600]:e.palette.groovy.grey[500]}}}}));n.Z=function(){var e,n=(0,s.fr)().message,t=d(),a=n.quoted_message;if(!a)return null;var o=null!==(e=a.attachments)&&void 0!==e&&e.length?a.attachments:null,u=null==o?void 0:o.filter((function(e){return!e.og_scrape_url}));return a.text||o?(0,c.jsxs)("div",{className:l()(t.quotedMessage,"quoted-message"),"data-testid":"quoted-message",children:[(0,c.jsx)("div",{className:t.quotedMessageText,children:(0,c.jsx)(r.Y,{message:a})}),null!=u&&u.length?(0,c.jsx)("div",{className:t.quoteAttachments,children:(0,c.jsx)(i.Z,{quotedMessageAttachment:u})}):null]}):null}},276061:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(383248),r=t(810863),i=t(669050),o=t(354384),l=t(164344),s=(t(686394),t(423274),t(785893));function c(e){var n=d(),t=e.quotedMessageAttachment.filter((function(e){return l.L.includes(e.type)})),r=e.quotedMessageAttachment.filter((function(e){return["file","audio"].includes(e.type||"")}));return(0,s.jsxs)(s.Fragment,{children:[e.quotedMessageAttachment.map((function(e){return(0,s.jsxs)(s.Fragment,{children:[e.image_url&&!e.og_scrape_url&&(0,s.jsxs)("div",{className:n.mediaContainer,children:[(0,s.jsx)("div",{className:n.overlay}),(0,s.jsx)("img",{src:e.image_url,alt:e.title,className:n.thumbnail,"data-testid":"quoted-message-attachment-image"})]}),"video"===e.type&&(0,s.jsxs)("div",{className:n.mediaContainer,children:[(0,s.jsx)("div",{className:n.overlay}),(0,s.jsx)("video",{src:e.asset_url,className:n.videoThumbnail,"data-testid":"quoted-message-attachment-video"}),(0,s.jsx)(a.default,{className:n.playIcon})]})]})})),t.map((function(e){return(0,s.jsxs)("div",{className:n.mediaContainer,children:[(0,s.jsx)("div",{className:n.overlay}),(0,s.jsx)(i.Z,{type:e.type,entityId:e.text})]})})),r.map((function(e){return(0,s.jsxs)("div",{className:n.mediaContainer,children:[(0,s.jsx)("div",{className:n.overlay}),(0,s.jsx)("div",{className:n.item,"data-testid":"quoted-file-attachment",children:(0,s.jsx)(o.e,{name:e.title,url:e.asset_url,size:e.file_size})})]},e.asset_url)}))]})}var d=(0,r.Z)((function(e){return{thumbnail:{position:"relative",borderRadius:e.measure.borderRadius.medium,border:"1px solid #E4E4E7",height:"80px",width:"80px",objectFit:"cover",alignItems:"center",justifyContent:"center",display:"flex",flexShrink:0},videoThumbnail:{display:"flex",borderRadius:e.measure.borderRadius.medium,height:"80px",width:"80px",objectFit:"cover",alignItems:"center",justifyContent:"center",flexShrink:0},mediaContainer:{position:"relative",borderRadius:e.measure.borderRadius.medium,overflow:"hidden",flexShrink:0},playIcon:{position:"absolute",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)"},overlay:{position:"absolute",inset:0,width:"100%",height:"100%",backgroundColor:"dark"===e.palette.type?"rgba(255, 255, 255, 0.1)":"rgba(255,255,255,0.5)",zIndex:1,pointerEvents:"none",borderRadius:"inherit",boxSizing:"content-box !important"},item:{height:"80px",width:"400px",display:"flex",alignItems:"center",borderRadius:e.measure.borderRadius.big,flexShrink:0,position:"relative",border:"1px solid",boxShadow:e.palette.groovyDepths.xs,borderColor:e.palette.divider,backgroundColor:e.palette.background.paper,padding:e.spacing(2),overflow:"hidden"}}}))},457932:function(e,n,t){var a=t(934702),r=t(810863),i=t(623120),o=t(276061),l=t(541321),s=t(108920),c=t(817812),d=t(437495),u=t(785893),p=function(){var e=(0,d.uz)().setQuotedMessage,n=g(),t=(0,s.Z)();return(0,u.jsxs)("div",{className:n.header,children:[(0,u.jsx)(l.U4,{variant:"body-md",color:"text.secondary",children:"Reply to message:"}),(0,u.jsx)(c.Z,{size:"small",onClick:function(){return e(void 0)},children:(0,u.jsx)(a.default,{width:15,height:15,color:t.palette.text.secondary})})]})},g=(0,r.Z)((function(e){return{header:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5)},quotedContainer:{"& .str-chat__message-attachment--image":{maxWidth:"300px",borderRadius:"16px"},display:"flex",flexDirection:"column",gap:e.spacing(1)},content:{display:"flex",width:"100%",gap:e.spacing(2),flexDirection:"column",borderLeft:"dark"===e.palette.type?"2px solid ".concat(e.palette.groovy.neutral[400]):"2px solid ".concat(e.palette.groovy.grey[200]),paddingLeft:e.spacing(1.5),position:"relative"},quoteAttachments:{display:"flex",gap:e.spacing(1.5),overflowX:"auto",overflowY:"hidden",maxHeight:"276px"},quotedMessageText:{color:"dark"===e.palette.type?"".concat(e.palette.groovy.neutral[600]," !important"):e.palette.groovy.grey[500],pointerEvents:"none","& .str-chat__message-url-link":{color:"dark"===e.palette.type?"".concat(e.palette.groovy.neutral[600]," !important"):e.palette.groovy.grey[500],transition:"none !important"},"& .str-chat__message-text-inner":{"& ul, & ol":{paddingLeft:e.spacing(2)}}}}}));n.Z=function(e){var n,t=e.quotedMessage,a=g(),r=null!==(n=t.attachments)&&void 0!==n&&n.length?t.attachments:null,l=null==r?void 0:r.filter((function(e){return!e.og_scrape_url}));return t.text||r?(0,u.jsxs)("div",{className:a.quotedContainer,"data-testid":"quoted-message-preview",children:[(0,u.jsx)(p,{}),(0,u.jsxs)("div",{className:a.content,children:[(0,u.jsx)("div",{className:a.quotedMessageText,children:(0,u.jsx)(i.Y,{message:t})}),null!=l&&l.length?(0,u.jsx)("div",{className:a.quoteAttachments,"data-testid":"quoted-message-attachments",children:(0,u.jsx)(o.Z,{quotedMessageAttachment:l})}):null]})]}):null}},580944:function(e,n,t){var a=t(810863),r=t(541321),i=(t(667294),t(321707)),o=t(785893);var l=(0,a.Z)((function(e){return{iconButton:{padding:e.spacing(2),backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.hover,"& path":{color:e.palette.primary.contrastText}},"& path":{color:e.palette.primary.light}}}}));n.Z=function(e){var n=e.sendMessage,t=l(),a=(0,i.Nc)(),s=a.handleSubmit,c=a.text,d=a.attachments,u=a.disabled;return(0,o.jsx)(r.v2,{"data-testid":"ChatChannelDetailFooterSendButton.button",onClick:function(e){return function(e){n?n(e):s(e)}(e)},className:t.iconButton,disabled:""===c&&0===d.length||u,children:"Send Now"})}},363367:function(e,n,t){t.d(n,{Z:function(){return Y}});var a,r=t(204942),i=t(386854),o=(t(470609),t(810863)),l=t(294215),s=t(115861),c=t(887757),d=t.n(c),u=t(285245),p=t(10165),g=t(457932),m=(t(979640),t(292945)),h=t(98301),f=t(889570),y=t(363748),v=t(511626),b=t(193106),x=t(445033),k=t(541321),j=t(294184),C=t.n(j),w=t(667294),O=t(641404),S=t(422578),Z=(t(244311),t(387029)),T=t(321707),I=t(584622),_=t(785893),P=t(425108);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var N,R=(0,o.Z)((function(e){return{container:{position:"relative",border:"1px solid ".concat(e.palette.divider),borderRadius:"0 0 ".concat(e.measure.borderRadius.big,"px ").concat(e.measure.borderRadius.big,"px")},root:{"& .rfu-dropzone":{"& .rfu-dropzone__notifier":{display:"none"},"&.rfu-dropzone--accept .rfu-dropzone__notifier":{display:"flex",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:e.zIndex.raise3,alignItems:"center",justifyContent:"center",border:"2px dashed ".concat(e.palette.primary.main),borderRadius:e.measure.borderRadius.medium,"& .rfu-dropzone__inner":{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(2),"& svg":{color:e.palette.primary.main},"& p":F({color:e.palette.text.primary,margin:0},e.typography["body-md"])}}},"&.str-chat__input-flat":{backgroundColor:e.palette.background.paper,display:"list-item"},"&.str-chat__input-flat-wrapper":{display:"block",width:"100%"},"& .str-chat__input-flat--textarea-wrapper":(0,r.Z)({maxWidth:"100%",width:"100%"},e.breakpoints.down("sm"),{flexDirection:"column-reverse"}),"& .str-chat__textarea":{display:"flex",alignItems:"center",width:"100%","& > textarea":F(F({width:"100%",background:"transparent !important",padding:e.spacing(1,2),borderRadius:e.measure.borderRadius.medium,color:e.palette.text.primary,border:"none !important"},e.typography["body-sm"]),{},{"&:focus":F(F({border:"none !important",boxShadow:"none !important",background:"transparent !important"},e.typography["body-sm"]),{},{color:e.palette.text.secondary}),"&::placeholder":F(F({},e.typography["body-sm"]),{},{color:e.palette.groovy.grey[300],whiteSpace:"nowrap",overflow:"hidden",maxHeight:"40px"})})}},input:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",flexDirection:"column",width:"100%",gap:e.spacing(1),padding:e.spacing(1.5),background:e.palette.background.paper,borderRadius:"0 0 ".concat(e.measure.borderRadius.big,"px ").concat(e.measure.borderRadius.big,"px")},inputMessage:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",background:"transparent"},buttons:{display:"flex",justifyContent:"flex-end",gap:e.spacing(.5)}}})),D=function(){var e=(0,Z.JN)(),n=e.acceptedFiles,r=e.multipleUploads,i=e.quotedMessage,o=(0,T.Nc)(),l=o.clearEditingState,c=o.cooldownRemaining,j=o.handleSubmit,w=o.isUploadEnabled,M=o.maxFilesLeft,N=o.uploadNewFiles,D=o.upsertAttachments,E=o.message,K=o.attachments,L=o.onPaste,A=o.text,z=R(),U=(0,u.vn)(),B=(0,S.useLazyLoadQuery)((void 0!==a||(a=t(979640)).hash&&"1edd73f41a4b6e2eefe1ecc23b8d3aec"!==a.hash&&P.error("The definition of 'ChatChannelEditMessageInputQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{id:U.id},{fetchPolicy:"store-and-network"}).organization;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(h.b,{}),(0,_.jsx)("div",{className:z.container,children:(0,_.jsx)("div",{className:C()(z.root),"data-testid":"ChatChannelEditMessageInput.container",children:(0,_.jsxs)(O.vR,{accept:n,disabled:!w||0===M||!!c,handleFiles:N,maxNumberOfFiles:M,multiple:r,children:[i&&(0,_.jsx)(g.Z,{quotedMessage:i}),(0,_.jsx)("div",{className:"str-chat__input-flat-wrapper",children:(0,_.jsx)("div",{className:"str-chat__input-flat--textarea-wrapper",children:(0,_.jsxs)("div",{className:z.input,children:[(0,_.jsx)(f.Z,{onPaste:function(e){L(e);var n=e.clipboardData.getData("Text"),t=p.Z.connectionToArray(null==B?void 0:B.products),a=(0,b.j6)(n,U,t);if(a&&a.length>0){var r=a.map((function(e){return F(F({},e),{},{localMetadata:{id:(0,I.Z)()}})}));D(r)}},rows:1,maxRows:v.EI,grow:!0,placeholder:"Edit your message"}),w&&(0,_.jsx)(y.f,{previewLinksToHide:Array.isArray(null==E?void 0:E.previewLinksToHide)?null==E?void 0:E.previewLinksToHide:void 0}),(0,_.jsxs)("div",{className:z.inputMessage,children:[(0,_.jsx)(m.o,{isEditing:!0}),(0,_.jsxs)("div",{className:z.buttons,children:[(0,_.jsx)(k.v2,{color:"grey",variant:"outlined",onClick:l,children:"Cancel"}),!c&&(0,_.jsx)(k.v2,{onClick:function(e){return V.apply(this,arguments)},children:"Save Edits"})]})]})]})})})]})})})]});function V(){return(V=(0,s.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(null==A?void 0:A.trim())||0!==K.length){e.next=4;break}(0,x.p)("Cannot save an empty message"),e.next=8;break;case 4:return e.next=6,(0,b.R$)(A,U);case 6:t=e.sent,j(n,{text:t});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},E=(t(48924),t(137102)),K=t(540239),L=t(173082),A=t(31073),z=t(112239),U=t(425108);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Q=function(e){var n,a=e.editing,r=e.handleRetry,o=e.message,s=e.chatChannelKey,c=(0,K.yM)(),d=c.MessageDeleted,u=void 0===d?L.c:d,p=c.MessageTimestamp,g=void 0===p?A.i:p,m=(0,S.useFragment)((void 0!==N||(N=t(48924)).hash&&"88ff6f9f27319ef342d76d3815ccb8b2"!==N.hash&&U.error("The definition of 'ChatChannelEditMessageFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),N),s),h="failed"===o.status,f=(0,w.useState)(!1),y=(0,i.Z)(f,2),v=y[0],b=y[1],x=q({isFailedMessage:h});return o.deleted_at||"deleted"===o.type?(0,_.jsx)(u,{message:o}):(0,_.jsx)("div",{className:x.container,children:(0,_.jsxs)("div",{className:x.text,"data-testid":"ChatChannelSimpleMessage.container",onMouseEnter:function(){b(!0)},onMouseLeave:function(){b(!1)},onClick:j,onKeyDown:j,role:"button",tabIndex:0,children:[o.user&&(0,_.jsx)(l.Z,{user:o.user}),(0,_.jsxs)("div",{"data-testid":"message-inner",className:x.message,children:[(0,_.jsxs)("div",{className:C()(x.nameAndDate,"message__name-and-date"),children:[null!==(n=o.user)&&void 0!==n&&n.name?(0,_.jsx)(k.U4,{variant:"body-md-600",display:"inline",marginRight:1,children:o.user.name}):null,(0,_.jsx)(g,{calendar:!0,customClass:x.timestamp})]}),v&&(0,_.jsx)(E.Z,{chatChannelKey:m}),a&&(0,_.jsx)(D,{})]})]},o.id)});function j(){h&&r(o)}},q=(0,o.Z)((function(e){return{container:{backgroundColor:e.palette.groovy.neutral[100],borderRadius:e.measure.borderRadius.big},text:{display:"flex",padding:e.spacing(1.5),backgroundColor:e.palette.groovy.neutral[100],borderRadius:e.measure.borderRadius.big,cursor:function(e){return e.isFailedMessage?"pointer":"default"},"& .str-chat__avatar":{width:"40px",height:"40px",flex:"0 0 40px",marginRight:e.spacing(2)},"& .str-chat__message-mention":{color:e.palette.primary.main,fontSize:"15px"},"& .str-chat__message-text-inner":(0,r.Z)({color:e.palette.groovy.grey[700],padding:0,borderRadius:0,border:"none",backgroundColor:"transparent",minHeight:"auto","& p":V({},e.typography["body-sm"])},e.breakpoints.down("xs"),{maxWidth:"none"}),"& .str-chat__message-attachment--img":{maxWidth:"300px",borderRadius:"16px"},"& .str-chat__gallery":{justifyContent:"flex-start"},"& .str-chat__gallery-image img":{borderRadius:"16px"},"& .str-chat__message-url-link":{whiteSpace:"unset",wordBreak:"break-all"},"& .str-chat__message-attachment--card--no-image":{height:"unset"},"& .str-chat__message-attachment-card":(0,r.Z)({marginTop:0,width:"fit-content","&--url":{textTransform:"unset"},"&--header":{height:"unset",width:"unset",maxHeight:"175px","& img":{width:"auto",height:"auto",margin:"auto"}}},e.breakpoints.up("sm"),{"&--image":{display:"flex",alignItems:"center"}})},nameAndDate:{display:"flex",alignItems:"center",flexWrap:"wrap"},timestamp:V(V({},e.typography["body-sm"]),{},{fontSize:"12px",color:e.palette.groovy.grey[400]}),message:{width:"100%",minWidth:"0px",maxWidth:"100%"}}})),W=w.memo(Q),Y=function(e){var n=(0,z.fr)();return(0,_.jsx)(W,V(V({},n),e))}},48924:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannelEditMessageFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"ChatChannelMessageOptionsFragment"}],type:"ChatChannel",abstractKey:null,hash:"88ff6f9f27319ef342d76d3815ccb8b2"};n.default=a},979640:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"ChatChannelEditMessageInputQuery",selections:[{alias:"organization",args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[o={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"type",value:"course"}],concreteType:"ProductNodeConnection",kind:"LinkedField",name:"products",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Product",kind:"LinkedField",name:"node",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'products(type:"course")'}],type:"Organization",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatChannelEditMessageInputQuery",selections:[{alias:"organization",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o,i],storageKey:null}]},params:{cacheID:"3d16365e5271ebff8c009e56804cf4fe",id:null,metadata:{},name:"ChatChannelEditMessageInputQuery",operationKind:"query",text:'query ChatChannelEditMessageInputQuery(\n  $id: ID!\n) {\n  organization: node(id: $id) {\n    __typename\n    ... on Organization {\n      products(type: "course") {\n        edges {\n          node {\n            id\n            name\n            slug\n          }\n        }\n      }\n    }\n    id\n  }\n}\n'}};l.hash="1edd73f41a4b6e2eefe1ecc23b8d3aec",n.default=l},37313:function(e,n,t){var a=t(204942),r=t(241451),i=t(810863),o=t(92839),l=t(615656),s=t(541321),c=t(759693),d=t(667294),u=(t(423274),t(112239)),p=t(983156),g=t(785893);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var h=function(e){var n=e.emoji,t=e.variant,a=void 0===t?"options":t,i=e.size,o=void 0===i?"options"===a?20:14:i,c=e.reactionCount,m=void 0===c?0:c,h=e.reacted,y=void 0!==h&&h,v=e.reactions,b=void 0===v?[]:v,x=e.loadReactions,k=(0,u.fr)(),j=k.handleReaction,C=k.message,w=(0,p.mx)().client,O=f({size:o,reacted:y,variant:a,reactionCount:m}),S=":".concat("string"==typeof n?n:n.name,":");return(0,g.jsx)(s.t2,{content:b.length>0&&(0,g.jsxs)("div",{className:O.innerTooltip,children:[(0,g.jsx)("div",{className:O.emojiWrapper,children:(0,g.jsx)(l.Z,{emoji:n,size:40})}),(0,g.jsx)(s.U4,{variant:"body-sm",color:"common.white",children:"".concat(function(){var e=(0,r.Z)(b);if(y&&!e.some((function(e){var n,t;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(t=w.user)||void 0===t?void 0:t.id)})))e.push({user:w.user,type:"string"==typeof n?n:n.id,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),message_id:C.id});else if(!y){var t=e.findIndex((function(e){var n,t;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(t=w.user)||void 0===t?void 0:t.id)}));-1!==t&&e.splice(t,1)}for(var a="",i=0;i<e.length;i++){var o;if(null!==(o=e[i].user)&&void 0!==o&&o.name){var l;i>0&&(a+=i===e.length-1?" and ":", ");var s=e[i].user,c=s.name;s.id===(null===(l=w.user)||void 0===l?void 0:l.id)?a+=i>0?"you":"You":a+=c}}return a}()," reacted with ").concat(S)})]}),children:(0,g.jsx)("div",{className:O.buttonWrapper,onMouseOver:function(){x&&m!==b.length&&x()},children:(0,g.jsx)(s.v2,{onClick:function(e){j("string"==typeof n?n:n.id,e)},classes:{root:O.button,leftIcon:O.leftIcon},color:"transparent",leftIcon:(0,g.jsx)(d.Suspense,{fallback:null,children:(0,g.jsx)(l.Z,{emoji:n,size:o})}),children:m>0&&(0,g.jsx)(s.U4,{className:O.reactionCount,variant:"body-sm",children:m})})})})},f=(0,i.Z)((function(e){return{reactionCount:function(n){return{display:"inline-block",fontWeight:500,color:n.reacted?"light"===e.palette.type?(0,c.$n)(e.palette.primary.main,.2):e.palette.common.white:"currentColor"}},button:function(e){return{width:"options"===e.variant?"18px":"22px",height:(e.variant,"18px"),backgroundColor:"transparent",padding:0,minWidth:"auto"}},buttonWrapper:function(n){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",border:"2px solid ".concat(n.reacted?(0,c.$n)(e.palette.primary.main,.2):"transparent"),backgroundColor:n.reacted?"light"===e.palette.type?(0,c.$n)(e.palette.primary.main,.9):(0,c._j)(e.palette.primary.main,.6):e.palette.groovy.neutral[200],padding:e.spacing(.5,1),borderRadius:e.measure.borderRadius.xl,cursor:"pointer","&:hover":{backgroundColor:n.reacted?"light"===e.palette.type?(0,c.$n)(e.palette.primary.main,.7):(0,c._j)(e.palette.primary.main,.3):e.palette.groovy.neutral[100]}},(0,o.Z)("options"===n.variant,{padding:e.spacing(.75,.5),borderRadius:"50%",backgroundColor:n.reacted?(0,c.$n)(e.palette.primary.main,.2):e.palette.background.paper}))},leftIcon:function(n){return{height:"100%",marginRight:n.reactionCount?e.spacing(.5):0,display:"flex",alignItems:"center"}},innerTooltip:{margin:e.spacing(1,0),textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(.5)},emojiWrapper:{paddingTop:e.spacing(1.25),backgroundColor:e.palette.common.white,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:e.measure.borderRadius.default,height:"40px",width:"40px"}}}));n.Z=d.memo(h,(function(e,n){var t,a;return e.emoji===n.emoji&&e.variant===n.variant&&e.size===n.size&&e.reactionCount===n.reactionCount&&e.reacted===n.reacted&&(null===(t=e.reactions)||void 0===t?void 0:t.length)===(null===(a=n.reactions)||void 0===a?void 0:a.length)}))},615656:function(e,n,t){var a=t(810863),r=t(667294),i=t(785893);function o(e){var n=e.emoji,t=e.size,a=void 0===t?24:t,r=e.skin,o=l(),s="string"==typeof n?n:n.id,c=r||("string"==typeof n?void 0:n.skin);return(0,i.jsx)("div",{className:o.emoji,children:(0,i.jsx)("em-emoji",{id:s,skin:c,size:"".concat(a,"px")})})}var l=(0,a.Z)((function(){return{emoji:{display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:0,verticalAlign:"middle",height:"100%"}}}));n.Z=r.memo(o)},323600:function(e,n,t){var a=t(386854),r=t(501823),i=t(810863),o=(t(615656),t(541321)),l=t(162841),s=t(817812),c=t(352387),d=t(759693),u=t(294184),p=t.n(u),g=t(667294),m=t(785893),h=function(e){var n=e.onEmojiSelect,t=e.useNativeEmoji,i=void 0!==t&&t,d=e.classes,u=f(),h=(0,g.useState)(null),y=(0,a.Z)(h,2),v=y[0],b=y[1],x=Boolean(v),k=(0,g.useRef)(!1);return k.current=k.current||x,(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.t2,{content:"Add an Emoji",children:(0,m.jsx)(s.Z,{onClick:function(e){b(e.currentTarget)},className:p()(u.iconButton,d),size:"small",children:(0,m.jsx)(r.default,{width:20,height:20})})}),(0,m.jsx)(c.ZP,{open:x,onClose:j,anchorEl:v,getContentAnchorEl:null,keepMounted:Boolean(k.current),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{width:"350px"}},marginThreshold:16,classes:{paper:u.paper},children:(0,m.jsx)(g.Suspense,{fallback:(0,m.jsx)("div",{className:u.placeholder}),children:x?(0,m.jsx)(l.Z,{skinTonesDisabled:!0,onChange:function(e){var t;t=e,n(i?t.native:t.id),j()},onClose:j}):(0,m.jsx)("div",{className:u.placeholder})})})]});function j(){b(null)}},f=(0,i.Z)((function(e){return{paper:{maxWidth:"none",padding:0,"& .emoji-mart-scroll":{height:"360px"},"& .emoji-mart":{backgroundColor:e.palette.background.paper,borderColor:e.palette.divider},"& .emoji-mart-bar":{borderColor:e.palette.divider},"& .emoji-mart-category-label span":{backgroundColor:e.palette.background.paper,color:e.palette.text.secondary},"& .emoji-mart-anchor-selected":{"& .emoji-mart-anchor-bar":{backgroundColor:"".concat(e.palette.primary.main," !important")},"& .emoji-mart-anchor-icon svg":{fill:e.palette.primary.main}},"& .emoji-mart-search input":{backgroundColor:e.palette.background.paper,borderColor:e.palette.divider,color:e.palette.text.primary},"& .emoji-mart-search-icon svg":{fill:"".concat(e.palette.text.primary," !important")},"& .emoji-mart-category .emoji-mart-emoji:hover::before":{backgroundColor:"light"===e.palette.type?(0,d.$n)(e.palette.primary.light,.5):(0,d._j)(e.palette.primary.dark,.8)},"& .emoji-mart-skin-swatches":{backgroundColor:e.palette.background.paper},"& .emoji-mart-preview-data":{color:e.palette.text.secondary}},placeholder:{width:"350px",height:"420px"},iconButton:{width:"40px",height:"40px",borderRadius:"50%"}}}));n.Z=g.memo(h)},921927:function(e,n,t){t.r(n);var a=t(204942),r=t(963114),i=t(622556),o=t(810863),l=t(482016),s=t(541321),c=t(541749),d=t(284911),u=t(785893);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=(0,o.Z)({container:{height:"100%"}});n.default=function(e){var n=e.state,t=void 0===n?"page":n,a=m(),o=(0,d.Z)(),p=(0,r.NP)("organization_member"),h=(0,r.NP)("admin_experience"),f=(0,r.NP)("organization");return function(){switch(t){case"list":return(0,u.jsx)(s.U4,{variant:"body-sm",color:"groovy.neutral.400",marginTop:1,marginBottom:1,marginLeft:1.5,children:"No messages"});case"threads":return(0,u.jsx)(c.Z,{container:!0,alignContent:"center",justifyContent:"center",className:a.container,children:(0,u.jsx)(s.MJ,{testid:"ChatChannelEmpty",title:"No threads",subtitle:"Threads will populate this space when there's interaction with your messages or when you engage with others' messages.",icon:(0,u.jsx)(i.Z,{})})});case"thread":return(0,u.jsx)(s.MJ,{testid:"ChatChannelEmpty",icon:(0,u.jsx)(i.Z,{}),subtitle:"No replies yet.",variant:"compact"});case"dm":return(0,u.jsx)(c.Z,{container:!0,alignContent:"center",justifyContent:"center",className:a.container,children:(0,u.jsx)(s.MJ,{testid:"ChatChannelEmpty",title:"No messages yet",icon:(0,u.jsx)(i.Z,{}),subtitle:"Send a direct message to other ".concat(f.singularLowercase," ").concat(p.plural),buttons:(0,u.jsx)(l.Z,{children:function(e){return(0,u.jsx)(s.v2,g(g({},e),{},{leftIcon:"add",children:"New Message"}))}})})});case"channels":return(0,u.jsx)(c.Z,{container:!0,alignContent:"center",justifyContent:"center",className:a.container,children:(0,u.jsx)(s.MJ,{testid:"ChatChannelEmpty",icon:(0,u.jsx)(i.Z,{}),subtitle:o.has("chat.manage")?"Channels you create inside your ".concat(f.singularLowercase," and ").concat(h.plural," will show up here."):"You aren't a member of any channels yet."})});case"pinned":return(0,u.jsx)(c.Z,{container:!0,alignContent:"center",justifyContent:"center",className:a.container,children:(0,u.jsx)(s.MJ,{testid:"ChatChannelEmpty",icon:(0,u.jsx)(i.Z,{}),subtitle:"No pinned messages yet."})});default:return(0,u.jsx)(c.Z,{container:!0,alignContent:"center",justifyContent:"center",className:a.container,children:(0,u.jsx)(s.MJ,{testid:"ChatChannelEmpty",icon:(0,u.jsx)(i.Z,{}),subtitle:o.has("chat.manage")?"Help your ".concat(p.plural," get the conversation going by sharing something here."):"Sometimes, we just need someone courageous to initiate the conversation."})})}}()}},109484:function(e,n,t){t.d(n,{c:function(){return E},Z:function(){return L}});t(71218);var a,r=t(470609),i=t(669187),o=t(810863),l=t(204942),s=t(619871),c=t(10165),d=t(276979),u=(t(194350),t(92839)),p=t(971889),g=t(453119),m=(t(71914),t(447818)),h=t(193106),f=t(968059),y=t(804189),v=t(541321),b=t(269865),x=t(108920),k=t(558365),j=t(294184),C=t.n(j),w=t(422578),O=t(616550),S=(t(244311),t(423274),t(983156)),Z=t(785893),T=t(425108);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var _=(0,o.Z)((function(e){return{container:function(n){var t=n.isSelected;return{display:"flex",position:"relative",textAlign:"left",alignItems:"center",backgroundColor:t?e.palette.primary.main:e.palette.background.paper,borderRadius:e.measure.borderRadius.big,padding:e.spacing(1,1.5),margin:e.spacing(1.5,1.5,3),gap:e.spacing(1),"&:hover":{backgroundColor:t?e.palette.primary.main:e.palette.groovy.neutral[100]},"&::before":{content:"''",position:"absolute",width:"calc(100% + ".concat(e.spacing(3),"px)"),height:1,top:-12,left:e.spacing(-1.5),zIndex:e.zIndex.raise1,backgroundColor:e.palette.constants.divider}}},previewMessageText:function(n){var t=n.isUnread;return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({color:"dark"===e.palette.type?e.palette.groovy.onDark[200]:e.palette.groovy.neutral[500]},(0,u.Z)(t,{color:"dark"===e.palette.type?e.palette.groovy.onDark[100]:e.palette.groovy.neutral[700]}))},presence:function(n){var t=n.variant;return{position:"absolute",bottom:0,right:0,height:"page"===t?"12px":"8px",width:"page"===t?"12px":"8px",border:"2px solid ".concat(e.palette.common.white),borderRadius:e.measure.borderRadius.big,backgroundColor:e.palette.groovy.green[400],zIndex:e.zIndex.raise1}},relativeParent:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},nameAndMessageContainer:{display:"flex",flexDirection:"column",overflow:"hidden",flexGrow:1},date:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",gap:e.spacing(.5),"& > span":{whiteSpace:"nowrap",color:"dark"===e.palette.type?e.palette.groovy.onDark[200]:e.palette.groovy.neutral[400]}},selected:{"& *":{color:"".concat(e.palette.primary.contrastText," !important")}}}}));function P(e){var n=e.variant,t=_({variant:n,isUnread:!1});return"sidebar"===n?(0,Z.jsx)(v.YA,{}):(0,Z.jsxs)("div",{className:t.container,children:[(0,Z.jsx)(k.Z,{variant:"circle",width:"40px",height:"40px",style:{flexShrink:0}}),(0,Z.jsxs)("div",{style:{width:"100%"},children:[(0,Z.jsx)(v.Ju,{variant:"body-md-600",width:"50%"}),(0,Z.jsx)(v.Ju,{variant:"body-md-600",width:"100%"})]})]})}var M=function(e){var n=e.chatChannelKey,o=e.variant,u=e.testid,k=void 0===u?"DirectMessagesListItem":u,j=(0,w.useFragment)((void 0!==a||(a=t(71914)).hash&&"b211d319419987e25bc6929dbdab72a7"!==a.hash&&T.error("The definition of 'DirectMessagesListItemFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),n),I=(0,r.xo)(j.externalChannelId,!0),P=(0,m.Z)([j.externalChannelId]),M=P>0,F=(0,S.mx)().client,N=function(){if(!I)return!1;for(var e in I.state.members)if(e){var n,t=I.state.members[e],a=t.user_id,r=t.user;if(a!==(null===(n=F.user)||void 0===n?void 0:n.id)&&null!=r&&r.online)return!0}return!1}(),R=(0,O.TH)().pathname.endsWith(j.id),D=_({variant:o,isUnread:M,isSelected:R}),E=(0,x.Z)(),K=(0,O.k6)();if(0===j.chatChannelMembers.totalCount)return null;if(!I)return null;var L,A=I.lastMessage(),z=c.Z.connectionToArray(j.chatChannelMembers).map((function(e){return e.user})),U=z.map((function(e){return e.fullName})).join(", ");return"page"===o?(0,Z.jsxs)(b.Z,{className:C()(D.container,(0,l.Z)({},D.selected,R)),onClick:function(){K.push((0,O.Gn)(i.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL,{channelId:j.id}))},testid:"".concat(k,".page-").concat(U),children:[(0,Z.jsxs)("div",{className:D.relativeParent,children:[(0,Z.jsx)(g.Z,{users:z,channelId:j.id,countVariant:z.length>1?"placeholder":void 0,avatarSize:40}),N&&(0,Z.jsx)("div",{className:D.presence})]}),(0,Z.jsxs)("div",{className:D.nameAndMessageContainer,children:[(0,Z.jsx)(v.U4,{variant:"body-sm-500",children:U}),function(){var e,n,t,a;a=M?"body-sm-500":"body-sm";if(!I)return(0,Z.jsx)(v.Ju,{variant:a,width:"75%"});if(!A)return null;var r=A.user_id===(null==F||null===(e=F.user)||void 0===e?void 0:e.id)?"You":null===(n=A.user)||void 0===n?void 0:n.first_name,i=A.text||(null!==(t=A.attachments)&&void 0!==t&&t.length?"Sent attachment":"");return(0,Z.jsx)(v.U4,{truncateText:1,variant:a,className:D.previewMessageText,children:"".concat(r,": ").concat(i)})}()]}),(0,Z.jsxs)("div",{className:D.date,children:[(L=(0,h.$I)(null==A?void 0:A.created_at),L?(0,Z.jsx)(v.t2,{content:L.tooltip,children:(0,Z.jsx)(v.U4,{variant:"body-xs-500",color:"groovy.grey.500",children:L.display})}):null),(0,Z.jsx)(y.Z,{config:{channels:[I]}})]})]}):(0,Z.jsx)(s.Z,{to:(0,O.Gn)(i.ZP.COMMUNITY.DIRECT_MESSAGES.DETAIL,{channelId:j.id}),rightContent:M&&(0,Z.jsx)(f.Z,{count:P}),testid:"".concat(k,".sidebar-").concat(U),className:"fs-exclude",leftIcon:(0,Z.jsx)("div",{className:D.relativeParent,children:z.length>1?(0,Z.jsx)(p.ZP,{size:24,text:z.length,backgroundColor:"light"===E.palette.type?E.palette.groovy.neutral[300]:E.palette.groovy.onDark[700],color:E.palette.text.primary,isTestUser:!1}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(d.Z,{size:24,userKey:z[0]}),N&&(0,Z.jsx)("div",{className:D.presence})]})}),name:U,nameNode:(0,Z.jsx)(v.U4,{variant:M?"body-sm-700":"body-sm-500",truncateText:1,title:U,children:U})})},F=t(8296),N=t(696672),R=t(667294);function D(e){var n=e.variant,t=e.chatChannels,a=e.isLoading,o=e.hasMore,l=e.loadMore,s=K();return(0,r.ag)().isConnected?(0,Z.jsxs)("div",{className:s.list,children:[t.length?t.map((function(e){return(0,Z.jsx)(M,{chatChannelKey:e,variant:n},e.id)})):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(v.o$,{marginTop:0,marginBottom:2}),(0,Z.jsx)(v.U4,{variant:"body-sm",color:"groovy.neutral.400",align:"center",children:"No direct messages yet."})]}),o&&("sidebar"===n?(0,Z.jsx)(v.GY,{to:i.ZP.COMMUNITY.DIRECT_MESSAGES.ROOT,textVariant:"body-sm-600",className:s.viewAllLink,children:"View All Messages"}):(0,Z.jsx)(F.Z,{isLoading:a,onScrolledIntoView:l,skeleton:(0,Z.jsx)(Z.Fragment,{children:(0,N.w6)(4).map((function(e){return(0,Z.jsx)(P,{variant:n},e)}))})}))]}):null}function E(e){var n=e.variant,t=K();return"sidebar"===n?(0,Z.jsx)("div",{className:t.skeletonWrapper,children:(0,Z.jsx)(P,{variant:n})}):(0,Z.jsx)("div",{children:(0,N.w6)(8).map((function(e){return(0,Z.jsx)(P,{variant:n},e)}))})}var K=(0,o.Z)((function(e){return{list:{width:"100%",height:"100%"},viewAllLink:{width:"100%"},skeletonWrapper:{padding:e.spacing(.5,0)}}})),L=R.memo(D)},71914:function(e,n,t){t.r(n);t(244311);var a,r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DirectMessagesListItemFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"kind",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"externalChannelId",storageKey:null},{alias:null,args:null,concreteType:"ProductApp",kind:"LinkedField",name:"app",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"customAppTitle",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"excludeViewer",value:!0}],concreteType:"ChatChannelMemberNodeConnection",kind:"LinkedField",name:"chatChannelMembers",plural:!1,selections:[{alias:null,args:null,concreteType:"ChatChannelMemberNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ChatChannelMember",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastName",storageKey:null},{args:null,kind:"FragmentSpread",name:"ProfileAvatarFragment"},{args:null,kind:"FragmentSpread",name:"ProfileListModalListItemFragment"}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"chatChannelMembers(excludeViewer:true)"}],type:"ChatChannel",abstractKey:null};r.hash="b211d319419987e25bc6929dbdab72a7",n.default=r},816189:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannelMessageActionsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePermissionsFragment"}],type:"ChatChannel",abstractKey:null,hash:"a4090d1fdd9145d114e749686afef5dd"};n.default=a},666086:function(e,n,t){t.d(n,{c:function(){return Q}});var a,r=t(241451),i=t(204942),o=t(115861),l=t(386854),s=t(887757),c=t.n(s),d=t(446683),u=t(655979),p=t(285245),g=t(628613),m=t(810863),h=(t(681355),t(10165)),f=t(837025),y=(t(906601),t(457932)),v=t(580944),b=t(292945),x=t(98301),k=t(889570),j=(t(793933),t(278349)),C=t(363748),w=t(511626),O=t(193106),S=t(541321),Z=t(611797),T=t(128032),I=t(724104),_=t(294184),P=t.n(_),M=t(667294),F=t(641404),N=t(422578),R=t(387029),D=t(321707),E=t(540239),K=t(215487),L=t(584622),A=t(785893),z=t(425108);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var V=(0,m.Z)((function(e){return{container:{backgroundColor:e.palette.background.paper,position:"relative",padding:e.spacing(1)},root:{margin:"0 auto",padding:e.spacing(1,1.5),border:"1px solid ".concat(e.palette.divider),borderRadius:"0 0 ".concat(e.measure.borderRadius.big,"px ").concat(e.measure.borderRadius.big,"px"),"& .rfu-dropzone":{"& .rfu-dropzone__notifier":{display:"none"},"&.rfu-dropzone--accept .rfu-dropzone__notifier":{display:"flex",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.95)",zIndex:e.zIndex.raise3,alignItems:"center",justifyContent:"center",border:"2px dashed ".concat(e.palette.primary.main),borderRadius:e.measure.borderRadius.medium,"& .rfu-dropzone__inner":{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(2),"& svg":{color:e.palette.primary.main},"& p":B({color:e.palette.text.primary,margin:0},e.typography["body-md"])}}},"& .rfu-image-upload-container":{opacity:0,position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.05)",transition:"opacity 0.2s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none","&.rfu-dropzone-active":{opacity:1,pointerEvents:"auto"}},"& .str-chat__input-flat":{padding:e.spacing(1,2.5),backgroundColor:e.palette.background.paper,display:"list-item",listStyleType:"none","&.direct-message":{"& .str-chat__textarea > textarea":{padding:e.spacing(1),backgroundColor:"".concat(e.palette.groovy.neutral[100]," !important")},"& .str-chat__textarea textarea":{width:"100%"}}},"& .str-chat__input-flat-wrapper":{display:"block",width:"100%"},"& .str-chat__input-flat--textarea-wrapper":{gap:e.spacing(2),display:"flex",flexDirection:"column",width:"100%"},"& .str-chat__textarea":{display:"flex",alignItems:"center",width:"100%","& > textarea":B(B({minHeight:"unset",height:"auto",width:"100%",border:"none !important",boxShadow:"none !important",outline:"none !important",background:"transparent !important",padding:e.spacing(1),borderRadius:e.measure.borderRadius.medium,color:"".concat(e.palette.text.primary," !important")},e.typography["body-sm"]),{},{"&:focus":B({border:"none !important",boxShadow:"none !important",background:"transparent !important"},e.typography["body-sm"]),"&::placeholder":B(B({},e.typography["body-md"]),{},{color:"dark"===e.palette.type?e.palette.groovy.neutral[600]:e.palette.groovy.grey[400],whiteSpace:"nowrap",overflow:"hidden",maxHeight:"40px"})})}},input:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",width:"100%"},inputMessage:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"space-between",borderRadius:e.measure.borderRadius.medium},actionsContainer:{display:"flex",justifyItems:"center",justifyContent:"space-between",width:"100%"},dividerContainer:{width:"100%",display:"flex",justifyContent:"center"},skeletonInput:{display:"flex",flexDirection:"column",gap:e.spacing(1.5),padding:e.spacing(4,2.5,1),alignItems:"flex-end"}}}));function Q(){var e=V();return(0,A.jsxs)("div",{className:e.container,children:[(0,A.jsx)("div",{className:e.dividerContainer,children:(0,A.jsx)(S.o$,{thickness:1,marginTop:0,marginBottom:0})}),(0,A.jsxs)("div",{className:e.skeletonInput,children:[(0,A.jsx)(S.sS,{height:57,style:{width:"100%"}}),(0,A.jsx)(S.Zi,{width:"100px"})]})]})}n.Z=function(e){var n=e.chatChannelId,i=e.forThread,s=void 0!==i&&i,m=e.isDirectMessage,_=void 0!==m&&m,U=(0,R.JN)(),Q=U.acceptedFiles,q=U.multipleUploads,W=U.quotedMessage,Y=(0,j.l)(),G=Y.mentionedGroups,H=Y.setMentionedGroups,$=Y.containsMentionedGroups,X=(0,T.t)(),J=(0,l.Z)(X,2),ee=J[0],ne=ee.aiGid,te=ee.aiTemplate,ae=ee.aiPrompt,re=ee.aiReferenceUrls,ie=ee.aiSearchWeb,oe=ee.aiCommunityContext,le=ee.aiReferenceEmbeddingSourceIds,se=J[1],ce=(0,p.vn)(),de=(0,M.useState)(!1),ue=(0,l.Z)(de,2),pe=ue[0],ge=ue[1],me=(0,M.useState)(!1),he=(0,l.Z)(me,2),fe=he[0],ye=he[1],ve=(0,I.Z)(),be=ve.isOpen,xe=ve.onOpen,ke=ve.onClose,je=(0,f.Z)(),Ce=(0,D.Nc)(),we=Ce.cooldownRemaining,Oe=Ce.isUploadEnabled,Se=Ce.maxFilesLeft,Ze=Ce.uploadNewFiles,Te=Ce.parent,Ie=Ce.attachments,_e=Ce.onPaste,Pe=Ce.setText,Me=Ce.text,Fe=Ce.handleSubmit,Ne=Ce.handleChange;(0,d.LZ)({threadId:null==Te?void 0:Te.id,disabled:!s});var Re=(0,N.useLazyLoadQuery)((void 0!==a||(a=t(793933)).hash&&"7a1e73d6391f4fd67886dd706ed28adb"!==a.hash&&z.error("The definition of 'ChatChannelMessageInputQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{id:ce.id},{fetchPolicy:"store-and-network",fetchKey:"chat-channel-message-input"}).node,De=h.Z.narrowNodeType(Re,"Organization");(0,M.useEffect)((function(){n!==ne||s||(Me?ge(!0):Be())}),[ne,n]);var Ee=V(),Ke=(0,E.yM)().SendButton,Le=void 0===Ke?K.c:Ke;return De?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:Ee.container,children:[(0,A.jsx)(x.b,{}),(0,A.jsx)("div",{className:P()(Ee.root,"str-chat__input-flat",{"direct-message":_,"str-chat__input-flat--send-button-active":Le,"str-chat__input-flat-quoted":W}),"data-testid":"ChatChannelMessageInput.container",children:(0,A.jsxs)(F.vR,{accept:Q,disabled:!Oe||0===Se||!!we,handleFiles:Ze,maxNumberOfFiles:Se,multiple:q,children:[W&&!s&&(0,A.jsx)(y.Z,{quotedMessage:W}),(0,A.jsx)("div",{className:"str-chat__input-flat-wrapper",children:(0,A.jsxs)("div",{className:"str-chat__input-flat--textarea-wrapper",children:[(0,A.jsx)("div",{className:Ee.input,children:(0,A.jsx)("div",{className:Ee.inputMessage,children:(0,A.jsx)(k.Z,{onPaste:function(e){_e(e);var n=e.clipboardData.getData("Text"),t=h.Z.connectionToArray(null==De?void 0:De.products),a=(0,O.j6)(n,ce,t);if(a&&a.length>0){var i=a.map((function(e){return B(B({},e),{},{localMetadata:{id:(0,L.Z)()}})}));Ie.push.apply(Ie,(0,r.Z)(i))}},placeholder:"Start typing your message here...",rows:1,maxRows:w.EI,grow:!0,value:Me,handleSubmit:Ae,onChange:function(e){G.length&&($(e.target.value)||H([]));Ne(e)}})})}),Oe&&(0,A.jsx)(C.f,{setPreviewLinksToHide:e.setPreviewLinksToHide}),(0,A.jsxs)("div",{className:Ee.actionsContainer,children:[(0,A.jsx)(b.o,{chatChannelId:n,isGeneratingAiMessage:fe}),5e3===Me.length&&(0,A.jsx)(S.U4,{variant:"body-sm-600",color:"error.main",marginLeft:1.5,children:"Max message limit reached: 5000 characters"}),(0,A.jsx)("div",{children:!we&&(0,A.jsx)(v.Z,{sendMessage:Ae})})]})]})})]})})]}),(0,A.jsx)(Z.Z,{testid:"ChatCHannelMessageInput.discard-input-warning-modal",isOpen:pe,modalContentLabel:"Replace draft with new message",title:"Looks like there's a draft in progress!",description:"Do you want keep your existing draft or discard it and replace it with a new message?",confirmationButtonProps:{onClick:function(){Be(),Ue()},children:"Replace message"},cancelButtonText:"Keep draft",onCancel:function(){Qe(),Ue()},onClose:Ue}),(0,A.jsx)(Z.Z,{variant:"warning",testid:"ChatChannelMessageInput.channels-mention-warning-modal",isOpen:be,modalContentLabel:"Channels mention modal",title:"Heads up!",description:"Are you sure you want to notify everyone in this channel? This will send a notification to all members. Use @channel for important updates only.",confirmationButtonProps:{onClick:ze,children:"Yes, notify everyone"},onCancel:ke,onClose:ke})]}):null;function Ae(e){G.length?xe():ze(e)}function ze(e){ke(),Fe(e)}function Ue(){ge(!1)}function Be(){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,o.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ye(!0),n={referenceUrls:re?JSON.parse(re):[],searchWeb:"1"===ie,communityContext:"1"===oe,referenceEmbeddingSourceIds:le?JSON.parse(le):[]},e.next=7,g.Z.createStream({startStreamCb:function(){var e=ae?decodeURIComponent(ae):void 0;return e?u.Z.generateMessage(B(B({},n),{},{channelId:ne,prompt:e})):u.Z.generateMessage({channelId:ne,template:null!=te?te:"default"})},handleText:function(e){return Pe(e),!0},onStreamEnd:function(e){e.botResponseId&&(je({kind:"message_suggestion_drafted",entityId:e.botResponseId}),se({aiBrId:e.botResponseId}))}});case 7:Qe(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),z.error("Error generating AI message:",e.t0);case 13:return e.prev=13,ye(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})))).apply(this,arguments)}function Qe(){se({aiGid:void 0,aiTemplate:void 0,aiPrompt:void 0,aiReferenceUrls:void 0,aiSearchWeb:void 0,aiReferenceEmbeddingSourceIds:void 0},"replace")}}},292945:function(e,n,t){t.d(n,{o:function(){return F}});var a=t(810863),r=t(323600),i=t(241451),o=t(386854),l=t(908436),s=t(490911),c=t(430684),d=t(541321),u=t(128032),p=t(108920),g=t(667294),m=(t(906601),t(785893)),h=t(425108);var f=(0,a.Z)({aiButton:{borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"}}}),y=function(e){var n=e.chatChannelId,t=e.isGeneratingAiMessage,a=f(),r=(0,g.useState)(!1),y=(0,o.Z)(r,2),v=y[0],b=y[1],x=(0,p.Z)(),k="dark"===x.palette.type?x.palette.groovy.grey[100]:x.palette.groovy.grey[500],j=(0,l.X)().form,C=(0,u.t)(),w=(0,o.Z)(C,2),O=(w[0],w[1]);return t?(0,m.jsx)("div",{className:a.aiButton,children:(0,m.jsx)(d.Zy,{size:"sm"})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.t2,{content:"Write with AI",children:(0,m.jsx)(d.I4,{onClick:function(){b(!0)},className:a.aiButton,width:"20px",height:"20px",color:k,children:(0,m.jsx)(d.De,{icon:"iconsax.custom-stars"})})}),(0,m.jsx)(s.Z,{testid:"GenerateChatMessageWithAI",modalContentLabel:"Generate AI chat message",isOpen:v,onClose:S,title:"Describe your message",form:j,onSubmit:function(){var e=j.state,t=e.prompt,a=e.referenceUrls,r=e.searchWeb,o=e.assetEmbeddingSourceIds,l=e.contentEmbeddingSourceIds,s=e.trainingDataEmbeddingSourceIds,c=e.communityContext;if(!n||!t)return void h.error("Prompt is empty or channelId is missing!");var d=[].concat((0,i.Z)(o||[]),(0,i.Z)(l||[]),(0,i.Z)(s||[]));O({aiGid:n,aiPrompt:t,aiReferenceUrls:a&&a.length>0?JSON.stringify(a):void 0,aiSearchWeb:r?"1":"0",aiCommunityContext:c?"1":"0",aiReferenceEmbeddingSourceIds:d.length>0?JSON.stringify(d):void 0,aiTemplate:void 0}),S()},placeholder:c.QY})]});function S(){j.reset(),b(!1)}},v=(t(686394),t(890072)),b=t(445033),x=t(162083),k=t(817812),j=t(188191),C=t(294184),w=t.n(C),O=(t(423274),t(321707)),S=t(584622),Z=function(e){var n=e.setText,t=e.attachments,a=e.text,r=e.classes,i="MessageActions",l=(0,g.useState)(!1),s=(0,o.Z)(l,2),c=s[0],u=s[1],p=(0,g.useRef)(null),h=(0,g.useState)("product"),f=(0,o.Z)(h,2),y=f[0],C=f[1],Z=T(),I=(0,j.Z)().surveys,_=(0,O.Nc)(),P=[(0,m.jsx)(x.Z,{title:"Attach an Event",icon:(0,m.jsx)(d.De,{icon:"calendar"}),testid:"".concat(i,".AttachEvent"),onClick:function(){return M("occurrence")}},"".concat(i,".AttachEvent")),(0,m.jsx)(x.Z,{title:"Attach Content",icon:(0,m.jsx)(d.De,{icon:"book-open"}),testid:"".concat(i,".AttachContent"),onClick:function(){return M("contentUsage")}},"".concat(i,".AttachContent")),(0,m.jsx)(x.Z,{title:"Attach a Product",icon:(0,m.jsx)(d.De,{icon:"3d-box"}),testid:"".concat(i,".AttachProduct"),onClick:function(){return M("product")}},"".concat(i,".AttachProduct"))];return I&&P.push((0,m.jsx)(x.Z,{title:"Attach a Survey",icon:(0,m.jsx)(d.De,{icon:"file-check"}),testid:"".concat(i,".AttachSurvey"),onClick:function(){return M("survey")}},"".concat(i,".AttachSurvey"))),(0,m.jsxs)("div",{ref:p,className:Z.container,children:[(0,m.jsx)(d.ZX,{vertical:0,menuButton:(0,g.useCallback)((function(e){var n=e.onClick,t=(0,m.jsx)(k.Z,{onClick:function(e){n(e),e.preventDefault(),e.stopPropagation()},className:w()(Z.iconButton,r),size:"small",children:(0,m.jsx)(d.De,{width:20,height:20,icon:"add-circle"})});return(0,m.jsx)(d.t2,{content:"Attach",children:(0,m.jsx)("div",{children:t})})}),[Z.iconButton,r]),children:P}),(0,m.jsx)(g.Suspense,{fallback:null,children:(0,m.jsx)(v.Z,{isOpen:c,onClose:function(){u(!1)},anchorElem:p.current,attachBlockEntity:y,getAttachBlockEntityId:function(e,r){null==t||t.push({text:r,type:e,localMetadata:{id:(0,S.Z)()}});var i=a;n("".concat(i," ")),setTimeout((function(){return n(i)}),20)},inline:!1})})]});function M(e){_.attachments.length<10?(C(e),u(!0)):(0,b.XT)({message:"You can only upload 10 attachments at a time.",testid:"overflow-attachments-toast"})}},T=(0,a.Z)((function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center"},iconButton:{width:"40px",height:"40px",borderRadius:"50%",color:e.palette.groovy.grey[300]}}})),I=g.memo(Z),_=t(251941),P=t(641404),M=t(387029);function F(e){var n=e.chatChannelId,t=e.isGeneratingAiMessage,a=e.isEditing,i=void 0!==a&&a,o=N(),l=(0,p.Z)(),s=(0,O.Nc)(),c=s.setText,u=s.attachments,g=s.text,h=s.isUploadEnabled,f=s.cooldownRemaining,v=s.insertText,x=s.uploadNewFiles,k=(0,M.JN)(),j=k.acceptedFiles,C=k.multipleUploads,w=(0,_.d)();return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:o.inputActions,children:[(0,m.jsx)(I,{setText:c,attachments:u,text:g,classes:o.iconButton}),h&&!f&&(0,m.jsx)(d.t2,{content:"Attach Files",children:(0,m.jsx)("div",{"data-testid":"fileinput",className:o.iconButton,children:(0,m.jsx)(P.KH,{accepts:j,handleFiles:S,multiple:C,children:(0,m.jsx)(d.De,{icon:"iconsax.direct-send",color:l.palette.groovy.neutral[700]})})})}),!w&&(0,m.jsx)(r.Z,{classes:o.iconButton,onEmojiSelect:v,useNativeEmoji:!0}),(0,m.jsx)("div",{className:o.divider}),h&&!f&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.t2,{content:"Attach Images",children:(0,m.jsx)("div",{"data-testid":"fileinput",className:o.iconButton,children:(0,m.jsx)(P.KH,{accepts:["image/png","image/jpeg","image/gif"],handleFiles:S,multiple:C,children:(0,m.jsx)(d.De,{icon:"image"})})})}),(0,m.jsx)(d.t2,{content:"Attach Videos",children:(0,m.jsx)("div",{"data-testid":"fileinput",className:o.iconButton,children:(0,m.jsx)(P.KH,{accepts:["video/mp4","video/mov","video/quicktime"],handleFiles:S,multiple:C,children:(0,m.jsx)(d.De,{icon:"video"})})})}),n&&!i&&(0,m.jsx)(y,{chatChannelId:n,isGeneratingAiMessage:t})]})]})});function S(e){u.length+e.length<=10?x(e):(0,b.XT)({message:"You can only upload 10 attachments at a time.",testid:"overflow-attachments-toast"})}}var N=(0,a.Z)((function(e){return{iconButton:{"& svg":{color:"dark"===e.palette.type?e.palette.groovy.grey[100]:e.palette.groovy.grey[500]},"&:hover":{backgroundColor:"transparent"}},inputActions:{display:"flex",alignItems:"center",justifyItems:"center",alignSelf:"flex-end",zIndex:e.zIndex.raise2,flexShrink:0,gap:e.spacing(.5),"& [data-testid='fileinput']":{"& .rfu-file-upload-button":{"& label":{margin:0,padding:0,cursor:"pointer","& input":{display:"none"},"& svg":{fill:"transparent",color:"dark"===e.palette.type?e.palette.groovy.grey[100]:e.palette.groovy.grey[500],opacity:1,width:"20px",height:"20px"}}}},"& label":{height:"40px",width:"40px",borderRadius:"50%",padding:"3px",display:"flex",justifyContent:"center",alignItems:"center","& span":{display:"none"}}},divider:{height:"30px",borderLeft:"1.5px solid ".concat(e.palette.divider)}}}))},98301:function(e,n,t){t.d(n,{b:function(){return y}});var a=t(386854),r=t(449776),i=t(644734),o=t(922769),l=t(607842),s=t(820146),c=t(439896),d=t(108920),u=t(810863),p=t(278349),g=t(541321),m=t(667294),h=t(321707),f=t(785893);function y(){var e=v(),n=(0,d.Z)(),t=(0,p.l)(),u=t.mentionedGroups,y=t.setMentionedGroups,b=t.containsMentionedGroups,x=(0,h.Nc)(),k=x.text,j=x.setText,C=x.textareaRef,w=(0,m.useState)(!1),O=(0,a.Z)(w,2),S=O[0],Z=O[1],T=(0,m.useState)(""),I=(0,a.Z)(T,2),_=I[0],P=I[1],M=(0,m.useState)(""),F=(0,a.Z)(M,2),N=F[0],R=F[1],D=(0,m.useCallback)((function(e){var n=C.current;setTimeout((function(){n&&(n.focus(),n.selectionStart=e,n.selectionEnd=e)}),0)}),[C]),E=(0,m.useCallback)((function(e){u.length&&(b(e)||y([])),j(e)}),[j,y,u.length,b]),K=(0,m.useCallback)((function(e){var n,t,a,r,i=null!==(n=null===(t=C.current)||void 0===t?void 0:t.selectionStart)&&void 0!==n?n:0,o=null!==(a=null===(r=C.current)||void 0===r?void 0:r.selectionEnd)&&void 0!==a?a:0,l=k.substring(i,o),s=k.substring(0,i),c=k.substring(o),d=l.split("\n");if("bold"===e&&i!==o){var u="".concat(s,"**").concat(l,"**").concat(c);return E(u),void D(o+4)}if("strikethrough"===e&&i!==o){var p="".concat(s,"~~").concat(l,"~~").concat(c);return E(p),void D(o+4)}if("italic"===e&&i!==o){var g="".concat(s,"*").concat(l,"*").concat(c);return E(g),void D(o+2)}if("bulletPoint"===e&&i!==o){var m=d.map((function(e){return e.trim()?"- ".concat(e):e})).join("\n"),h="".concat(s).concat(m).concat(c),f=s.length+m.length;return E(h),void D(f)}if("numberedList"===e&&i!==o){var y=d.map((function(e,n){return e.trim()?"".concat(n+1,". ").concat(e):e})).join("\n"),v="".concat(s).concat(y).concat(c),b=s.length+y.length;return E(v),void D(b)}if("bold"===e){var x="".concat(k.substring(0,i),"****").concat(k.substring(o));E(x),D(i+2)}if("italic"===e){var j="".concat(k.substring(0,i),"**").concat(k.substring(o));E(j),D(i+1)}if("strikethrough"===e){var w="".concat(k.substring(0,i),"~~~~").concat(k.substring(o));E(w),D(i+2)}if("bulletPoint"===e){var O="- ";0!==i&&"\n"!==k[i-1]&&(O="\n- ");var S="".concat(s).concat(O).concat(c),Z=s.length+O.length;E(S),D(Z)}if("numberedList"===e){var T="1. ";0!==i&&"\n"!==k[i-1]&&(T="\n1. ");var I="".concat(s).concat(T).concat(c),M=s.length+T.length;E(I),D(M)}if("link"===e){var F=N.includes("https://")||N.includes("http://")?N:"http://".concat(N),K="[".concat(_,"](").concat(F,")");E("".concat(s).concat(K).concat(c));var L=s.length+F.length+_.length+4;D(L),P(""),R("")}}),[C,_,N,D,E,k]),L=(0,m.useCallback)((function(){var e,n,t,r,i=null!==(e=null===(n=C.current)||void 0===n?void 0:n.selectionStart)&&void 0!==e?e:0,o=null!==(t=null===(r=C.current)||void 0===r?void 0:r.selectionEnd)&&void 0!==t?t:0,l=k.substring(i,o),s=function(e){var n=/\[([^\]]+)\]\(([^)]+)\)/,t=e.match(n);if(t)return[t[1],t[2]];return[null,null]}(l),c=(0,a.Z)(s,2),d=c[0],u=c[1];d&&u?(P(d),R(u)):P(l)}),[C,k]);return(0,m.useEffect)((function(){var e=function(e){if(document.activeElement===C.current){var n=e.metaKey||e.ctrlKey;"b"===e.key&&n&&(e.preventDefault(),K("bold")),"i"===e.key&&n&&(e.preventDefault(),K("italic")),"s"===e.key&&n&&(e.preventDefault(),K("strikethrough")),e.shiftKey&&"u"===e.key&&n&&(e.preventDefault(),Z(!0),L())}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[K,L,C]),(0,f.jsxs)("div",{className:e.markdownMenu,children:[(0,f.jsx)(g.I4,{onClick:function(){return K("bold")},height:40,width:40,svgStyles:{height:20,width:20},color:n.palette.groovy.neutral[700],children:(0,f.jsx)(o.default,{})}),(0,f.jsx)(g.I4,{onClick:function(){return K("italic")},height:40,width:40,svgStyles:{height:20,width:20},color:n.palette.groovy.neutral[700],children:(0,f.jsx)(l.default,{})}),(0,f.jsx)(g.I4,{onClick:function(){return K("strikethrough")},height:40,width:40,svgStyles:{height:20,width:20},color:n.palette.groovy.neutral[700],children:(0,f.jsx)(c.default,{})}),(0,f.jsx)(g.I4,{onClick:function(){Z(!0),L()},height:40,width:40,svgStyles:{height:20,width:20},color:n.palette.groovy.neutral[700],children:(0,f.jsx)(s.default,{})}),(0,f.jsx)("div",{className:e.divider}),(0,f.jsx)(g.I4,{onClick:function(){return K("bulletPoint")},height:40,width:40,svgStyles:{height:20,width:20},color:n.palette.groovy.neutral[700],children:(0,f.jsx)(r.default,{})}),(0,f.jsx)(g.I4,{onClick:function(){return K("numberedList")},height:40,width:40,svgStyles:{height:20,width:20},color:n.palette.groovy.neutral[700],children:(0,f.jsx)(i.default,{})}),S&&(0,f.jsx)(g.SH,{isOpen:!0,onClose:function(){return Z(!1)},testid:"linkModal",modalContentLabel:"linkModal",title:"Add link",body:(0,f.jsxs)("div",{className:e.linkModalBody,children:[(0,f.jsx)(g.U4,{variant:"body-md",children:"Text"}),(0,f.jsx)(g.z6,{value:_,onChange:function(e){return P(e.target.value)},placeholder:"Check this out!"}),(0,f.jsx)(g.U4,{variant:"body-md",children:"Link"}),(0,f.jsx)(g.z6,{value:N,onChange:function(e){return R(e.target.value)},placeholder:"Paste link here"}),(0,f.jsxs)("div",{className:e.linkModalButtons,children:[(0,f.jsx)(g.v2,{color:"grey",onClick:function(){return Z(!1)},children:"Cancel"}),(0,f.jsx)(g.v2,{disabled:!_.trim()||!N.trim(),onClick:function(){K("link"),Z(!1)},children:"Save"})]})]})})]})}var v=(0,u.Z)((function(e){return{markdownMenu:{margin:"0 auto",display:"flex",alignItems:"center",gap:e.spacing(.5),backgroundColor:e.palette.groovy.neutral[100],padding:e.spacing(.5,1),borderTop:"1px solid ".concat(e.palette.divider),borderLeft:"1px solid ".concat(e.palette.divider),borderRight:"1px solid ".concat(e.palette.divider),borderRadius:"".concat(e.measure.borderRadius.big,"px ").concat(e.measure.borderRadius.big,"px 0 0")},linkModalBody:{display:"flex",flexDirection:"column",gap:e.spacing(1)},linkModalButtons:{display:"flex",flexDirection:"row",gap:e.spacing(1),justifyContent:"flex-end"},divider:{height:"30px",borderLeft:"1.5px solid ".concat(e.palette.divider)}}}))},889570:function(e,n,t){var a=t(204942),r=t(859223),i=t(294184),o=t.n(i),l=t(206431),s=t(667294),c=t(540239),d=t(321707),u=t(610602),p=t(944498),g=t(785893);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e){var n=(0,c.yM)(),t=n.AutocompleteSuggestionItem,a=n.AutocompleteSuggestionList,i=e.handleSubmit,l=e.onChange,m=e.onPaste,f=e.value,y=e.maxRows,v=e.placeholder,b=e.rows,x=e.onFocus,k=e.grow,j=e.customClassName,C=(0,d.Nc)(),w=C.cooldownRemaining,O=C.disabled,S=C.textareaRef,Z=(0,s.useCallback)((function(e){S&&(S.current=e)}),[S]);var T=(null==f?void 0:f.slice(void 0,5e3))||C.text.slice(void 0,5e3);return(0,g.jsx)(u.K,{additionalTextareaProps:h(h({},C.additionalTextareaProps),{},{maxLength:5e3,style:{resize:"none"}}),className:o()("str-chat__textarea__textarea",j),closeCommandsList:C.closeCommandsList,containerClassName:"str-chat__textarea",disabled:O||!!w,disableMentions:C.disableMentions,dropdownClassName:"str-chat__emojisearch",grow:k||C.grow,handleSubmit:i||C.handleSubmit,innerRef:Z,itemClassName:"str-chat__emojisearch__item",shouldSubmit:C.shouldSubmit,listClassName:"str-chat__emojisearch__list",loadingComponent:p.T,maxRows:y||C.maxRows,minChar:0,onChange:l||C.handleChange,onFocus:x,onPaste:m||C.onPaste,placeholder:w?"Slow Mode ON":v,rows:b||1,showCommandsList:C.showCommandsList,SuggestionItem:t,SuggestionList:a,trigger:C.autocompleteTriggers||{},value:T,replaceWord:function(e){var n=r,t=Object.values(n.emojis).find((function(n){var t;return null===(t=n.emoticons)||void 0===t?void 0:t.includes(e)}));if(t)return t.skins[0].native;if(e.startsWith(":")&&e.endsWith(":")){var a=e.slice(1,-1),i=n.emojis[a];if(i)return i.skins[0].native}return null},minRows:b||1})}(0,l.S1)({data:r}),n.Z=s.memo(f)},793933:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"ChatChannelMessageInputQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:[{kind:"Literal",name:"type",value:"course"}],concreteType:"ProductNodeConnection",kind:"LinkedField",name:"products",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Product",kind:"LinkedField",name:"node",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'products(type:"course")'}],type:"Organization",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatChannelMessageInputQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,o,{kind:"InlineFragment",selections:[l],type:"Organization",abstractKey:null}],storageKey:null}]},params:{cacheID:"b9bda2b5e445b86279ca03810ddad0b8",id:null,metadata:{},name:"ChatChannelMessageInputQuery",operationKind:"query",text:'query ChatChannelMessageInputQuery(\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ... on Organization {\n      __typename\n      products(type: "course") {\n        edges {\n          node {\n            id\n            name\n            slug\n          }\n        }\n      }\n    }\n    id\n  }\n}\n'}};s.hash="7a1e73d6391f4fd67886dd706ed28adb",n.default=s},137102:function(e,n,t){t.d(n,{Z:function(){return I}});var a,r,i=t(33162),o=t(437910),l=t(810863),s=t(37313),c=t(323600),d=(t(816189),t(162083)),u=t(422923),p=t(108920),g=t(571596),m=t(667294),h=t(422578),f=(t(244311),t(983156)),y=t(112239),v=t(437495),b=t(52127),x=t(785893),k=t(425108),j=function(e){var n,r,i=e.chatChannelKey,o=(0,f.mx)(),l=o.mutes,s=o.client,c=(0,y.fr)(),j=c.customMessageActions,C=c.getMessageActions,w=c.handleMute,O=c.handleEdit,S=c.message,Z=(0,v.uz)().setQuotedMessage,T=C(),I=(0,m.useCallback)((function(){return(0,b.B9)(S,l)}),[S,l]),_=(0,h.useFragment)((void 0!==a||(a=t(816189)).hash&&"a4090d1fdd9145d114e749686afef5dd"!==a.hash&&k.error("The definition of 'ChatChannelMessageActionsFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),i),P=(0,p.Z)(),M=(0,g.Z)(_);var F=(null===(n=S.user)||void 0===n?void 0:n.id)===(null===(r=s.user)||void 0===r?void 0:r.id);return T.length||j?(0,x.jsxs)(u.Z,{testid:"ChatChannelMessageActions.more-actions",top:P.spacing(3.5),rotateIcon:!0,children:[T.includes(b.Xh.quote)&&!S.parent_id&&!S.quoted_message&&(0,x.jsx)(d.Z,{title:"Quote reply",onClick:function(){Z(S);var e=document.getElementsByClassName("str-chat__textarea__textarea").item(0);e instanceof HTMLTextAreaElement&&e.focus()},testid:"message-quote-button"}),T.includes(b.Xh.mute)&&M.has("chat.manage")&&(0,x.jsx)(d.Z,{onClick:w,title:I()?"Unmute":"Mute"}),T.includes(b.Xh.edit)&&F&&(0,x.jsx)(d.Z,{onClick:O,title:"Edit"}),T.includes(b.Xh.delete)&&(F||M.has("chat.manage"))&&(0,x.jsx)(d.Z,{onClick:function(){s.deleteMessage(S.id,!S.reply_count)},title:"Delete"})]}):null},C=(t(313217),t(511626)),w=t(541321),O=t(294184),S=t.n(O),Z=t(425108);var T=(0,l.Z)((function(e){return{iconButton:{"& svg":{color:"dark"===e.palette.type?"".concat(e.palette.groovy.grey[100]," !important"):"".concat(e.palette.groovy.grey[400]," !important")},"&:hover":{backgroundColor:"transparent"}},optionsContainer:function(n){var t=n.threadHeader;return{backgroundColor:e.palette.background.paper,boxShadow:e.palette.groovyDepths.boxShadow,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:e.measure.borderRadius.medium,position:"absolute",top:t?"15px":"-5px",right:t?"16px":"10px",zIndex:2,padding:e.spacing(1,.5),height:"40px"}}}})),I=function(e){var n=e.className,a=e.chatChannelKey,l=(0,y.fr)(),d=l.customMessageActions,u=l.getMessageActions,p=l.handleOpenThread,f=l.initialMessage,v=l.handleReaction,k=l.message,O=l.threadList,I=l.handlePin,_=(0,h.useFragment)((void 0!==r||(r=t(313217)).hash&&"230c629f69cd693a384aeda4bad75690"!==r.hash&&Z.error("The definition of 'ChatChannelMessageOptionsFragment' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),a),P=T({threadHeader:f}),M=u(),F=(0,b.Dl)(M)||!!d,N=(0,g.Z)(_),R=(0,i.M$)().closeDrawer,D=(0,m.useCallback)((function(e){v(e,void 0)}),[v]);return k.type&&"error"!==k.type&&"system"!==k.type&&"ephemeral"!==k.type&&"failed"!==k.status&&"sending"!==k.status?(0,x.jsxs)("div",{className:S()(P.optionsContainer,n),"data-testid":"message-options",children:[C.zc.map((function(e){return(0,x.jsx)(s.Z,{emoji:e},e.id)})),(0,x.jsx)(c.Z,{onEmojiSelect:D,classes:P.iconButton}),M.includes("pin")&&N.has("chat.manage")&&(0,x.jsx)(w.t2,{content:k.pinned?"Unpin Message":"Pin Message",children:(0,x.jsx)(w.I4,{onClick:I,className:P.iconButton,size:"small",children:(0,x.jsx)(w.De,{icon:"pin",active:k.pinned})})}),"reply"!==k.type&&!O&&(0,x.jsx)(w.t2,{content:"Reply in thread",children:(0,x.jsx)(w.I4,{testid:"message-options.reply-in-thread",onClick:function(e){return function(e){R&&R();p(e)}(e)},className:P.iconButton,size:"small",children:(0,x.jsx)(o.default,{width:"24px",height:"24px"})})}),F&&(0,x.jsx)(w.t2,{content:"More actions","data-testid":"chat-message-options",children:(0,x.jsx)("div",{children:(0,x.jsx)(j,{chatChannelKey:_})})})]}):null}},313217:function(e,n,t){t.r(n);t(244311);var a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatChannelMessageOptionsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePermissionsFragment"},{args:null,kind:"FragmentSpread",name:"ChatChannelMessageActionsFragment"}],type:"ChatChannel",abstractKey:null,hash:"230c629f69cd693a384aeda4bad75690"};n.default=a},791097:function(e,n,t){var a=t(600196),r=t(810863),i=t(541321),o=t(923450),l=t.n(o),s=t(785893),c=(0,r.Z)((function(e){return{container:{paddingTop:e.spacing(.5)},reply:{padding:0,height:"unset","& svg":{color:"".concat(e.palette.groovy.grey[400]," !important"),width:"20px",height:"20px"}}}}));n.Z=function(e){var n=e.onClick,t=e.reply_count,r=c();return(0,s.jsx)("div",{className:r.container,children:(0,s.jsx)(i.v2,{onClick:n,color:"transparent",className:r.reply,leftIcon:(0,s.jsx)(a.default,{}),children:(0,s.jsx)(i.U4,{variant:"body-sm-700",color:"primary.main",children:"".concat(t," ").concat(l()("reply",t))})})})}},144940:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l,s,c,d,u={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"ChatChannelSelectQuery",selections:[{alias:"organization",args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:i=[{kind:"Literal",name:"includeProductLevel",value:!0},{kind:"Literal",name:"kinds",value:["custom","default"]}],concreteType:"ChatChannelNodeConnection",kind:"LinkedField",name:"chatChannels",plural:!1,selections:[{alias:null,args:null,concreteType:"ChatChannelNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ChatChannel",kind:"LinkedField",name:"node",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Product",kind:"LinkedField",name:"product",plural:!1,selections:[o,l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Badge",kind:"LinkedField",name:"badge",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"BadgeFragment"}],storageKey:null}],storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"externalChannelId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"kind",storageKey:null},{alias:null,args:null,concreteType:"ProductApp",kind:"LinkedField",name:"app",plural:!1,selections:[d={alias:null,args:null,kind:"ScalarField",name:"customAppTitle",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'chatChannels(includeProductLevel:true,kinds:["custom","default"])'}],type:"Organization",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatChannelSelectQuery",selections:[{alias:"organization",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:i,concreteType:"ChatChannelNodeConnection",kind:"LinkedField",name:"chatChannels",plural:!1,selections:[{alias:null,args:null,concreteType:"ChatChannelNodeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ChatChannel",kind:"LinkedField",name:"node",plural:!1,selections:[o,{alias:null,args:null,concreteType:"Product",kind:"LinkedField",name:"product",plural:!1,selections:[o,l,{alias:null,args:null,concreteType:"Badge",kind:"LinkedField",name:"badge",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"emoji",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUrl",storageKey:null},o],storageKey:null}],storageKey:null},s,c,{alias:null,args:null,concreteType:"ProductApp",kind:"LinkedField",name:"app",plural:!1,selections:[d,o],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'chatChannels(includeProductLevel:true,kinds:["custom","default"])'}],type:"Organization",abstractKey:null},o],storageKey:null}]},params:{cacheID:"aceeadee154b686209c83692cc7790a7",id:null,metadata:{},name:"ChatChannelSelectQuery",operationKind:"query",text:"query ChatChannelSelectQuery(\n  $id: ID!\n) {\n  organization: node(id: $id) {\n    __typename\n    ... on Organization {\n      chatChannels(includeProductLevel: true, kinds: [custom, default]) {\n        edges {\n          node {\n            id\n            product {\n              id\n              name\n              badge {\n                ...BadgeFragment\n                id\n              }\n            }\n            externalChannelId\n            kind\n            app {\n              customAppTitle\n              id\n            }\n          }\n        }\n      }\n    }\n    id\n  }\n}\n\nfragment BadgeFragment on Badge {\n  kind\n  color\n  icon\n  emoji\n  mediaUrl\n}\n"}};u.hash="667d5114bb0685f43c7fbab0c2625830",n.default=u},596428:function(e,n,t){var a=t(934702),r=t(437910),i=t(810863),o=t(541321),l=t(108920),s=(t(667294),t(785893)),c=(0,i.Z)((function(e){return{container:{background:e.palette.background.paper},header:{padding:e.spacing(1,1.5,0,3),display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},lhs:{display:"flex",alignItems:"center",gap:e.spacing(1)},icon:{width:"40px",height:"40px",padding:e.spacing(1)}}}));n.Z=function(e){var n=e.closeThread,t=c(),i=(0,l.Z)();return(0,s.jsxs)("div",{className:t.container,children:[(0,s.jsxs)("div",{className:t.header,children:[(0,s.jsxs)("div",{className:t.lhs,children:[(0,s.jsx)(r.default,{width:24,height:24,color:i.palette.text.secondary}),(0,s.jsx)(o.U4,{variant:"body-md-600",children:"Thread"})]}),(0,s.jsx)(o.I4,{onClick:n,color:i.palette.text.secondary,classes:{root:t.icon},children:(0,s.jsx)(a.default,{})})]}),(0,s.jsx)(o.o$,{color:i.palette.groovy.neutral[100],thickness:2,marginBottom:0})]})}},318507:function(e,n,t){var a=t(810863),r=t(541321),i=t(108920),o=t(785893),l=(0,a.Z)((function(e){return{container:{display:"flex",gap:e.spacing(1),alignItems:"center",padding:e.spacing(1.5)},divider:{width:"100%"}}}));n.Z=function(){var e=l(),n=(0,i.Z)();return(0,o.jsxs)("div",{className:e.container,children:[(0,o.jsx)(r.U4,{variant:"body-xs-600",children:"Replies"}),(0,o.jsx)(r.o$,{color:n.palette.groovy.neutral[100],thickness:2,className:e.divider})]})}},107679:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(204942),r=t(241451),i=(t(423274),t(387029)),o=t(516164),l=t(77346),s=t(278349),c=t(667294),d=t(321707),u=t(785893);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=function(e){var n,t,a,p=e.children,m=(0,d.Nc)(),h=(0,s.l)().setMentionedGroups,f=m.disableMentions,y=m.mentionAllAppUsers,v=m.mentionQueryParams,b=m.useMentionsTransliteration,x=m.onSelectUser,k=(0,c.useCallback)((function(e){if("user"===e.type)x(e);else{if(e.disabled)return;h((function(n){return[].concat((0,r.Z)(n),[e])}))}}),[x,h]),j={"/":(n=(0,i.JN)().channelConfig,t=null==n?void 0:n.commands,a=null==t?void 0:t.filter((function(e){return"giphy"===e.name})),{component:o.d,dataProvider:function(e,n,t){if(0!==n.indexOf("/")||!a)return[];var r=a.filter((function(n){var t;return-1!==(null===(t=n.name)||void 0===t?void 0:t.indexOf(e))}));r.sort((function(n,t){var a,r,i,o,l=null===(a=n.name)||void 0===a?void 0:a.toLowerCase(),s=null===(r=t.name)||void 0===r?void 0:r.toLowerCase();if(0===(null===(i=l)||void 0===i?void 0:i.indexOf(e))&&(l="0".concat(l)),0===(null===(o=s)||void 0===o?void 0:o.indexOf(e))&&(s="0".concat(s)),null!=l&&null!=s){if(l<s)return-1;if(l>s)return 1}return 0}));var i=r.slice(0,10);return t&&t(i.filter((function(e){return void 0!==e.name})),e),i},output:function(e){return{caretPosition:"next",key:e.name,text:"/".concat(e.name)}}}),"@":(0,l.v)({disableMentions:f,mentionAllAppUsers:y,mentionQueryParams:v,onSelectUser:k,useMentionsTransliteration:b})},C=g(g({},m),{},{autocompleteTriggers:j});return(0,u.jsx)(d.G6,{value:C,children:p})}},278349:function(e,n,t){t.d(n,{l:function(){return l}});var a=t(386854),r=(t(77346),t(667294)),i=t(785893),o=r.createContext({mentionedGroups:[],setMentionedGroups:function(){},containsMentionedGroups:function(){return!1}});function l(){var e=(0,r.useContext)(o);if(!e)throw Error("Must be used within MentionedGroupsProvider");return e}n.Z=function(e){var n=e.children,t=(0,r.useState)([]),l=(0,a.Z)(t,2),s=l[0],c=l[1],d=(0,r.useCallback)((function(e){var n=e.match(new RegExp("@channel","g"));return Boolean(null==n?void 0:n.length)}),[]);return(0,i.jsx)(o.Provider,{value:{mentionedGroups:s,setMentionedGroups:c,containsMentionedGroups:d},children:n})}},691489:function(e,n,t){t.r(n);t(244311);var a,r,i,o={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"useMentionTriggerQuery",selections:[{alias:"chatChannel",args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ChatChannelMemberNodeConnection",kind:"LinkedField",name:"chatChannelMembers",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:null}],type:"ChatChannel",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useMentionTriggerQuery",selections:[{alias:"chatChannel",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"5d1da12a599b97261f6efc440fe2c7d4",id:null,metadata:{},name:"useMentionTriggerQuery",operationKind:"query",text:"query useMentionTriggerQuery(\n  $id: ID!\n) {\n  chatChannel: node(id: $id) {\n    __typename\n    ... on ChatChannel {\n      chatChannelMembers {\n        totalCount\n      }\n    }\n    id\n  }\n}\n"}};o.hash="3d41e28f30960a3d40ff875cb2567cfa",n.default=o},179567:function(e,n,t){t.r(n);t(244311);var a,r,i,o={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"useMentionTrigger_OrganizationQuery",selections:[{alias:"organization",args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewerCanUseChannelMention",storageKey:null}],type:"Organization",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useMentionTrigger_OrganizationQuery",selections:[{alias:"organization",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"3c994a46343ef603eccc36d4b7af45ac",id:null,metadata:{},name:"useMentionTrigger_OrganizationQuery",operationKind:"query",text:"query useMentionTrigger_OrganizationQuery(\n  $id: ID!\n) {\n  organization: node(id: $id) {\n    __typename\n    ... on Organization {\n      viewerCanUseChannelMention\n    }\n    id\n  }\n}\n"}};o.hash="6f60c49bedcf454218732c94db3ab195",n.default=o},77346:function(e,n,t){t.d(n,{v:function(){return _}});var a=t(204942),r=t(115861),i=t(241451),o=t(887757),l=t.n(o),s=t(285245),c=(t(470609),t(10165)),d=(t(179567),t(691489),t(278349)),u=t(810863),p=t(859194),g=t(541321),m=t(162083),h=t(785893);var f,y,v=(0,u.Z)((function(e){return{suggestionItem:{padding:e.spacing(1.5)},icon:{width:32,height:32}}})),b=function(e){var n=e.entity,t=e.selected,a=v();return"user"===n.type?(0,h.jsx)(m.Z,{selected:t,icon:(0,h.jsx)(p.Z,{user:{id:n.disco_user_id,first_name:n.first_name,last_name:n.last_name,avatar:n.avatar,name:n.name,is_test_user:n.is_disco_test_user||!1},size:32,testid:"MentionUserAvatar"}),testid:"MentionSuggestionItem.".concat(n.first_name," ").concat(n.last_name),iconSize:32,className:a.suggestionItem,title:(0,h.jsx)(g.U4,{variant:"body-md-600",children:n.name}),component:"div"}):"channel"===n.name?(0,h.jsx)(m.Z,{selected:t,icon:(0,h.jsx)(g.De,{icon:"sound-max",width:32,height:32}),className:a.suggestionItem,classes:{icon:a.icon},title:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g.U4,{variant:"body-md-600",display:"inline",children:"@".concat(n.name)})," ",(0,h.jsx)(g.U4,{display:"inline",children:"Notify everyone in the channel"})]}),iconSize:32,testid:"MentionSuggestionItem.at-channel",component:"div",tooltip:n.disabled&&n.disabledReason,disabled:n.disabled}):null},x=t(188191),k=t(667294),j=t(422578),C=t(616550),w=(t(423274),t(983156)),O=t(387029),S=t(321707),Z=t(425108);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function _(e){var n,a=e.mentionQueryParams,o=void 0===a?{}:a,u=e.onSelectUser,p=e.useMentionsTransliteration,g=(0,w.mx)().client,m=(0,O.JN)().channel,h=(0,S.Nc)().isThreadInput,v=(0,s.vn)(),T=(0,C.UO)().channelId,_=(0,j.useLazyLoadQuery)((void 0!==f||(f=t(179567)).hash&&"6f60c49bedcf454218732c94db3ab195"!==f.hash&&Z.error("The definition of 'useMentionTrigger_OrganizationQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),f),{id:(null==v?void 0:v.id)||""}).organization,P=c.Z.useSkippableLazyLoadQuery((void 0!==y||(y=t(691489)).hash&&"3d41e28f30960a3d40ff875cb2567cfa"!==y.hash&&Z.error("The definition of 'useMentionTriggerQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),y),{id:T},{skip:!T,fetchPolicy:"network-only"}).chatChannel,M=(0,x.Z)().atChannelMention,F=(0,d.l)().mentionedGroups,R=(null==_?void 0:_.viewerCanUseChannelMention)&&M&&P,D=(null==P||null===(n=P.chatChannelMembers)||void 0===n?void 0:n.totalCount)||9999,E=m.state.members,K=m.state.watchers,L=(0,k.useCallback)((function(){var e=E?Object.values(E).map((function(e){return e.user})):[],n=K?Object.values(K):[],t=[].concat((0,i.Z)(e),(0,i.Z)(n)),a={};return t.forEach((function(e){e&&!a[e.id]&&(a[e.id]=e)})),Object.values(a)}),[E,K]),A=(0,k.useCallback)(function(){var e=(0,r.Z)(l().mark((function e(n,t){var a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.queryMembers({name:{$autocomplete:n}});case 3:a=e.sent,r=a.members.map((function(e){return I(I({},e.user),{},{type:"user"})})),t&&r.length?t(r):t([]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Z.log({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}(),[m]);return{callback:function(e){return u(e)},component:b,dataProvider:function(e,n,t){var a={name:"channel",id:"unused",type:"group",disabled:D>1e3||Boolean(h),disabledReason:D>1e3?"Disabled in channel with more than 1000 members":h?"Disabled in thread":""},r=e.length>0&&"channel".includes(e)&&!F.length;if(!e||Object.values(E||{}).length<100){var i,l=L(),s={ownUserId:g.userID,query:e,text:n,useMentionsTransliteration:p,users:l},c=N(s),d=(null===(i=o.options)||void 0===i?void 0:i.limit)||10,u=c.slice(0,d),m=u.map((function(e){return I(I({},e),{},{type:"user"})}));return R&&r&&m.push(a),t&&t(m,e),m}return A(e,(function(n){R&&r&&n.push(a),t&&t(n,e)}))},output:function(e){return{caretPosition:e.disabled?"end":"next",key:e.id,text:e.disabled?"@":"@".concat(e.name||e.id)}}}}var P={a:"á|à|ã|â|À|Á|Ã|Â",c:"ç|Ç",e:"é|è|ê|É|È|Ê",i:"í|ì|î|Í|Ì|Î",n:"ñ|Ñ",o:"ó|ò|ô|ő|õ|Ó|Ò|Ô|Õ",u:"ú|ù|û|ü|Ú|Ù|Û|Ü"},M=function(e){return e?Object.keys(P).reduce((function(e,n){return e.replace(new RegExp(P[n],"g"),n)}),e):""},F=function(e,n){if(0===e.length)return n.length;if(0===n.length)return e.length;var t,a,r=[];for(t=0;t<=n.length;t++)r[t]=[t];for(a=0;a<=e.length;a++)r[0][a]=a;for(t=1;t<=n.length;t++)for(a=1;a<=e.length;a++)n.charAt(t-1)===e.charAt(a-1)?r[t][a]=r[t-1][a-1]:r[t][a]=Math.min(r[t-1][a-1]+1,Math.min(r[t][a-1]+1,r[t-1][a]+1));return r[n.length][e.length]},N=function(e){var n=e.ownUserId,a=e.query,i=e.text,o=e.useMentionsTransliteration;return e.users.filter((function(e){if(e.id===n)return!1;if(!a)return!0;var s=M(e.id).toLowerCase(),c=M(e.name).toLowerCase(),d=M(a).toLowerCase();o&&(0,r.Z)(l().mark((function n(){var r,i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(6972),t.e(2138),t.e(98),t.e(4467),t.e(4492),t.e(4989),t.e(6966),t.e(6736),t.e(9496),t.e(3506),t.e(4561),t.e(731),t.e(9658),t.e(5647),t.e(8089),t.e(8126),t.e(8469),t.e(7884),t.e(7791),t.e(4796),t.e(6594),t.e(8790),t.e(624),t.e(2166),t.e(4835),t.e(9777),t.e(5991),t.e(6574),t.e(3479),t.e(4980),t.e(4412),t.e(8991),t.e(6273),t.e(4343),t.e(3365),t.e(2360),t.e(1439),t.e(1748),t.e(7841),t.e(8587),t.e(9657),t.e(5702),t.e(1142),t.e(3971),t.e(6381),t.e(457),t.e(6611),t.e(4137),t.e(4362),t.e(5851),t.e(9761),t.e(2935),t.e(3063),t.e(6387),t.e(5538),t.e(1978),t.e(5341),t.e(8212),t.e(1334)]).then(t.bind(t,992524));case 2:r=n.sent,i=r.default,c=i(e.name||"").toLowerCase(),d=i(a).toLowerCase(),s=i(e.id).toLowerCase();case 7:case"end":return n.stop()}}),n)})))();var u=i.slice(-4).includes("@");if(c){var p=F(d,c);if(c.includes(d)||p<=3&&u)return!0}var g=F(d,s);return s.includes(d)||g<=3&&u}))}},134956:function(e,n,t){t.d(n,{v:function(){return d}});var a=t(934702),r=t(810863),i=t(541321),o=t(759693),l=t(294184),s=t.n(l),c=t(785893),d=function(e){var n=e.id,t=e.handleRemove,r=e.className,o=u();return(0,c.jsx)(i.I4,{onClick:function(){return null==t?void 0:t(n)},height:20,width:20,classes:{root:s()(o.delete,r)},svgStyles:{height:10,width:10},color:"white",children:(0,c.jsx)(a.default,{})})},u=(0,r.Z)((function(e){return{delete:{borderRadius:"50%",backgroundColor:e.palette.groovy.neutral[500],position:"absolute",top:0,right:0,transform:"translateY(-50%) translateX(50%)","&:hover":{backgroundColor:(0,o.$n)(e.palette.groovy.neutral[500],.2)},"& span":{width:"unset","& svg":{color:e.palette.common.white}}}}}))},363748:function(e,n,t){t.d(n,{f:function(){return M},d:function(){return F}});var a=t(386854),r=t(285245),i=t(69722),o=t(963114),l=t(187351),s=t(810863),c=t(669050),d=t(934702),u=t(541321),p=t(759693),g=t(294184),m=t.n(g),h=t(785893),f=function(e){var n=e.link,t=e.removeLink,a=y();return n.image_url||n.title||n.text?(0,h.jsxs)("div",{className:a.linkAttachment,children:[n.image_url&&(0,h.jsx)("img",{src:n.image_url,alt:"",className:a.linkIcon}),(0,h.jsxs)("div",{className:a.linkText,children:[n.title&&(0,h.jsx)(u.U4,{variant:"body-md-600",color:"text.primary",truncateText:1,children:n.title}),n.text&&(0,h.jsx)(u.U4,{variant:"body-xs",color:"text.secondary",truncateText:1,children:n.text})]}),(0,h.jsx)(u.I4,{onClick:t,height:20,width:20,classes:{root:m()(a.delete)},svgStyles:{height:10,width:10},color:"white",children:(0,h.jsx)(d.default,{className:a.icon})})]}):null},y=(0,s.Z)((function(e){return{linkAttachment:{width:"400px",height:"80px",flexShrink:0,border:"1px solid",borderColor:e.palette.divider,boxShadow:e.palette.groovyDepths.xs,borderRadius:e.measure.borderRadius.big,backgroundColor:e.palette.background.paper,display:"flex",alignItems:"center",position:"relative",padding:e.spacing(1.5)},linkIcon:{width:"48px",height:"48px",marginRight:e.spacing(1.5),borderRadius:e.measure.borderRadius.medium,objectFit:"contain",objectPosition:"center"},linkText:{display:"flex",flexDirection:"column",minWidth:0},icon:{color:"white"},delete:{borderRadius:"50%",backgroundColor:e.palette.groovy.neutral[500],position:"absolute",top:0,right:0,transform:"translateY(-50%) translateX(50%)","&:hover":{backgroundColor:(0,p.$n)(e.palette.groovy.neutral[500],.2)},"& span":{width:"unset","& svg":{color:e.palette.common.white}}}}})),v=t(164344),b=t(383248),x=t(163102),k=t(354384),j=t(134956),C=t(944498),w=function(e){var n=e.uploads,t=e.handleRemove,a=O(),r=(0,x.Z)();return(0,h.jsx)("div",{className:a.container,children:(0,h.jsx)("div",{className:m()(r.hoverable,a.list),children:null==n?void 0:n.map((function(e){var n,r=(null===(n=e.localMetadata)||void 0===n?void 0:n.id)||e.id;return r?(0,h.jsxs)("div",{className:a.file,children:["video"===e.type?(0,h.jsxs)("div",{className:a.videoContainer,children:[(0,h.jsx)("div",{className:a.overlay}),(0,h.jsx)("video",{src:e.asset_url,className:a.thumbnail}),(0,h.jsx)(b.default,{className:a.playIcon})]}):(0,h.jsx)("div",{className:a.item,children:(0,h.jsx)(k.e,{name:e.title,url:e.asset_url,size:e.file_size})}),"uploading"===e.state&&(0,h.jsx)("div",{className:a.loadingIndicator,children:(0,h.jsx)(C.T,{})}),t&&(0,h.jsx)(j.v,{id:r,handleRemove:t})]},r):null}))})})},O=(0,s.Z)((function(e){return{container:{border:"none",display:"flex",flexDirection:"column",gap:e.spacing(1)},list:{display:"flex",height:"100%",gap:e.spacing(2)},item:{height:"80px",width:"400px",display:"flex",alignItems:"center",borderRadius:e.measure.borderRadius.big,flexShrink:0,position:"relative",border:"1px solid",boxShadow:e.palette.groovyDepths.xs,borderColor:e.palette.divider,backgroundColor:e.palette.background.paper,padding:e.spacing(2)},thumbnail:{borderRadius:e.measure.borderRadius.medium,height:"80px",width:"80px",objectFit:"cover",alignItems:"center",justifyContent:"center",display:"flex"},file:{display:"flex",position:"relative"},playIcon:{position:"absolute",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)",zIndex:2},loadingIndicator:{position:"absolute",right:e.spacing(4)},videoContainer:{position:"relative"},overlay:{position:"absolute",borderRadius:e.measure.borderRadius.medium,inset:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.2)",zIndex:1,pointerEvents:"none"}}})),S=function(e){var n=e.imageUploads,t=e.handleRemove,a=Z(),r=(0,x.Z)();return(0,h.jsx)("div",{className:a.list,children:null==n?void 0:n.map((function(e){var n,i,o,l=(null===(n=e.localMetadata)||void 0===n?void 0:n.id)||e.id;return l?(0,h.jsxs)("div",{className:m()(r.hoverable,a.image),children:[e.image_url&&"finished"===(null===(i=e.localMetadata)||void 0===i?void 0:i.uploadState)&&(0,h.jsx)("img",{src:e.image_url,alt:e.title,className:a.thumbnail}),"finished"!==(null===(o=e.localMetadata)||void 0===o?void 0:o.uploadState)&&(0,h.jsx)("div",{className:a.thumbnail,children:(0,h.jsx)(C.T,{})}),t&&(0,h.jsx)(j.v,{id:l,handleRemove:t})]},l):null}))})},Z=(0,s.Z)((function(e){return{list:{display:"flex",gap:e.spacing(2)},image:{display:"flex",position:"relative"},thumbnail:{borderRadius:e.measure.borderRadius.medium,border:" 1px solid ".concat(e.palette.groovy.neutral[200]),height:"80px",width:"80px",objectFit:"cover",alignItems:"center",justifyContent:"center",display:"flex"}}})),T=(t(686394),t(667294)),I=t(387029),_=t(321707),P=t(584622),M=function(e){var n=e.setPreviewLinksToHide,t=e.previewLinksToHide,l=(0,I.JN)("ChatChannelUploadsPreview"),s=l.maxNumberOfFiles,d=l.multipleUploads,p=(0,_.Nc)("UploadsPreview"),g=(0,_.Nc)(),m=g.linkPreviews,y=g.dismissLinkPreview,b=(0,r.vn)(),x=(0,i.R6)(),k=(0,o.NP)("organization_member"),j=p.attachments,C=p.uploadNewFiles,O=p.removeAttachments,Z=p.uploadAttachment,M=(0,T.useState)(j),R=(0,a.Z)(M,2),D=R[0],E=R[1],K=Array.from(m.values()),L=new Set,A=K.filter((function(e){var n,a,r,i=null!==(n=null===(a=e.title_link)||void 0===a?void 0:a.replace(/\/$/,""))&&void 0!==n?n:"";return!L.has(i)&&!L.has("".concat(i,"/"))&&(L.add(null!==(r=e.title_link)&&void 0!==r?r:""),"dismissed"!==e.state&&!(null!=t&&t.some((function(e){return e===i||e==="".concat(i,"/")}))))})),z=K.every((function(e){return"failed"===e.state}));(0,T.useEffect)((function(){E(j)}),[j,p]);var U=N(),B=(0,T.useRef)((0,P.Z)()),V=D.filter((function(e){return"image"===e.type&&!e.og_scrape_url})),Q=D.filter((function(e){return["file","audio","video"].includes(e.type||"")})),q=D.filter((function(e){return v.L.includes(e.type)}));return(0,h.jsx)(h.Fragment,{children:D.length||K.length&&!z?(0,h.jsxs)("div",{className:U.scroll,children:[(0,h.jsxs)("div",{className:U.previewContainer,children:[K.length>0&&(0,h.jsx)(h.Fragment,{children:A.map((function(e){var t;return F(null!==(t=e.title_link)&&void 0!==t?t:"",b,x)?null:(0,h.jsx)(f,{link:e,removeLink:function(){return function(e){var t,a;y(e);var r=null!==(t=null===(a=e.title_link)||void 0===a?void 0:a.replace(/\/$/,""))&&void 0!==t?t:"";K.forEach((function(e){e.title_link!==r&&e.title_link!=="".concat(r,"/")||y(e)}));var i=K.filter((function(e){return"dismissed"===e.state})).map((function(e){var n,t;return null!==(n=null===(t=e.title_link)||void 0===t?void 0:t.replace(/\/$/,""))&&void 0!==n?n:""}));n&&n(i)}(e)}},e.og_scrape_url)}))}),V.length>0&&(0,h.jsx)(S,{disabled:!d||void 0!==s&&D.length>=s,handleFiles:C,handleRemove:function(e){O([e])},handleRetry:function(e){var n,t=V.find((function(n){var t;return(null===(t=n.localMetadata)||void 0===t?void 0:t.id)===e}));null!=t&&null!==(n=t.localMetadata)&&void 0!==n&&n.file&&Z(t)},imageUploads:V,multiple:d}),Q.length>0&&(0,h.jsx)(w,{handleFiles:C,handleRemove:function(e){return O([e])},handleRetry:function(e){var n,t=Q.find((function(n){var t;return(null===(t=n.localMetadata)||void 0===t?void 0:t.id)===e}));null!=t&&null!==(n=t.localMetadata)&&void 0!==n&&n.file&&Z(t)},uploads:Q}),Q.length+V.length-D.length!=0&&(Q.length>0||V.length>0)&&(0,h.jsx)("div",{className:U.divider}),q.map((function(e){return(0,h.jsx)(c.Z,{type:e.type,entityId:e.text,handleRemove:function(e){!function(e){var n,t=D.find((function(n){return n.text===e}));t&&O([null===(n=t.localMetadata)||void 0===n?void 0:n.id])}(e)}})}))]}),D.some((function(e){return v.L.includes(e.type)}))&&(0,h.jsx)(u.kz,{message:"Only ".concat(k.plural," with access will be able to view the attachments."),dismissibleKey:"ChatChannelUploadsPreview-".concat(B.current)})]}):null})};function F(e,n,t){return e&&((0,l.ID)(e,{orgSlug:n.slug})||(0,l.HV)(e,{orgSlug:n.slug,productSlug:null==t?void 0:t.slug})||null!==(0,l.G9)(e)||null!==(0,l.qk)(e)||(0,l.mt)(e))&&!(0,l.zz)(e)}var N=(0,s.Z)((function(e){return{scroll:{width:"100%"},previewContainer:{width:"100%",display:"flex",alignItems:"center",overflowX:"auto",overflowY:"hidden",paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5),gap:e.spacing(2)},divider:{height:"80px",borderLeft:"1.5px solid ".concat(e.palette.divider)}}}))},924193:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"useUnreadThreadCountQuery",selections:[{alias:"organization",args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"viewerUnreadThreadCount",storageKey:null}],type:"Organization",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useUnreadThreadCountQuery",selections:[{alias:"organization",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{kind:"InlineFragment",selections:[o],type:"Organization",abstractKey:null}],storageKey:null}]},params:{cacheID:"16c54c43543ada4e121e0b57dedded70",id:null,metadata:{},name:"useUnreadThreadCountQuery",operationKind:"query",text:"query useUnreadThreadCountQuery(\n  $id: ID!\n) {\n  organization: node(id: $id) {\n    __typename\n    ... on Organization {\n      id\n      viewerUnreadThreadCount\n    }\n    id\n  }\n}\n"}};l.hash="08cf48a4156c30e9be677c445a898f7b",n.default=l},511626:function(e,n,t){t.d(n,{EI:function(){return a},zc:function(){return r}});t(615656);var a=5,r=[{colons:":+1:",emoticons:[],id:"+1",name:"+1",native:"👍",shortcodes:":+1:",unified:"1f44d"},{colons:":heart:",emoticons:["<3"],id:"heart",name:"heart",native:"❤️",shortcodes:":heart:",unified:"2764-fe0f"},{colons:":laughing:",emoticons:[":>",":->"],id:"laughing",name:"laughing",native:"😆",shortcodes:":laughing:",unified:"1f606"}]},614010:function(e,n,t){var a=t(386854),r=t(458044),i=t(667294),o=(t(423274),t(983156));n.Z=function(e){var n=(0,o.mx)().client,t=(e||[]).reduce((function(e,n){return n.id&&(e[n.id]=n),e}),{}),l=(0,i.useRef)(!1),s=(0,i.useState)((e||[]).reduce((function(e,n){return e+n.state.unreadCount}),0)),c=(0,a.Z)(s,2),d=c[0],u=c[1],p=(0,r.Z)((function(e){u(e)}),500);return(0,i.useEffect)((function(){n&&null!=e&&e.length&&!l.current&&(l.current=!0,p((e||[]).reduce((function(e,n){return e+n.state.unreadCount}),0)))}),[e,p,n]),(0,i.useEffect)((function(){if(n)return n.on((function(n){if(!n.channel_id||t[n.channel_id]){var a=(e||[]).reduce((function(e,n){return e+n.state.unreadCount}),0);n.total_unread_count&&n.total_unread_count>0&&p(a),"notification.mark_read"!==n.type&&"message.read"!==n.type||p(a)}})).unsubscribe}),[n,p,e,t]),d}},447818:function(e,n,t){var a=t(386854),r=t(458044),i=t(667294),o=t(983156);n.Z=function(e){var n=(0,o.mx)().client,t=(0,i.useState)(0),l=(0,a.Z)(t,2),s=l[0],c=l[1],d=(0,r.Z)((function(e){c(e)}),500);function u(){return n&&n.activeChannels?Object.values(n.activeChannels).reduce((function(n,t){return t.id&&e.includes(t.id)?n+t.state.unreadCount:n}),0):0}return(0,i.useEffect)((function(){if(n){var e=u();d(e)}}),[e.length,d]),(0,i.useEffect)((function(){if(n)return n.on((function(e){if("message.new"===e.type){var n=u();d(n)}if("message.read"===e.type){var t=u();d(t)}})).unsubscribe}),[n,e.length,d]),s}},141411:function(e,n,t){t.d(n,{Z:function(){return u}});var a,r=t(386854),i=t(285245),o=t(10165),l=(t(924193),t(458044)),s=t(667294),c=(t(244311),t(983156)),d=t(425108);function u(){var e=(0,c.mx)().client,n=(0,i.vn)(),u=o.Z.useRefetchableBackgroundQuery((void 0!==a||(a=t(924193)).hash&&"08cf48a4156c30e9be677c445a898f7b"!==a.hash&&d.error("The definition of 'useUnreadThreadCountQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{id:n.id}),p=(0,r.Z)(u,2),g=p[0].organization,m=p[1],h=(null==g?void 0:g.viewerUnreadThreadCount)||0,f=(0,l.Z)(m,2e3);return(0,s.useEffect)((function(){if(e)return e.on((function(e){"message.new"===e.type&&f({id:n.id})})).unsubscribe}),[e,f,n.id]),{unreadThreadCount:h,refetchUnreadThreadCount:function(){return m({id:n.id})}}}},482016:function(e,n,t){var a=t(386854),r=t(509645),i=t(294184),o=t.n(i),l=t(667294),s=t(758223),c=t(785893);n.Z=function(e){var n=e.className,t=e.children,i=e.stopPropagation,d=void 0===i||i,u=(0,l.useState)(!1),p=(0,a.Z)(u,2),g=p[0],m=p[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.p,{className:o()("new-conversation-button",n),onClick:function(e){d&&e.stopPropagation();m(!0)},children:t}),g&&(0,c.jsx)(s.Z,{isOpen:!0,onClose:function(){m(!1)}})]})}},758223:function(e,n,t){var a=t(115861),r=t(241451),i=t(386854),o=t(887757),l=t.n(o),s=t(691394),c=t(285245),d=t(922261),u=t(963114),p=t(576455),g=(t(42986),t(541321)),m=t(757336),h=t(667294),f=t(52270),y=t(785893),v=(0,m.Pi)((function(e){var n=e.isOpen,t=e.onClose,o=(0,h.useState)([]),m=(0,i.Z)(o,2),v=m[0],b=m[1],x=(0,d.f)({required:!0}).authUser,k=(0,c.vn)(),j=(0,s.Z)(),C=(0,i.Z)(j,2),w=C[0],O=C[1],S=(0,u.NP)("organization"),Z=(0,u.NP)("organization_member");return(0,y.jsx)(g.SH,{isOpen:n,onClose:t,modalContentLabel:"new conversation modal",maxWidth:"560px",title:"Start a Direct Message",testid:"NewDirectMessageModal",buttons:!0,body:(0,y.jsx)(f.Z,{testid:"NewDirectMessageModal.Form",isSubmitAllowed:v.length>0,onSubmit:function(){return T.apply(this,arguments)},buttons:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.v2,{color:"grey",variant:"outlined",onClick:t,children:"Cancel"}),(0,y.jsx)(f.Z.SubmitButton,{form:{isSubmitting:O,disabled:0===v.length},testid:"NewDirectMessageModal.SubmitButton",children:"Start Conversation"})]}),children:null!=k&&k.viewerMembership?(0,y.jsx)(p.Z,{testid:"OrganizationMemberSelect.search",values:v.map((function(e){return e.id})),onChange:function(e){b((0,r.Z)(e))},hideUserIds:[x.id],autoFocusInput:!0}):(0,y.jsx)(g.U4,{children:"You must be a ".concat(Z.singular," of this ").concat(S.singularLowercase," to start a conversation.")})})});function T(){return(T=(0,a.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=v.map((function(e){return e.id}))).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w(n);case 5:e.sent&&t();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}));n.Z=v},13394:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"chatUtilsChatQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ProductApp",kind:"LinkedField",name:"app",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"customAppTitle",storageKey:null}],storageKey:null}],type:"ChatChannel",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"chatUtilsChatQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ProductApp",kind:"LinkedField",name:"app",plural:!1,selections:[o,i],storageKey:null}],type:"ChatChannel",abstractKey:null}],storageKey:null}]},params:{cacheID:"c7f834b25527acdd18a195d1561eb303",id:null,metadata:{},name:"chatUtilsChatQuery",operationKind:"query",text:"query chatUtilsChatQuery(\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ... on ChatChannel {\n      id\n      app {\n        customAppTitle\n        id\n      }\n    }\n    id\n  }\n}\n"}};l.hash="e3df8e6212410aa5364d6027d25a1af9",n.default=l},780749:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"chatUtilsContentUsageQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Content",kind:"LinkedField",name:"content",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"ContentUsage",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"chatUtilsContentUsageQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Content",kind:"LinkedField",name:"content",plural:!1,selections:[o,i],storageKey:null}],type:"ContentUsage",abstractKey:null}],storageKey:null}]},params:{cacheID:"5668a2f7bf2493d1f70554b50c8ebabe",id:null,metadata:{},name:"chatUtilsContentUsageQuery",operationKind:"query",text:"query chatUtilsContentUsageQuery(\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ... on ContentUsage {\n      id\n      content {\n        name\n        id\n      }\n    }\n    id\n  }\n}\n"}};l.hash="08567ac58391e07d69014a8baad47bb5",n.default=l},301597:function(e,n,t){t.r(n);t(244311);var a,r,i,o,l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"chatUtilsOccurrenceQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"Occurrence",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"chatUtilsOccurrenceQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{kind:"InlineFragment",selections:[o],type:"Occurrence",abstractKey:null}],storageKey:null}]},params:{cacheID:"73541db989a89e2ec713604b460b5609",id:null,metadata:{},name:"chatUtilsOccurrenceQuery",operationKind:"query",text:"query chatUtilsOccurrenceQuery(\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ... on Occurrence {\n      id\n      name\n    }\n    id\n  }\n}\n"}};l.hash="734cc93489d900ce0a9d23a48b44d289",n.default=l},624822:function(e,n,t){t.r(n);t(244311);var a,r,i,o={fragment:{argumentDefinitions:[a={defaultValue:null,kind:"LocalArgument",name:"organizationSlug"},r={defaultValue:null,kind:"LocalArgument",name:"productSlug"}],kind:"Fragment",metadata:null,name:"chatUtilsProductQuery",selections:i=[{alias:null,args:[{kind:"Variable",name:"organizationSlug",variableName:"organizationSlug"},{kind:"Variable",name:"slug",variableName:"productSlug"}],concreteType:"Product",kind:"LinkedField",name:"product",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[r,a],kind:"Operation",name:"chatUtilsProductQuery",selections:i},params:{cacheID:"e33fe6525edfd38c3f97ae61ab6280d1",id:null,metadata:{},name:"chatUtilsProductQuery",operationKind:"query",text:"query chatUtilsProductQuery(\n  $productSlug: String!\n  $organizationSlug: String!\n) {\n  product(slug: $productSlug, organizationSlug: $organizationSlug) {\n    name\n    id\n  }\n}\n"}};o.hash="d64c5970fb9aa95ab617b15962b1f803",n.default=o},169156:function(e,n,t){t.r(n);t(244311);var a,r,i,o={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",metadata:null,name:"chatUtils_OrganizationMembershipStreamConnectionQuery",selections:[{alias:"organizationMembership",args:r=[{kind:"Variable",name:"id",variableName:"id"}],concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"streamChatUserId",storageKey:null}],type:"OrganizationMembership",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"chatUtils_OrganizationMembershipStreamConnectionQuery",selections:[{alias:"organizationMembership",args:r,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"7271aab0c01975c8dcf1cfce20568808",id:null,metadata:{},name:"chatUtils_OrganizationMembershipStreamConnectionQuery",operationKind:"query",text:"query chatUtils_OrganizationMembershipStreamConnectionQuery(\n  $id: ID!\n) {\n  organizationMembership: node(id: $id) {\n    __typename\n    ... on OrganizationMembership {\n      streamChatUserId\n    }\n    id\n  }\n}\n"}};o.hash="ac63ec2326663db156e1c3de90f771bf",n.default=o},193106:function(e,n,t){t.d(n,{$I:function(){return F},R$:function(){return I},Tn:function(){return x},Xh:function(){return b},Xr:function(){return P},Z$:function(){return N},j6:function(){return M}});var a,r,i,o,l=t(671002),s=t(115861),c=t(887757),d=t.n(c),u=(t(285245),t(187351)),p=t(10165),g=(t(13394),t(780749),t(301597),t(624822),t(169156),t(850429)),m=t(323402),h=(t(422578),t(423274),t(425108));function f(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw i}}}}function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var v=36e5,b=["mute","edit","pin","quote","reply","delete","react"];function x(e,n,t,a){var r,i,o,l,s=e.created_at&&null!=n&&n.created_at?new Date(e.created_at).getTime()-new Date(n.created_at).getTime():0,c=!n||(null==n||null===(r=n.user)||void 0===r?void 0:r.id)!==(null==e||null===(i=e.user)||void 0===i?void 0:i.id)||s>v;s=e.created_at&&null!=t&&t.created_at?new Date(t.created_at).getTime()-new Date(e.created_at).getTime():0;var d=!t||(null==t||null===(o=t.user)||void 0===o?void 0:o.id)!==(null==e||null===(l=e.user)||void 0===l?void 0:l.id)||s>v;return a?"single":c?"top":d?"bottom":!c&&!d?"middle":"single"}function k(e,n){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(d().mark((function e(n,r){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.runQuery((void 0!==a||(a=t(624822)).hash&&"d64c5970fb9aa95ab617b15962b1f803"!==a.hash&&h.error("The definition of 'chatUtilsProductQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),{productSlug:n,organizationSlug:r},{fetchPolicy:"store-or-network"});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.runQuery((void 0!==r||(r=t(301597)).hash&&"734cc93489d900ce0a9d23a48b44d289"!==r.hash&&h.error("The definition of 'chatUtilsOccurrenceQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),{id:n},{fetchPolicy:"store-or-network"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.runQuery((void 0!==i||(i=t(780749)).hash&&"08567ac58391e07d69014a8baad47bb5"!==i.hash&&h.error("The definition of 'chatUtilsContentUsageQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),{id:n},{fetchPolicy:"store-or-network"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.runQuery((void 0!==o||(o=t(13394)).hash&&"e3df8e6212410aa5364d6027d25a1af9"!==o.hash&&h.error("The definition of 'chatUtilsChatQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),{id:n},{fetchPolicy:"store-or-network"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,n){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(d().mark((function e(n,t){var a,r,i,o,l,s,c,g,m,h,y,v,b,x,j,w,S,T,I,_,P,M,F;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.replaceAll(/\[([^\]]+)\]\(([^)]+)\)/g,"").match(/(http|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\\/~+#-]*[\w@?^=%&\\/~+#-])/g)||[],r=n,i=new Map,a){e.next=5;break}return e.abrupt("return",n);case 5:o=f(a),e.prev=6,o.s();case 8:if((l=o.n()).done){e.next=53;break}if(s=l.value,c=(0,u.eX)(s)||s.includes(t.primaryDomain),!i.has(s)){e.next=13;break}return e.abrupt("continue",51);case 13:if(c){e.next=17;break}return g=s.replace(/(^\w+:|^)\/\//,"").replace(/\/$/,""),i.set(s,"[".concat(g,"](").concat(s,")")),e.abrupt("continue",51);case 17:if(!(m=(0,u.G9)(s))){e.next=25;break}return e.next=21,C(m);case 21:if(null==(y=e.sent)||null===(h=y.node)||void 0===h||!h.name){e.next=25;break}return i.set(s,"[".concat(y.node.name,"](").concat(s,")")),e.abrupt("continue",51);case 25:if(!(v=(0,u.qk)(s))){e.next=34;break}return j=p.Z.toGlobalId("ContentUsage",v),e.next=30,O(j);case 30:if(null==(w=e.sent)||null===(b=w.node)||void 0===b||null===(x=b.content)||void 0===x||!x.name){e.next=34;break}return i.set(s,"[".concat(w.node.content.name,"](").concat(s,")")),e.abrupt("continue",51);case 34:if(!(S=(0,u.su)(s))){e.next=42;break}return e.next=38,Z(S);case 38:if(null==(_=e.sent)||null===(T=_.node)||void 0===T||null===(I=T.app)||void 0===I||!I.customAppTitle){e.next=42;break}return i.set(s,"[#".concat(_.node.app.customAppTitle,"](").concat(s,")")),e.abrupt("continue",51);case 42:if(!(0,u.mt)(s)){e.next=51;break}if(!(P=(0,u.yL)(s))){e.next=51;break}return e.next=47,k(P,t.slug);case 47:if(null==(F=e.sent)||null===(M=F.product)||void 0===M||!M.name){e.next=51;break}return i.set(s,"[".concat(F.product.name,"](").concat(s,")")),e.abrupt("continue",51);case 51:e.next=8;break;case 53:e.next=58;break;case 55:e.prev=55,e.t0=e.catch(6),o.e(e.t0);case 58:return e.prev=58,o.f(),e.finish(58);case 61:return i.forEach((function(e,n){r=r.split(n).join(e)})),e.abrupt("return",r);case 63:case"end":return e.stop()}}),e,null,[[6,55,58,61]])})))).apply(this,arguments)}function P(e){var n=e,t=/^(https?:\/\/)?(www\.)?disco\.co/;if(n)for(var a=n.length-1;a>=0;a--){var r=n[a];if(r.og_scrape_url&&r.title_link){var i=t.test(r.title_link),o=t.test(r.og_scrape_url);(i&&!o||null!==(0,u.G9)(r.og_scrape_url)||null!==(0,u.qk)(r.og_scrape_url)||null!==(0,u.su)(r.og_scrape_url)||(0,u.mt)(r.og_scrape_url))&&n.splice(a,1)}}return n}function M(e,n,t){var a,r=[],i=f(e.match(/\bhttps?:\/\/\S+\b/g)||[]);try{var o=function(){var e=a.value,i=e.includes(n.primaryDomain);if(!(0,u.eX)(e)&&!i)return{v:void 0};var o=(0,u.G9)(e);if(o&&(null==r||!r.some((function(e){return e.text===o}))))return null==r||r.push({text:o,type:"occurrence"}),"continue";var l=(0,u.qk)(e),s=l?p.Z.toGlobalId("ContentUsage",l):null;if(s&&(null==r||!r.some((function(e){return e.text===s}))))return null==r||r.push({text:s,type:"contentUsage"}),"continue";var c=(0,u.yL)(e),d=(0,u.mt)(e),g=c?(0,u.WO)(c,t):null;!g||!d||null!=r&&r.some((function(e){return e.text===g}))||null==r||r.push({text:g,type:"product"})};for(i.s();!(a=i.n()).done;){var s=o();if("continue"!==s&&"object"===(0,l.Z)(s))return s.v}}catch(e){i.e(e)}finally{i.f()}return r}function F(e){if(!e)return null;var n="string"==typeof e?new Date(e):e,t="string"==typeof e?e:e.toDateString();return{tooltip:(0,m.eP)({format:g.zT.DATE_WITH_SHORT_TIME_FORMAT_AT,shouldShiftDateToCompensateForTimezone:!1})(n),display:1===(0,m.fN)((new Date).toDateString(),t)?"Yesterday":(0,m.eP)({format:g.zT.DEFAULT_MONTH_AND_DAY,shouldShiftDateToCompensateForTimezone:!1})(n)}}function N(e){return e.replace(/<[^>]*>?/gm,"").replace(/\n/g,"")}}}]);
//# sourceMappingURL=chunk-ee60fe87-cedee382940536a9.bundle.js.map